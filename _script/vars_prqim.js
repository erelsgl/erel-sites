/*
This file was automatically generated by:
	/_script/combine_js.php?files=_script/jquery-1.3.2.min+_script/jquery.hoverIntent.min+_script/vars0+_script/cookies+_script/rtelang/en+_script/rte+_script/elements+_script/form_validation+_script/fields+_script/arguments+_script/sites+_script/dates/dates+_script/templates+_script/magrim+http://www.google.com/friendconnect/script/friendconnect.js+_script/search+_script/etc_prqim+_script/jquery.taconite&out=_script/vars_prqim&minify=0
Don't edit it directly!
*/
var target_direction = '';


/* _script/jquery-1.3.2.min */

/*
 * jQuery JavaScript Library v1.3.2
 * http://jquery.com/
 *
 * Copyright (c) 2009 John Resig
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 *
 * Date: 2009-02-19 17:34:21 -0500 (Thu, 19 Feb 2009)
 * Revision: 6246
 */
(function(){var l=this,g,y=l.jQuery,p=l.$,o=l.jQuery=l.$=function(E,F){return new o.fn.init(E,F)},D=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,f=/^.[^:#\[\.,]*$/;o.fn=o.prototype={init:function(E,H){E=E||document;if(E.nodeType){this[0]=E;this.length=1;this.context=E;return this}if(typeof E==="string"){var G=D.exec(E);if(G&&(G[1]||!H)){if(G[1]){E=o.clean([G[1]],H)}else{var I=document.getElementById(G[3]);if(I&&I.id!=G[3]){return o().find(E)}var F=o(I||[]);F.context=document;F.selector=E;return F}}else{return o(H).find(E)}}else{if(o.isFunction(E)){return o(document).ready(E)}}if(E.selector&&E.context){this.selector=E.selector;this.context=E.context}return this.setArray(o.isArray(E)?E:o.makeArray(E))},selector:"",jquery:"1.3.2",size:function(){return this.length},get:function(E){return E===g?Array.prototype.slice.call(this):this[E]},pushStack:function(F,H,E){var G=o(F);G.prevObject=this;G.context=this.context;if(H==="find"){G.selector=this.selector+(this.selector?" ":"")+E}else{if(H){G.selector=this.selector+"."+H+"("+E+")"}}return G},setArray:function(E){this.length=0;Array.prototype.push.apply(this,E);return this},each:function(F,E){return o.each(this,F,E)},index:function(E){return o.inArray(E&&E.jquery?E[0]:E,this)},attr:function(F,H,G){var E=F;if(typeof F==="string"){if(H===g){return this[0]&&o[G||"attr"](this[0],F)}else{E={};E[F]=H}}return this.each(function(I){for(F in E){o.attr(G?this.style:this,F,o.prop(this,E[F],G,I,F))}})},css:function(E,F){if((E=="width"||E=="height")&&parseFloat(F)<0){F=g}return this.attr(E,F,"curCSS")},text:function(F){if(typeof F!=="object"&&F!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(F))}var E="";o.each(F||this,function(){o.each(this.childNodes,function(){if(this.nodeType!=8){E+=this.nodeType!=1?this.nodeValue:o.fn.text([this])}})});return E},wrapAll:function(E){if(this[0]){var F=o(E,this[0].ownerDocument).clone();if(this[0].parentNode){F.insertBefore(this[0])}F.map(function(){var G=this;while(G.firstChild){G=G.firstChild}return G}).append(this)}return this},wrapInner:function(E){return this.each(function(){o(this).contents().wrapAll(E)})},wrap:function(E){return this.each(function(){o(this).wrapAll(E)})},append:function(){return this.domManip(arguments,true,function(E){if(this.nodeType==1){this.appendChild(E)}})},prepend:function(){return this.domManip(arguments,true,function(E){if(this.nodeType==1){this.insertBefore(E,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(E){this.parentNode.insertBefore(E,this)})},after:function(){return this.domManip(arguments,false,function(E){this.parentNode.insertBefore(E,this.nextSibling)})},end:function(){return this.prevObject||o([])},push:[].push,sort:[].sort,splice:[].splice,find:function(E){if(this.length===1){var F=this.pushStack([],"find",E);F.length=0;o.find(E,this[0],F);return F}else{return this.pushStack(o.unique(o.map(this,function(G){return o.find(E,G)})),"find",E)}},clone:function(G){var E=this.map(function(){if(!o.support.noCloneEvent&&!o.isXMLDoc(this)){var I=this.outerHTML;if(!I){var J=this.ownerDocument.createElement("div");J.appendChild(this.cloneNode(true));I=J.innerHTML}return o.clean([I.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/^\s*/,"")])[0]}else{return this.cloneNode(true)}});if(G===true){var H=this.find("*").andSelf(),F=0;E.find("*").andSelf().each(function(){if(this.nodeName!==H[F].nodeName){return}var I=o.data(H[F],"events");for(var K in I){for(var J in I[K]){o.event.add(this,K,I[K][J],I[K][J].data)}}F++})}return E},filter:function(E){return this.pushStack(o.isFunction(E)&&o.grep(this,function(G,F){return E.call(G,F)})||o.multiFilter(E,o.grep(this,function(F){return F.nodeType===1})),"filter",E)},closest:function(E){var G=o.expr.match.POS.test(E)?o(E):null,F=0;return this.map(function(){var H=this;while(H&&H.ownerDocument){if(G?G.index(H)>-1:o(H).is(E)){o.data(H,"closest",F);return H}H=H.parentNode;F++}})},not:function(E){if(typeof E==="string"){if(f.test(E)){return this.pushStack(o.multiFilter(E,this,true),"not",E)}else{E=o.multiFilter(E,this)}}var F=E.length&&E[E.length-1]!==g&&!E.nodeType;return this.filter(function(){return F?o.inArray(this,E)<0:this!=E})},add:function(E){return this.pushStack(o.unique(o.merge(this.get(),typeof E==="string"?o(E):o.makeArray(E))))},is:function(E){return !!E&&o.multiFilter(E,this).length>0},hasClass:function(E){return !!E&&this.is("."+E)},val:function(K){if(K===g){var E=this[0];if(E){if(o.nodeName(E,"option")){return(E.attributes.value||{}).specified?E.value:E.text}if(o.nodeName(E,"select")){var I=E.selectedIndex,L=[],M=E.options,H=E.type=="select-one";if(I<0){return null}for(var F=H?I:0,J=H?I+1:M.length;F<J;F++){var G=M[F];if(G.selected){K=o(G).val();if(H){return K}L.push(K)}}return L}return(E.value||"").replace(/\r/g,"")}return g}if(typeof K==="number"){K+=""}return this.each(function(){if(this.nodeType!=1){return}if(o.isArray(K)&&/radio|checkbox/.test(this.type)){this.checked=(o.inArray(this.value,K)>=0||o.inArray(this.name,K)>=0)}else{if(o.nodeName(this,"select")){var N=o.makeArray(K);o("option",this).each(function(){this.selected=(o.inArray(this.value,N)>=0||o.inArray(this.text,N)>=0)});if(!N.length){this.selectedIndex=-1}}else{this.value=K}}})},html:function(E){return E===g?(this[0]?this[0].innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,""):null):this.empty().append(E)},replaceWith:function(E){return this.after(E).remove()},eq:function(E){return this.slice(E,+E+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments),"slice",Array.prototype.slice.call(arguments).join(","))},map:function(E){return this.pushStack(o.map(this,function(G,F){return E.call(G,F,G)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(J,M,L){if(this[0]){var I=(this[0].ownerDocument||this[0]).createDocumentFragment(),F=o.clean(J,(this[0].ownerDocument||this[0]),I),H=I.firstChild;if(H){for(var G=0,E=this.length;G<E;G++){L.call(K(this[G],H),this.length>1||G>0?I.cloneNode(true):I)}}if(F){o.each(F,z)}}return this;function K(N,O){return M&&o.nodeName(N,"table")&&o.nodeName(O,"tr")?(N.getElementsByTagName("tbody")[0]||N.appendChild(N.ownerDocument.createElement("tbody"))):N}}};o.fn.init.prototype=o.fn;function z(E,F){if(F.src){o.ajax({url:F.src,async:false,dataType:"script"})}else{o.globalEval(F.text||F.textContent||F.innerHTML||"")}if(F.parentNode){F.parentNode.removeChild(F)}}function e(){return +new Date}o.extend=o.fn.extend=function(){var J=arguments[0]||{},H=1,I=arguments.length,E=false,G;if(typeof J==="boolean"){E=J;J=arguments[1]||{};H=2}if(typeof J!=="object"&&!o.isFunction(J)){J={}}if(I==H){J=this;--H}for(;H<I;H++){if((G=arguments[H])!=null){for(var F in G){var K=J[F],L=G[F];if(J===L){continue}if(E&&L&&typeof L==="object"&&!L.nodeType){J[F]=o.extend(E,K||(L.length!=null?[]:{}),L)}else{if(L!==g){J[F]=L}}}}}return J};var b=/z-?index|font-?weight|opacity|zoom|line-?height/i,q=document.defaultView||{},s=Object.prototype.toString;o.extend({noConflict:function(E){l.$=p;if(E){l.jQuery=y}return o},isFunction:function(E){return s.call(E)==="[object Function]"},isArray:function(E){return s.call(E)==="[object Array]"},isXMLDoc:function(E){return E.nodeType===9&&E.documentElement.nodeName!=="HTML"||!!E.ownerDocument&&o.isXMLDoc(E.ownerDocument)},globalEval:function(G){if(G&&/\S/.test(G)){var F=document.getElementsByTagName("head")[0]||document.documentElement,E=document.createElement("script");E.type="text/javascript";if(o.support.scriptEval){E.appendChild(document.createTextNode(G))}else{E.text=G}F.insertBefore(E,F.firstChild);F.removeChild(E)}},nodeName:function(F,E){return F.nodeName&&F.nodeName.toUpperCase()==E.toUpperCase()},each:function(G,K,F){var E,H=0,I=G.length;if(F){if(I===g){for(E in G){if(K.apply(G[E],F)===false){break}}}else{for(;H<I;){if(K.apply(G[H++],F)===false){break}}}}else{if(I===g){for(E in G){if(K.call(G[E],E,G[E])===false){break}}}else{for(var J=G[0];H<I&&K.call(J,H,J)!==false;J=G[++H]){}}}return G},prop:function(H,I,G,F,E){if(o.isFunction(I)){I=I.call(H,F)}return typeof I==="number"&&G=="curCSS"&&!b.test(E)?I+"px":I},className:{add:function(E,F){o.each((F||"").split(/\s+/),function(G,H){if(E.nodeType==1&&!o.className.has(E.className,H)){E.className+=(E.className?" ":"")+H}})},remove:function(E,F){if(E.nodeType==1){E.className=F!==g?o.grep(E.className.split(/\s+/),function(G){return !o.className.has(F,G)}).join(" "):""}},has:function(F,E){return F&&o.inArray(E,(F.className||F).toString().split(/\s+/))>-1}},swap:function(H,G,I){var E={};for(var F in G){E[F]=H.style[F];H.style[F]=G[F]}I.call(H);for(var F in G){H.style[F]=E[F]}},css:function(H,F,J,E){if(F=="width"||F=="height"){var L,G={position:"absolute",visibility:"hidden",display:"block"},K=F=="width"?["Left","Right"]:["Top","Bottom"];function I(){L=F=="width"?H.offsetWidth:H.offsetHeight;if(E==="border"){return}o.each(K,function(){if(!E){L-=parseFloat(o.curCSS(H,"padding"+this,true))||0}if(E==="margin"){L+=parseFloat(o.curCSS(H,"margin"+this,true))||0}else{L-=parseFloat(o.curCSS(H,"border"+this+"Width",true))||0}})}if(H.offsetWidth!==0){I()}else{o.swap(H,G,I)}return Math.max(0,Math.round(L))}return o.curCSS(H,F,J)},curCSS:function(I,F,G){var L,E=I.style;if(F=="opacity"&&!o.support.opacity){L=o.attr(E,"opacity");return L==""?"1":L}if(F.match(/float/i)){F=w}if(!G&&E&&E[F]){L=E[F]}else{if(q.getComputedStyle){if(F.match(/float/i)){F="float"}F=F.replace(/([A-Z])/g,"-$1").toLowerCase();var M=q.getComputedStyle(I,null);if(M){L=M.getPropertyValue(F)}if(F=="opacity"&&L==""){L="1"}}else{if(I.currentStyle){var J=F.replace(/\-(\w)/g,function(N,O){return O.toUpperCase()});L=I.currentStyle[F]||I.currentStyle[J];if(!/^\d+(px)?$/i.test(L)&&/^\d/.test(L)){var H=E.left,K=I.runtimeStyle.left;I.runtimeStyle.left=I.currentStyle.left;E.left=L||0;L=E.pixelLeft+"px";E.left=H;I.runtimeStyle.left=K}}}}return L},clean:function(F,K,I){K=K||document;if(typeof K.createElement==="undefined"){K=K.ownerDocument||K[0]&&K[0].ownerDocument||document}if(!I&&F.length===1&&typeof F[0]==="string"){var H=/^<(\w+)\s*\/?>$/.exec(F[0]);if(H){return[K.createElement(H[1])]}}var G=[],E=[],L=K.createElement("div");o.each(F,function(P,S){if(typeof S==="number"){S+=""}if(!S){return}if(typeof S==="string"){S=S.replace(/(<(\w+)[^>]*?)\/>/g,function(U,V,T){return T.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?U:V+"></"+T+">"});var O=S.replace(/^\s+/,"").substring(0,10).toLowerCase();var Q=!O.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!O.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||O.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!O.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!O.indexOf("<td")||!O.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!O.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||!o.support.htmlSerialize&&[1,"div<div>","</div>"]||[0,"",""];L.innerHTML=Q[1]+S+Q[2];while(Q[0]--){L=L.lastChild}if(!o.support.tbody){var R=/<tbody/i.test(S),N=!O.indexOf("<table")&&!R?L.firstChild&&L.firstChild.childNodes:Q[1]=="<table>"&&!R?L.childNodes:[];for(var M=N.length-1;M>=0;--M){if(o.nodeName(N[M],"tbody")&&!N[M].childNodes.length){N[M].parentNode.removeChild(N[M])}}}if(!o.support.leadingWhitespace&&/^\s/.test(S)){L.insertBefore(K.createTextNode(S.match(/^\s*/)[0]),L.firstChild)}S=o.makeArray(L.childNodes)}if(S.nodeType){G.push(S)}else{G=o.merge(G,S)}});if(I){for(var J=0;G[J];J++){if(o.nodeName(G[J],"script")&&(!G[J].type||G[J].type.toLowerCase()==="text/javascript")){E.push(G[J].parentNode?G[J].parentNode.removeChild(G[J]):G[J])}else{if(G[J].nodeType===1){G.splice.apply(G,[J+1,0].concat(o.makeArray(G[J].getElementsByTagName("script"))))}I.appendChild(G[J])}}return E}return G},attr:function(J,G,K){if(!J||J.nodeType==3||J.nodeType==8){return g}var H=!o.isXMLDoc(J),L=K!==g;G=H&&o.props[G]||G;if(J.tagName){var F=/href|src|style/.test(G);if(G=="selected"&&J.parentNode){J.parentNode.selectedIndex}if(G in J&&H&&!F){if(L){if(G=="type"&&o.nodeName(J,"input")&&J.parentNode){throw"type property can't be changed"}J[G]=K}if(o.nodeName(J,"form")&&J.getAttributeNode(G)){return J.getAttributeNode(G).nodeValue}if(G=="tabIndex"){var I=J.getAttributeNode("tabIndex");return I&&I.specified?I.value:J.nodeName.match(/(button|input|object|select|textarea)/i)?0:J.nodeName.match(/^(a|area)$/i)&&J.href?0:g}return J[G]}if(!o.support.style&&H&&G=="style"){return o.attr(J.style,"cssText",K)}if(L){J.setAttribute(G,""+K)}var E=!o.support.hrefNormalized&&H&&F?J.getAttribute(G,2):J.getAttribute(G);return E===null?g:E}if(!o.support.opacity&&G=="opacity"){if(L){J.zoom=1;J.filter=(J.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(K)+""=="NaN"?"":"alpha(opacity="+K*100+")")}return J.filter&&J.filter.indexOf("opacity=")>=0?(parseFloat(J.filter.match(/opacity=([^)]*)/)[1])/100)+"":""}G=G.replace(/-([a-z])/ig,function(M,N){return N.toUpperCase()});if(L){J[G]=K}return J[G]},trim:function(E){return(E||"").replace(/^\s+|\s+$/g,"")},makeArray:function(G){var E=[];if(G!=null){var F=G.length;if(F==null||typeof G==="string"||o.isFunction(G)||G.setInterval){E[0]=G}else{while(F){E[--F]=G[F]}}}return E},inArray:function(G,H){for(var E=0,F=H.length;E<F;E++){if(H[E]===G){return E}}return -1},merge:function(H,E){var F=0,G,I=H.length;if(!o.support.getAll){while((G=E[F++])!=null){if(G.nodeType!=8){H[I++]=G}}}else{while((G=E[F++])!=null){H[I++]=G}}return H},unique:function(K){var F=[],E={};try{for(var G=0,H=K.length;G<H;G++){var J=o.data(K[G]);if(!E[J]){E[J]=true;F.push(K[G])}}}catch(I){F=K}return F},grep:function(F,J,E){var G=[];for(var H=0,I=F.length;H<I;H++){if(!E!=!J(F[H],H)){G.push(F[H])}}return G},map:function(E,J){var F=[];for(var G=0,H=E.length;G<H;G++){var I=J(E[G],G);if(I!=null){F[F.length]=I}}return F.concat.apply([],F)}});var C=navigator.userAgent.toLowerCase();o.browser={version:(C.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(C),opera:/opera/.test(C),msie:/msie/.test(C)&&!/opera/.test(C),mozilla:/mozilla/.test(C)&&!/(compatible|webkit)/.test(C)};o.each({parent:function(E){return E.parentNode},parents:function(E){return o.dir(E,"parentNode")},next:function(E){return o.nth(E,2,"nextSibling")},prev:function(E){return o.nth(E,2,"previousSibling")},nextAll:function(E){return o.dir(E,"nextSibling")},prevAll:function(E){return o.dir(E,"previousSibling")},siblings:function(E){return o.sibling(E.parentNode.firstChild,E)},children:function(E){return o.sibling(E.firstChild)},contents:function(E){return o.nodeName(E,"iframe")?E.contentDocument||E.contentWindow.document:o.makeArray(E.childNodes)}},function(E,F){o.fn[E]=function(G){var H=o.map(this,F);if(G&&typeof G=="string"){H=o.multiFilter(G,H)}return this.pushStack(o.unique(H),E,G)}});o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(E,F){o.fn[E]=function(G){var J=[],L=o(G);for(var K=0,H=L.length;K<H;K++){var I=(K>0?this.clone(true):this).get();o.fn[F].apply(o(L[K]),I);J=J.concat(I)}return this.pushStack(J,E,G)}});o.each({removeAttr:function(E){o.attr(this,E,"");if(this.nodeType==1){this.removeAttribute(E)}},addClass:function(E){o.className.add(this,E)},removeClass:function(E){o.className.remove(this,E)},toggleClass:function(F,E){if(typeof E!=="boolean"){E=!o.className.has(this,F)}o.className[E?"add":"remove"](this,F)},remove:function(E){if(!E||o.filter(E,[this]).length){o("*",this).add([this]).each(function(){o.event.remove(this);o.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){o(this).children().remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(E,F){o.fn[E]=function(){return this.each(F,arguments)}});function j(E,F){return E[0]&&parseInt(o.curCSS(E[0],F,true),10)||0}var h="jQuery"+e(),v=0,A={};o.extend({cache:{},data:function(F,E,G){F=F==l?A:F;var H=F[h];if(!H){H=F[h]=++v}if(E&&!o.cache[H]){o.cache[H]={}}if(G!==g){o.cache[H][E]=G}return E?o.cache[H][E]:H},removeData:function(F,E){F=F==l?A:F;var H=F[h];if(E){if(o.cache[H]){delete o.cache[H][E];E="";for(E in o.cache[H]){break}if(!E){o.removeData(F)}}}else{try{delete F[h]}catch(G){if(F.removeAttribute){F.removeAttribute(h)}}delete o.cache[H]}},queue:function(F,E,H){if(F){E=(E||"fx")+"queue";var G=o.data(F,E);if(!G||o.isArray(H)){G=o.data(F,E,o.makeArray(H))}else{if(H){G.push(H)}}}return G},dequeue:function(H,G){var E=o.queue(H,G),F=E.shift();if(!G||G==="fx"){F=E[0]}if(F!==g){F.call(H)}}});o.fn.extend({data:function(E,G){var H=E.split(".");H[1]=H[1]?"."+H[1]:"";if(G===g){var F=this.triggerHandler("getData"+H[1]+"!",[H[0]]);if(F===g&&this.length){F=o.data(this[0],E)}return F===g&&H[1]?this.data(H[0]):F}else{return this.trigger("setData"+H[1]+"!",[H[0],G]).each(function(){o.data(this,E,G)})}},removeData:function(E){return this.each(function(){o.removeData(this,E)})},queue:function(E,F){if(typeof E!=="string"){F=E;E="fx"}if(F===g){return o.queue(this[0],E)}return this.each(function(){var G=o.queue(this,E,F);if(E=="fx"&&G.length==1){G[0].call(this)}})},dequeue:function(E){return this.each(function(){o.dequeue(this,E)})}});
/*
 * Sizzle CSS Selector Engine - v0.9.3
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var R=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,L=0,H=Object.prototype.toString;var F=function(Y,U,ab,ac){ab=ab||[];U=U||document;if(U.nodeType!==1&&U.nodeType!==9){return[]}if(!Y||typeof Y!=="string"){return ab}var Z=[],W,af,ai,T,ad,V,X=true;R.lastIndex=0;while((W=R.exec(Y))!==null){Z.push(W[1]);if(W[2]){V=RegExp.rightContext;break}}if(Z.length>1&&M.exec(Y)){if(Z.length===2&&I.relative[Z[0]]){af=J(Z[0]+Z[1],U)}else{af=I.relative[Z[0]]?[U]:F(Z.shift(),U);while(Z.length){Y=Z.shift();if(I.relative[Y]){Y+=Z.shift()}af=J(Y,af)}}}else{var ae=ac?{expr:Z.pop(),set:E(ac)}:F.find(Z.pop(),Z.length===1&&U.parentNode?U.parentNode:U,Q(U));af=F.filter(ae.expr,ae.set);if(Z.length>0){ai=E(af)}else{X=false}while(Z.length){var ah=Z.pop(),ag=ah;if(!I.relative[ah]){ah=""}else{ag=Z.pop()}if(ag==null){ag=U}I.relative[ah](ai,ag,Q(U))}}if(!ai){ai=af}if(!ai){throw"Syntax error, unrecognized expression: "+(ah||Y)}if(H.call(ai)==="[object Array]"){if(!X){ab.push.apply(ab,ai)}else{if(U.nodeType===1){for(var aa=0;ai[aa]!=null;aa++){if(ai[aa]&&(ai[aa]===true||ai[aa].nodeType===1&&K(U,ai[aa]))){ab.push(af[aa])}}}else{for(var aa=0;ai[aa]!=null;aa++){if(ai[aa]&&ai[aa].nodeType===1){ab.push(af[aa])}}}}}else{E(ai,ab)}if(V){F(V,U,ab,ac);if(G){hasDuplicate=false;ab.sort(G);if(hasDuplicate){for(var aa=1;aa<ab.length;aa++){if(ab[aa]===ab[aa-1]){ab.splice(aa--,1)}}}}}return ab};F.matches=function(T,U){return F(T,null,null,U)};F.find=function(aa,T,ab){var Z,X;if(!aa){return[]}for(var W=0,V=I.order.length;W<V;W++){var Y=I.order[W],X;if((X=I.match[Y].exec(aa))){var U=RegExp.leftContext;if(U.substr(U.length-1)!=="\\"){X[1]=(X[1]||"").replace(/\\/g,"");Z=I.find[Y](X,T,ab);if(Z!=null){aa=aa.replace(I.match[Y],"");break}}}}if(!Z){Z=T.getElementsByTagName("*")}return{set:Z,expr:aa}};F.filter=function(ad,ac,ag,W){var V=ad,ai=[],aa=ac,Y,T,Z=ac&&ac[0]&&Q(ac[0]);while(ad&&ac.length){for(var ab in I.filter){if((Y=I.match[ab].exec(ad))!=null){var U=I.filter[ab],ah,af;T=false;if(aa==ai){ai=[]}if(I.preFilter[ab]){Y=I.preFilter[ab](Y,aa,ag,ai,W,Z);if(!Y){T=ah=true}else{if(Y===true){continue}}}if(Y){for(var X=0;(af=aa[X])!=null;X++){if(af){ah=U(af,Y,X,aa);var ae=W^!!ah;if(ag&&ah!=null){if(ae){T=true}else{aa[X]=false}}else{if(ae){ai.push(af);T=true}}}}}if(ah!==g){if(!ag){aa=ai}ad=ad.replace(I.match[ab],"");if(!T){return[]}break}}}if(ad==V){if(T==null){throw"Syntax error, unrecognized expression: "+ad}else{break}}V=ad}return aa};var I=F.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(T){return T.getAttribute("href")}},relative:{"+":function(aa,T,Z){var X=typeof T==="string",ab=X&&!/\W/.test(T),Y=X&&!ab;if(ab&&!Z){T=T.toUpperCase()}for(var W=0,V=aa.length,U;W<V;W++){if((U=aa[W])){while((U=U.previousSibling)&&U.nodeType!==1){}aa[W]=Y||U&&U.nodeName===T?U||false:U===T}}if(Y){F.filter(T,aa,true)}},">":function(Z,U,aa){var X=typeof U==="string";if(X&&!/\W/.test(U)){U=aa?U:U.toUpperCase();for(var V=0,T=Z.length;V<T;V++){var Y=Z[V];if(Y){var W=Y.parentNode;Z[V]=W.nodeName===U?W:false}}}else{for(var V=0,T=Z.length;V<T;V++){var Y=Z[V];if(Y){Z[V]=X?Y.parentNode:Y.parentNode===U}}if(X){F.filter(U,Z,true)}}},"":function(W,U,Y){var V=L++,T=S;if(!U.match(/\W/)){var X=U=Y?U:U.toUpperCase();T=P}T("parentNode",U,V,W,X,Y)},"~":function(W,U,Y){var V=L++,T=S;if(typeof U==="string"&&!U.match(/\W/)){var X=U=Y?U:U.toUpperCase();T=P}T("previousSibling",U,V,W,X,Y)}},find:{ID:function(U,V,W){if(typeof V.getElementById!=="undefined"&&!W){var T=V.getElementById(U[1]);return T?[T]:[]}},NAME:function(V,Y,Z){if(typeof Y.getElementsByName!=="undefined"){var U=[],X=Y.getElementsByName(V[1]);for(var W=0,T=X.length;W<T;W++){if(X[W].getAttribute("name")===V[1]){U.push(X[W])}}return U.length===0?null:U}},TAG:function(T,U){return U.getElementsByTagName(T[1])}},preFilter:{CLASS:function(W,U,V,T,Z,aa){W=" "+W[1].replace(/\\/g,"")+" ";if(aa){return W}for(var X=0,Y;(Y=U[X])!=null;X++){if(Y){if(Z^(Y.className&&(" "+Y.className+" ").indexOf(W)>=0)){if(!V){T.push(Y)}}else{if(V){U[X]=false}}}}return false},ID:function(T){return T[1].replace(/\\/g,"")},TAG:function(U,T){for(var V=0;T[V]===false;V++){}return T[V]&&Q(T[V])?U[1]:U[1].toUpperCase()},CHILD:function(T){if(T[1]=="nth"){var U=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(T[2]=="even"&&"2n"||T[2]=="odd"&&"2n+1"||!/\D/.test(T[2])&&"0n+"+T[2]||T[2]);T[2]=(U[1]+(U[2]||1))-0;T[3]=U[3]-0}T[0]=L++;return T},ATTR:function(X,U,V,T,Y,Z){var W=X[1].replace(/\\/g,"");if(!Z&&I.attrMap[W]){X[1]=I.attrMap[W]}if(X[2]==="~="){X[4]=" "+X[4]+" "}return X},PSEUDO:function(X,U,V,T,Y){if(X[1]==="not"){if(X[3].match(R).length>1||/^\w/.test(X[3])){X[3]=F(X[3],null,null,U)}else{var W=F.filter(X[3],U,V,true^Y);if(!V){T.push.apply(T,W)}return false}}else{if(I.match.POS.test(X[0])||I.match.CHILD.test(X[0])){return true}}return X},POS:function(T){T.unshift(true);return T}},filters:{enabled:function(T){return T.disabled===false&&T.type!=="hidden"},disabled:function(T){return T.disabled===true},checked:function(T){return T.checked===true},selected:function(T){T.parentNode.selectedIndex;return T.selected===true},parent:function(T){return !!T.firstChild},empty:function(T){return !T.firstChild},has:function(V,U,T){return !!F(T[3],V).length},header:function(T){return/h\d/i.test(T.nodeName)},text:function(T){return"text"===T.type},radio:function(T){return"radio"===T.type},checkbox:function(T){return"checkbox"===T.type},file:function(T){return"file"===T.type},password:function(T){return"password"===T.type},submit:function(T){return"submit"===T.type},image:function(T){return"image"===T.type},reset:function(T){return"reset"===T.type},button:function(T){return"button"===T.type||T.nodeName.toUpperCase()==="BUTTON"},input:function(T){return/input|select|textarea|button/i.test(T.nodeName)}},setFilters:{first:function(U,T){return T===0},last:function(V,U,T,W){return U===W.length-1},even:function(U,T){return T%2===0},odd:function(U,T){return T%2===1},lt:function(V,U,T){return U<T[3]-0},gt:function(V,U,T){return U>T[3]-0},nth:function(V,U,T){return T[3]-0==U},eq:function(V,U,T){return T[3]-0==U}},filter:{PSEUDO:function(Z,V,W,aa){var U=V[1],X=I.filters[U];if(X){return X(Z,W,V,aa)}else{if(U==="contains"){return(Z.textContent||Z.innerText||"").indexOf(V[3])>=0}else{if(U==="not"){var Y=V[3];for(var W=0,T=Y.length;W<T;W++){if(Y[W]===Z){return false}}return true}}}},CHILD:function(T,W){var Z=W[1],U=T;switch(Z){case"only":case"first":while(U=U.previousSibling){if(U.nodeType===1){return false}}if(Z=="first"){return true}U=T;case"last":while(U=U.nextSibling){if(U.nodeType===1){return false}}return true;case"nth":var V=W[2],ac=W[3];if(V==1&&ac==0){return true}var Y=W[0],ab=T.parentNode;if(ab&&(ab.sizcache!==Y||!T.nodeIndex)){var X=0;for(U=ab.firstChild;U;U=U.nextSibling){if(U.nodeType===1){U.nodeIndex=++X}}ab.sizcache=Y}var aa=T.nodeIndex-ac;if(V==0){return aa==0}else{return(aa%V==0&&aa/V>=0)}}},ID:function(U,T){return U.nodeType===1&&U.getAttribute("id")===T},TAG:function(U,T){return(T==="*"&&U.nodeType===1)||U.nodeName===T},CLASS:function(U,T){return(" "+(U.className||U.getAttribute("class"))+" ").indexOf(T)>-1},ATTR:function(Y,W){var V=W[1],T=I.attrHandle[V]?I.attrHandle[V](Y):Y[V]!=null?Y[V]:Y.getAttribute(V),Z=T+"",X=W[2],U=W[4];return T==null?X==="!=":X==="="?Z===U:X==="*="?Z.indexOf(U)>=0:X==="~="?(" "+Z+" ").indexOf(U)>=0:!U?Z&&T!==false:X==="!="?Z!=U:X==="^="?Z.indexOf(U)===0:X==="$="?Z.substr(Z.length-U.length)===U:X==="|="?Z===U||Z.substr(0,U.length+1)===U+"-":false},POS:function(X,U,V,Y){var T=U[2],W=I.setFilters[T];if(W){return W(X,V,U,Y)}}}};var M=I.match.POS;for(var O in I.match){I.match[O]=RegExp(I.match[O].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var E=function(U,T){U=Array.prototype.slice.call(U);if(T){T.push.apply(T,U);return T}return U};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(N){E=function(X,W){var U=W||[];if(H.call(X)==="[object Array]"){Array.prototype.push.apply(U,X)}else{if(typeof X.length==="number"){for(var V=0,T=X.length;V<T;V++){U.push(X[V])}}else{for(var V=0;X[V];V++){U.push(X[V])}}}return U}}var G;if(document.documentElement.compareDocumentPosition){G=function(U,T){var V=U.compareDocumentPosition(T)&4?-1:U===T?0:1;if(V===0){hasDuplicate=true}return V}}else{if("sourceIndex" in document.documentElement){G=function(U,T){var V=U.sourceIndex-T.sourceIndex;if(V===0){hasDuplicate=true}return V}}else{if(document.createRange){G=function(W,U){var V=W.ownerDocument.createRange(),T=U.ownerDocument.createRange();V.selectNode(W);V.collapse(true);T.selectNode(U);T.collapse(true);var X=V.compareBoundaryPoints(Range.START_TO_END,T);if(X===0){hasDuplicate=true}return X}}}}(function(){var U=document.createElement("form"),V="script"+(new Date).getTime();U.innerHTML="<input name='"+V+"'/>";var T=document.documentElement;T.insertBefore(U,T.firstChild);if(!!document.getElementById(V)){I.find.ID=function(X,Y,Z){if(typeof Y.getElementById!=="undefined"&&!Z){var W=Y.getElementById(X[1]);return W?W.id===X[1]||typeof W.getAttributeNode!=="undefined"&&W.getAttributeNode("id").nodeValue===X[1]?[W]:g:[]}};I.filter.ID=function(Y,W){var X=typeof Y.getAttributeNode!=="undefined"&&Y.getAttributeNode("id");return Y.nodeType===1&&X&&X.nodeValue===W}}T.removeChild(U)})();(function(){var T=document.createElement("div");T.appendChild(document.createComment(""));if(T.getElementsByTagName("*").length>0){I.find.TAG=function(U,Y){var X=Y.getElementsByTagName(U[1]);if(U[1]==="*"){var W=[];for(var V=0;X[V];V++){if(X[V].nodeType===1){W.push(X[V])}}X=W}return X}}T.innerHTML="<a href='#'></a>";if(T.firstChild&&typeof T.firstChild.getAttribute!=="undefined"&&T.firstChild.getAttribute("href")!=="#"){I.attrHandle.href=function(U){return U.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var T=F,U=document.createElement("div");U.innerHTML="<p class='TEST'></p>";if(U.querySelectorAll&&U.querySelectorAll(".TEST").length===0){return}F=function(Y,X,V,W){X=X||document;if(!W&&X.nodeType===9&&!Q(X)){try{return E(X.querySelectorAll(Y),V)}catch(Z){}}return T(Y,X,V,W)};F.find=T.find;F.filter=T.filter;F.selectors=T.selectors;F.matches=T.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var T=document.createElement("div");T.innerHTML="<div class='test e'></div><div class='test'></div>";if(T.getElementsByClassName("e").length===0){return}T.lastChild.className="e";if(T.getElementsByClassName("e").length===1){return}I.order.splice(1,0,"CLASS");I.find.CLASS=function(U,V,W){if(typeof V.getElementsByClassName!=="undefined"&&!W){return V.getElementsByClassName(U[1])}}})()}function P(U,Z,Y,ad,aa,ac){var ab=U=="previousSibling"&&!ac;for(var W=0,V=ad.length;W<V;W++){var T=ad[W];if(T){if(ab&&T.nodeType===1){T.sizcache=Y;T.sizset=W}T=T[U];var X=false;while(T){if(T.sizcache===Y){X=ad[T.sizset];break}if(T.nodeType===1&&!ac){T.sizcache=Y;T.sizset=W}if(T.nodeName===Z){X=T;break}T=T[U]}ad[W]=X}}}function S(U,Z,Y,ad,aa,ac){var ab=U=="previousSibling"&&!ac;for(var W=0,V=ad.length;W<V;W++){var T=ad[W];if(T){if(ab&&T.nodeType===1){T.sizcache=Y;T.sizset=W}T=T[U];var X=false;while(T){if(T.sizcache===Y){X=ad[T.sizset];break}if(T.nodeType===1){if(!ac){T.sizcache=Y;T.sizset=W}if(typeof Z!=="string"){if(T===Z){X=true;break}}else{if(F.filter(Z,[T]).length>0){X=T;break}}}T=T[U]}ad[W]=X}}}var K=document.compareDocumentPosition?function(U,T){return U.compareDocumentPosition(T)&16}:function(U,T){return U!==T&&(U.contains?U.contains(T):true)};var Q=function(T){return T.nodeType===9&&T.documentElement.nodeName!=="HTML"||!!T.ownerDocument&&Q(T.ownerDocument)};var J=function(T,aa){var W=[],X="",Y,V=aa.nodeType?[aa]:aa;while((Y=I.match.PSEUDO.exec(T))){X+=Y[0];T=T.replace(I.match.PSEUDO,"")}T=I.relative[T]?T+"*":T;for(var Z=0,U=V.length;Z<U;Z++){F(T,V[Z],W)}return F.filter(X,W)};o.find=F;o.filter=F.filter;o.expr=F.selectors;o.expr[":"]=o.expr.filters;F.selectors.filters.hidden=function(T){return T.offsetWidth===0||T.offsetHeight===0};F.selectors.filters.visible=function(T){return T.offsetWidth>0||T.offsetHeight>0};F.selectors.filters.animated=function(T){return o.grep(o.timers,function(U){return T===U.elem}).length};o.multiFilter=function(V,T,U){if(U){V=":not("+V+")"}return F.matches(V,T)};o.dir=function(V,U){var T=[],W=V[U];while(W&&W!=document){if(W.nodeType==1){T.push(W)}W=W[U]}return T};o.nth=function(X,T,V,W){T=T||1;var U=0;for(;X;X=X[V]){if(X.nodeType==1&&++U==T){break}}return X};o.sibling=function(V,U){var T=[];for(;V;V=V.nextSibling){if(V.nodeType==1&&V!=U){T.push(V)}}return T};return;l.Sizzle=F})();o.event={add:function(I,F,H,K){if(I.nodeType==3||I.nodeType==8){return}if(I.setInterval&&I!=l){I=l}if(!H.guid){H.guid=this.guid++}if(K!==g){var G=H;H=this.proxy(G);H.data=K}var E=o.data(I,"events")||o.data(I,"events",{}),J=o.data(I,"handle")||o.data(I,"handle",function(){return typeof o!=="undefined"&&!o.event.triggered?o.event.handle.apply(arguments.callee.elem,arguments):g});J.elem=I;o.each(F.split(/\s+/),function(M,N){var O=N.split(".");N=O.shift();H.type=O.slice().sort().join(".");var L=E[N];if(o.event.specialAll[N]){o.event.specialAll[N].setup.call(I,K,O)}if(!L){L=E[N]={};if(!o.event.special[N]||o.event.special[N].setup.call(I,K,O)===false){if(I.addEventListener){I.addEventListener(N,J,false)}else{if(I.attachEvent){I.attachEvent("on"+N,J)}}}}L[H.guid]=H;o.event.global[N]=true});I=null},guid:1,global:{},remove:function(K,H,J){if(K.nodeType==3||K.nodeType==8){return}var G=o.data(K,"events"),F,E;if(G){if(H===g||(typeof H==="string"&&H.charAt(0)==".")){for(var I in G){this.remove(K,I+(H||""))}}else{if(H.type){J=H.handler;H=H.type}o.each(H.split(/\s+/),function(M,O){var Q=O.split(".");O=Q.shift();var N=RegExp("(^|\\.)"+Q.slice().sort().join(".*\\.")+"(\\.|$)");if(G[O]){if(J){delete G[O][J.guid]}else{for(var P in G[O]){if(N.test(G[O][P].type)){delete G[O][P]}}}if(o.event.specialAll[O]){o.event.specialAll[O].teardown.call(K,Q)}for(F in G[O]){break}if(!F){if(!o.event.special[O]||o.event.special[O].teardown.call(K,Q)===false){if(K.removeEventListener){K.removeEventListener(O,o.data(K,"handle"),false)}else{if(K.detachEvent){K.detachEvent("on"+O,o.data(K,"handle"))}}}F=null;delete G[O]}}})}for(F in G){break}if(!F){var L=o.data(K,"handle");if(L){L.elem=null}o.removeData(K,"events");o.removeData(K,"handle")}}},trigger:function(I,K,H,E){var G=I.type||I;if(!E){I=typeof I==="object"?I[h]?I:o.extend(o.Event(G),I):o.Event(G);if(G.indexOf("!")>=0){I.type=G=G.slice(0,-1);I.exclusive=true}if(!H){I.stopPropagation();if(this.global[G]){o.each(o.cache,function(){if(this.events&&this.events[G]){o.event.trigger(I,K,this.handle.elem)}})}}if(!H||H.nodeType==3||H.nodeType==8){return g}I.result=g;I.target=H;K=o.makeArray(K);K.unshift(I)}I.currentTarget=H;var J=o.data(H,"handle");if(J){J.apply(H,K)}if((!H[G]||(o.nodeName(H,"a")&&G=="click"))&&H["on"+G]&&H["on"+G].apply(H,K)===false){I.result=false}if(!E&&H[G]&&!I.isDefaultPrevented()&&!(o.nodeName(H,"a")&&G=="click")){this.triggered=true;try{H[G]()}catch(L){}}this.triggered=false;if(!I.isPropagationStopped()){var F=H.parentNode||H.ownerDocument;if(F){o.event.trigger(I,K,F,true)}}},handle:function(K){var J,E;K=arguments[0]=o.event.fix(K||l.event);K.currentTarget=this;var L=K.type.split(".");K.type=L.shift();J=!L.length&&!K.exclusive;var I=RegExp("(^|\\.)"+L.slice().sort().join(".*\\.")+"(\\.|$)");E=(o.data(this,"events")||{})[K.type];for(var G in E){var H=E[G];if(J||I.test(H.type)){K.handler=H;K.data=H.data;var F=H.apply(this,arguments);if(F!==g){K.result=F;if(F===false){K.preventDefault();K.stopPropagation()}}if(K.isImmediatePropagationStopped()){break}}}},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(H){if(H[h]){return H}var F=H;H=o.Event(F);for(var G=this.props.length,J;G;){J=this.props[--G];H[J]=F[J]}if(!H.target){H.target=H.srcElement||document}if(H.target.nodeType==3){H.target=H.target.parentNode}if(!H.relatedTarget&&H.fromElement){H.relatedTarget=H.fromElement==H.target?H.toElement:H.fromElement}if(H.pageX==null&&H.clientX!=null){var I=document.documentElement,E=document.body;H.pageX=H.clientX+(I&&I.scrollLeft||E&&E.scrollLeft||0)-(I.clientLeft||0);H.pageY=H.clientY+(I&&I.scrollTop||E&&E.scrollTop||0)-(I.clientTop||0)}if(!H.which&&((H.charCode||H.charCode===0)?H.charCode:H.keyCode)){H.which=H.charCode||H.keyCode}if(!H.metaKey&&H.ctrlKey){H.metaKey=H.ctrlKey}if(!H.which&&H.button){H.which=(H.button&1?1:(H.button&2?3:(H.button&4?2:0)))}return H},proxy:function(F,E){E=E||function(){return F.apply(this,arguments)};E.guid=F.guid=F.guid||E.guid||this.guid++;return E},special:{ready:{setup:B,teardown:function(){}}},specialAll:{live:{setup:function(E,F){o.event.add(this,F[0],c)},teardown:function(G){if(G.length){var E=0,F=RegExp("(^|\\.)"+G[0]+"(\\.|$)");o.each((o.data(this,"events").live||{}),function(){if(F.test(this.type)){E++}});if(E<1){o.event.remove(this,G[0],c)}}}}}};o.Event=function(E){if(!this.preventDefault){return new o.Event(E)}if(E&&E.type){this.originalEvent=E;this.type=E.type}else{this.type=E}this.timeStamp=e();this[h]=true};function k(){return false}function u(){return true}o.Event.prototype={preventDefault:function(){this.isDefaultPrevented=u;var E=this.originalEvent;if(!E){return}if(E.preventDefault){E.preventDefault()}E.returnValue=false},stopPropagation:function(){this.isPropagationStopped=u;var E=this.originalEvent;if(!E){return}if(E.stopPropagation){E.stopPropagation()}E.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};var a=function(F){var E=F.relatedTarget;while(E&&E!=this){try{E=E.parentNode}catch(G){E=this}}if(E!=this){F.type=F.data;o.event.handle.apply(this,arguments)}};o.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(F,E){o.event.special[E]={setup:function(){o.event.add(this,F,a,E)},teardown:function(){o.event.remove(this,F,a)}}});o.fn.extend({bind:function(F,G,E){return F=="unload"?this.one(F,G,E):this.each(function(){o.event.add(this,F,E||G,E&&G)})},one:function(G,H,F){var E=o.event.proxy(F||H,function(I){o(this).unbind(I,E);return(F||H).apply(this,arguments)});return this.each(function(){o.event.add(this,G,E,F&&H)})},unbind:function(F,E){return this.each(function(){o.event.remove(this,F,E)})},trigger:function(E,F){return this.each(function(){o.event.trigger(E,F,this)})},triggerHandler:function(E,G){if(this[0]){var F=o.Event(E);F.preventDefault();F.stopPropagation();o.event.trigger(F,G,this[0]);return F.result}},toggle:function(G){var E=arguments,F=1;while(F<E.length){o.event.proxy(G,E[F++])}return this.click(o.event.proxy(G,function(H){this.lastToggle=(this.lastToggle||0)%F;H.preventDefault();return E[this.lastToggle++].apply(this,arguments)||false}))},hover:function(E,F){return this.mouseenter(E).mouseleave(F)},ready:function(E){B();if(o.isReady){E.call(document,o)}else{o.readyList.push(E)}return this},live:function(G,F){var E=o.event.proxy(F);E.guid+=this.selector+G;o(document).bind(i(G,this.selector),this.selector,E);return this},die:function(F,E){o(document).unbind(i(F,this.selector),E?{guid:E.guid+this.selector+F}:null);return this}});function c(H){var E=RegExp("(^|\\.)"+H.type+"(\\.|$)"),G=true,F=[];o.each(o.data(this,"events").live||[],function(I,J){if(E.test(J.type)){var K=o(H.target).closest(J.data)[0];if(K){F.push({elem:K,fn:J})}}});F.sort(function(J,I){return o.data(J.elem,"closest")-o.data(I.elem,"closest")});o.each(F,function(){if(this.fn.call(this.elem,H,this.fn.data)===false){return(G=false)}});return G}function i(F,E){return["live",F,E.replace(/\./g,"`").replace(/ /g,"|")].join(".")}o.extend({isReady:false,readyList:[],ready:function(){if(!o.isReady){o.isReady=true;if(o.readyList){o.each(o.readyList,function(){this.call(document,o)});o.readyList=null}o(document).triggerHandler("ready")}}});var x=false;function B(){if(x){return}x=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);o.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);o.ready()}});if(document.documentElement.doScroll&&l==l.top){(function(){if(o.isReady){return}try{document.documentElement.doScroll("left")}catch(E){setTimeout(arguments.callee,0);return}o.ready()})()}}}o.event.add(l,"load",o.ready)}o.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error").split(","),function(F,E){o.fn[E]=function(G){return G?this.bind(E,G):this.trigger(E)}});o(l).bind("unload",function(){for(var E in o.cache){if(E!=1&&o.cache[E].handle){o.event.remove(o.cache[E].handle.elem)}}});(function(){o.support={};var F=document.documentElement,G=document.createElement("script"),K=document.createElement("div"),J="script"+(new Date).getTime();K.style.display="none";K.innerHTML='   <link/><table></table><a href="/a" style="color:red;float:left;opacity:.5;">a</a><select><option>text</option></select><object><param/></object>';var H=K.getElementsByTagName("*"),E=K.getElementsByTagName("a")[0];if(!H||!H.length||!E){return}o.support={leadingWhitespace:K.firstChild.nodeType==3,tbody:!K.getElementsByTagName("tbody").length,objectAll:!!K.getElementsByTagName("object")[0].getElementsByTagName("*").length,htmlSerialize:!!K.getElementsByTagName("link").length,style:/red/.test(E.getAttribute("style")),hrefNormalized:E.getAttribute("href")==="/a",opacity:E.style.opacity==="0.5",cssFloat:!!E.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};G.type="text/javascript";try{G.appendChild(document.createTextNode("window."+J+"=1;"))}catch(I){}F.insertBefore(G,F.firstChild);if(l[J]){o.support.scriptEval=true;delete l[J]}F.removeChild(G);if(K.attachEvent&&K.fireEvent){K.attachEvent("onclick",function(){o.support.noCloneEvent=false;K.detachEvent("onclick",arguments.callee)});K.cloneNode(true).fireEvent("onclick")}o(function(){var L=document.createElement("div");L.style.width=L.style.paddingLeft="1px";document.body.appendChild(L);o.boxModel=o.support.boxModel=L.offsetWidth===2;document.body.removeChild(L).style.display="none"})})();var w=o.support.cssFloat?"cssFloat":"styleFloat";o.props={"for":"htmlFor","class":"className","float":w,cssFloat:w,styleFloat:w,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};o.fn.extend({_load:o.fn.load,load:function(G,J,K){if(typeof G!=="string"){return this._load(G)}var I=G.indexOf(" ");if(I>=0){var E=G.slice(I,G.length);G=G.slice(0,I)}var H="GET";if(J){if(o.isFunction(J)){K=J;J=null}else{if(typeof J==="object"){J=o.param(J);H="POST"}}}var F=this;o.ajax({url:G,type:H,dataType:"html",data:J,complete:function(M,L){if(L=="success"||L=="notmodified"){F.html(E?o("<div/>").append(M.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(E):M.responseText)}if(K){F.each(K,[M.responseText,L,M])}}});return this},serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?o.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(E,F){var G=o(this).val();return G==null?null:o.isArray(G)?o.map(G,function(I,H){return{name:F.name,value:I}}):{name:F.name,value:G}}).get()}});o.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(E,F){o.fn[F]=function(G){return this.bind(F,G)}});var r=e();o.extend({get:function(E,G,H,F){if(o.isFunction(G)){H=G;G=null}return o.ajax({type:"GET",url:E,data:G,success:H,dataType:F})},getScript:function(E,F){return o.get(E,null,F,"script")},getJSON:function(E,F,G){return o.get(E,F,G,"json")},post:function(E,G,H,F){if(o.isFunction(G)){H=G;G={}}return o.ajax({type:"POST",url:E,data:G,success:H,dataType:F})},ajaxSetup:function(E){o.extend(o.ajaxSettings,E)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return l.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(M){M=o.extend(true,M,o.extend(true,{},o.ajaxSettings,M));var W,F=/=\?(&|$)/g,R,V,G=M.type.toUpperCase();if(M.data&&M.processData&&typeof M.data!=="string"){M.data=o.param(M.data)}if(M.dataType=="jsonp"){if(G=="GET"){if(!M.url.match(F)){M.url+=(M.url.match(/\?/)?"&":"?")+(M.jsonp||"callback")+"=?"}}else{if(!M.data||!M.data.match(F)){M.data=(M.data?M.data+"&":"")+(M.jsonp||"callback")+"=?"}}M.dataType="json"}if(M.dataType=="json"&&(M.data&&M.data.match(F)||M.url.match(F))){W="jsonp"+r++;if(M.data){M.data=(M.data+"").replace(F,"="+W+"$1")}M.url=M.url.replace(F,"="+W+"$1");M.dataType="script";l[W]=function(X){V=X;I();L();l[W]=g;try{delete l[W]}catch(Y){}if(H){H.removeChild(T)}}}if(M.dataType=="script"&&M.cache==null){M.cache=false}if(M.cache===false&&G=="GET"){var E=e();var U=M.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+E+"$2");M.url=U+((U==M.url)?(M.url.match(/\?/)?"&":"?")+"_="+E:"")}if(M.data&&G=="GET"){M.url+=(M.url.match(/\?/)?"&":"?")+M.data;M.data=null}if(M.global&&!o.active++){o.event.trigger("ajaxStart")}var Q=/^(\w+:)?\/\/([^\/?#]+)/.exec(M.url);if(M.dataType=="script"&&G=="GET"&&Q&&(Q[1]&&Q[1]!=location.protocol||Q[2]!=location.host)){var H=document.getElementsByTagName("head")[0];var T=document.createElement("script");T.src=M.url;if(M.scriptCharset){T.charset=M.scriptCharset}if(!W){var O=false;T.onload=T.onreadystatechange=function(){if(!O&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){O=true;I();L();T.onload=T.onreadystatechange=null;H.removeChild(T)}}}H.appendChild(T);return g}var K=false;var J=M.xhr();if(M.username){J.open(G,M.url,M.async,M.username,M.password)}else{J.open(G,M.url,M.async)}try{if(M.data){J.setRequestHeader("Content-Type",M.contentType)}if(M.ifModified){J.setRequestHeader("If-Modified-Since",o.lastModified[M.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}J.setRequestHeader("X-Requested-With","XMLHttpRequest");J.setRequestHeader("Accept",M.dataType&&M.accepts[M.dataType]?M.accepts[M.dataType]+", */*":M.accepts._default)}catch(S){}if(M.beforeSend&&M.beforeSend(J,M)===false){if(M.global&&!--o.active){o.event.trigger("ajaxStop")}J.abort();return false}if(M.global){o.event.trigger("ajaxSend",[J,M])}var N=function(X){if(J.readyState==0){if(P){clearInterval(P);P=null;if(M.global&&!--o.active){o.event.trigger("ajaxStop")}}}else{if(!K&&J&&(J.readyState==4||X=="timeout")){K=true;if(P){clearInterval(P);P=null}R=X=="timeout"?"timeout":!o.httpSuccess(J)?"error":M.ifModified&&o.httpNotModified(J,M.url)?"notmodified":"success";if(R=="success"){try{V=o.httpData(J,M.dataType,M)}catch(Z){R="parsererror"}}if(R=="success"){var Y;try{Y=J.getResponseHeader("Last-Modified")}catch(Z){}if(M.ifModified&&Y){o.lastModified[M.url]=Y}if(!W){I()}}else{o.handleError(M,J,R)}L();if(X){J.abort()}if(M.async){J=null}}}};if(M.async){var P=setInterval(N,13);if(M.timeout>0){setTimeout(function(){if(J&&!K){N("timeout")}},M.timeout)}}try{J.send(M.data)}catch(S){o.handleError(M,J,null,S)}if(!M.async){N()}function I(){if(M.success){M.success(V,R)}if(M.global){o.event.trigger("ajaxSuccess",[J,M])}}function L(){if(M.complete){M.complete(J,R)}if(M.global){o.event.trigger("ajaxComplete",[J,M])}if(M.global&&!--o.active){o.event.trigger("ajaxStop")}}return J},handleError:function(F,H,E,G){if(F.error){F.error(H,E,G)}if(F.global){o.event.trigger("ajaxError",[H,F,G])}},active:0,httpSuccess:function(F){try{return !F.status&&location.protocol=="file:"||(F.status>=200&&F.status<300)||F.status==304||F.status==1223}catch(E){}return false},httpNotModified:function(G,E){try{var H=G.getResponseHeader("Last-Modified");return G.status==304||H==o.lastModified[E]}catch(F){}return false},httpData:function(J,H,G){var F=J.getResponseHeader("content-type"),E=H=="xml"||!H&&F&&F.indexOf("xml")>=0,I=E?J.responseXML:J.responseText;if(E&&I.documentElement.tagName=="parsererror"){throw"parsererror"}if(G&&G.dataFilter){I=G.dataFilter(I,H)}if(typeof I==="string"){if(H=="script"){o.globalEval(I)}if(H=="json"){I=l["eval"]("("+I+")")}}return I},param:function(E){var G=[];function H(I,J){G[G.length]=encodeURIComponent(I)+"="+encodeURIComponent(J)}if(o.isArray(E)||E.jquery){o.each(E,function(){H(this.name,this.value)})}else{for(var F in E){if(o.isArray(E[F])){o.each(E[F],function(){H(F,this)})}else{H(F,o.isFunction(E[F])?E[F]():E[F])}}}return G.join("&").replace(/%20/g,"+")}});var m={},n,d=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];function t(F,E){var G={};o.each(d.concat.apply([],d.slice(0,E)),function(){G[this]=F});return G}o.fn.extend({show:function(J,L){if(J){return this.animate(t("show",3),J,L)}else{for(var H=0,F=this.length;H<F;H++){var E=o.data(this[H],"olddisplay");this[H].style.display=E||"";if(o.css(this[H],"display")==="none"){var G=this[H].tagName,K;if(m[G]){K=m[G]}else{var I=o("<"+G+" />").appendTo("body");K=I.css("display");if(K==="none"){K="block"}I.remove();m[G]=K}o.data(this[H],"olddisplay",K)}}for(var H=0,F=this.length;H<F;H++){this[H].style.display=o.data(this[H],"olddisplay")||""}return this}},hide:function(H,I){if(H){return this.animate(t("hide",3),H,I)}else{for(var G=0,F=this.length;G<F;G++){var E=o.data(this[G],"olddisplay");if(!E&&E!=="none"){o.data(this[G],"olddisplay",o.css(this[G],"display"))}}for(var G=0,F=this.length;G<F;G++){this[G].style.display="none"}return this}},_toggle:o.fn.toggle,toggle:function(G,F){var E=typeof G==="boolean";return o.isFunction(G)&&o.isFunction(F)?this._toggle.apply(this,arguments):G==null||E?this.each(function(){var H=E?G:o(this).is(":hidden");o(this)[H?"show":"hide"]()}):this.animate(t("toggle",3),G,F)},fadeTo:function(E,G,F){return this.animate({opacity:G},E,F)},animate:function(I,F,H,G){var E=o.speed(F,H,G);return this[E.queue===false?"each":"queue"](function(){var K=o.extend({},E),M,L=this.nodeType==1&&o(this).is(":hidden"),J=this;for(M in I){if(I[M]=="hide"&&L||I[M]=="show"&&!L){return K.complete.call(this)}if((M=="height"||M=="width")&&this.style){K.display=o.css(this,"display");K.overflow=this.style.overflow}}if(K.overflow!=null){this.style.overflow="hidden"}K.curAnim=o.extend({},I);o.each(I,function(O,S){var R=new o.fx(J,K,O);if(/toggle|show|hide/.test(S)){R[S=="toggle"?L?"show":"hide":S](I)}else{var Q=S.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),T=R.cur(true)||0;if(Q){var N=parseFloat(Q[2]),P=Q[3]||"px";if(P!="px"){J.style[O]=(N||1)+P;T=((N||1)/R.cur(true))*T;J.style[O]=T+P}if(Q[1]){N=((Q[1]=="-="?-1:1)*N)+T}R.custom(T,N,P)}else{R.custom(T,S,"")}}});return true})},stop:function(F,E){var G=o.timers;if(F){this.queue([])}this.each(function(){for(var H=G.length-1;H>=0;H--){if(G[H].elem==this){if(E){G[H](true)}G.splice(H,1)}}});if(!E){this.dequeue()}return this}});o.each({slideDown:t("show",1),slideUp:t("hide",1),slideToggle:t("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(E,F){o.fn[E]=function(G,H){return this.animate(F,G,H)}});o.extend({speed:function(G,H,F){var E=typeof G==="object"?G:{complete:F||!F&&H||o.isFunction(G)&&G,duration:G,easing:F&&H||H&&!o.isFunction(H)&&H};E.duration=o.fx.off?0:typeof E.duration==="number"?E.duration:o.fx.speeds[E.duration]||o.fx.speeds._default;E.old=E.complete;E.complete=function(){if(E.queue!==false){o(this).dequeue()}if(o.isFunction(E.old)){E.old.call(this)}};return E},easing:{linear:function(G,H,E,F){return E+F*G},swing:function(G,H,E,F){return((-Math.cos(G*Math.PI)/2)+0.5)*F+E}},timers:[],fx:function(F,E,G){this.options=E;this.elem=F;this.prop=G;if(!E.orig){E.orig={}}}});o.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(o.fx.step[this.prop]||o.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(F){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var E=parseFloat(o.css(this.elem,this.prop,F));return E&&E>-10000?E:parseFloat(o.curCSS(this.elem,this.prop))||0},custom:function(I,H,G){this.startTime=e();this.start=I;this.end=H;this.unit=G||this.unit||"px";this.now=this.start;this.pos=this.state=0;var E=this;function F(J){return E.step(J)}F.elem=this.elem;if(F()&&o.timers.push(F)&&!n){n=setInterval(function(){var K=o.timers;for(var J=0;J<K.length;J++){if(!K[J]()){K.splice(J--,1)}}if(!K.length){clearInterval(n);n=g}},13)}},show:function(){this.options.orig[this.prop]=o.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());o(this.elem).show()},hide:function(){this.options.orig[this.prop]=o.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(H){var G=e();if(H||G>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var E=true;for(var F in this.options.curAnim){if(this.options.curAnim[F]!==true){E=false}}if(E){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(o.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){o(this.elem).hide()}if(this.options.hide||this.options.show){for(var I in this.options.curAnim){o.attr(this.elem.style,I,this.options.orig[I])}}this.options.complete.call(this.elem)}return false}else{var J=G-this.startTime;this.state=J/this.options.duration;this.pos=o.easing[this.options.easing||(o.easing.swing?"swing":"linear")](this.state,J,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};o.extend(o.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(E){o.attr(E.elem.style,"opacity",E.now)},_default:function(E){if(E.elem.style&&E.elem.style[E.prop]!=null){E.elem.style[E.prop]=E.now+E.unit}else{E.elem[E.prop]=E.now}}}});if(document.documentElement.getBoundingClientRect){o.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return o.offset.bodyOffset(this[0])}var G=this[0].getBoundingClientRect(),J=this[0].ownerDocument,F=J.body,E=J.documentElement,L=E.clientTop||F.clientTop||0,K=E.clientLeft||F.clientLeft||0,I=G.top+(self.pageYOffset||o.boxModel&&E.scrollTop||F.scrollTop)-L,H=G.left+(self.pageXOffset||o.boxModel&&E.scrollLeft||F.scrollLeft)-K;return{top:I,left:H}}}else{o.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return o.offset.bodyOffset(this[0])}o.offset.initialized||o.offset.initialize();var J=this[0],G=J.offsetParent,F=J,O=J.ownerDocument,M,H=O.documentElement,K=O.body,L=O.defaultView,E=L.getComputedStyle(J,null),N=J.offsetTop,I=J.offsetLeft;while((J=J.parentNode)&&J!==K&&J!==H){M=L.getComputedStyle(J,null);N-=J.scrollTop,I-=J.scrollLeft;if(J===G){N+=J.offsetTop,I+=J.offsetLeft;if(o.offset.doesNotAddBorder&&!(o.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(J.tagName))){N+=parseInt(M.borderTopWidth,10)||0,I+=parseInt(M.borderLeftWidth,10)||0}F=G,G=J.offsetParent}if(o.offset.subtractsBorderForOverflowNotVisible&&M.overflow!=="visible"){N+=parseInt(M.borderTopWidth,10)||0,I+=parseInt(M.borderLeftWidth,10)||0}E=M}if(E.position==="relative"||E.position==="static"){N+=K.offsetTop,I+=K.offsetLeft}if(E.position==="fixed"){N+=Math.max(H.scrollTop,K.scrollTop),I+=Math.max(H.scrollLeft,K.scrollLeft)}return{top:N,left:I}}}o.offset={initialize:function(){if(this.initialized){return}var L=document.body,F=document.createElement("div"),H,G,N,I,M,E,J=L.style.marginTop,K='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';M={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(E in M){F.style[E]=M[E]}F.innerHTML=K;L.insertBefore(F,L.firstChild);H=F.firstChild,G=H.firstChild,I=H.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(G.offsetTop!==5);this.doesAddBorderForTableAndCells=(I.offsetTop===5);H.style.overflow="hidden",H.style.position="relative";this.subtractsBorderForOverflowNotVisible=(G.offsetTop===-5);L.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=(L.offsetTop===0);L.style.marginTop=J;L.removeChild(F);this.initialized=true},bodyOffset:function(E){o.offset.initialized||o.offset.initialize();var G=E.offsetTop,F=E.offsetLeft;if(o.offset.doesNotIncludeMarginInBodyOffset){G+=parseInt(o.curCSS(E,"marginTop",true),10)||0,F+=parseInt(o.curCSS(E,"marginLeft",true),10)||0}return{top:G,left:F}}};o.fn.extend({position:function(){var I=0,H=0,F;if(this[0]){var G=this.offsetParent(),J=this.offset(),E=/^body|html$/i.test(G[0].tagName)?{top:0,left:0}:G.offset();J.top-=j(this,"marginTop");J.left-=j(this,"marginLeft");E.top+=j(G,"borderTopWidth");E.left+=j(G,"borderLeftWidth");F={top:J.top-E.top,left:J.left-E.left}}return F},offsetParent:function(){var E=this[0].offsetParent||document.body;while(E&&(!/^body|html$/i.test(E.tagName)&&o.css(E,"position")=="static")){E=E.offsetParent}return o(E)}});o.each(["Left","Top"],function(F,E){var G="scroll"+E;o.fn[G]=function(H){if(!this[0]){return null}return H!==g?this.each(function(){this==l||this==document?l.scrollTo(!F?H:o(l).scrollLeft(),F?H:o(l).scrollTop()):this[G]=H}):this[0]==l||this[0]==document?self[F?"pageYOffset":"pageXOffset"]||o.boxModel&&document.documentElement[G]||document.body[G]:this[0][G]}});o.each(["Height","Width"],function(I,G){var E=I?"Left":"Top",H=I?"Right":"Bottom",F=G.toLowerCase();o.fn["inner"+G]=function(){return this[0]?o.css(this[0],F,false,"padding"):null};o.fn["outer"+G]=function(K){return this[0]?o.css(this[0],F,false,K?"margin":"border"):null};var J=G.toLowerCase();o.fn[J]=function(K){return this[0]==l?document.compatMode=="CSS1Compat"&&document.documentElement["client"+G]||document.body["client"+G]:this[0]==document?Math.max(document.documentElement["client"+G],document.body["scroll"+G],document.documentElement["scroll"+G],document.body["offset"+G],document.documentElement["offset"+G]):K===g?(this.length?o.css(this[0],J):null):this.css(J,typeof K==="string"?K:K+"px")}})})();

/* _script/jquery.hoverIntent.min */

/**
* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne <brian@cherne.net>
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);

/* _script/vars0 */

var path_from_root_to_document;
if (document.getElementsByName) {
	theArray = document.getElementsByName('jmQovc');
	path_from_root_to_document = theArray[0].content;
}
else if (document.all)
	path_from_root_to_document = document.all.jmQovc.content;
else
	path_from_root_to_document = window.location.href.replace(/^.*:\/\/\/?[^\/]*\/(.*)[.][^.]*$/, "$1");

var relative_depth=0;
for (i=0; i<path_from_root_to_document.length; ++i)
	if (path_from_root_to_document.charAt(i)=='/') relative_depth++;

var path_from_document_to_root = '';
for (i=0; i<relative_depth; ++i)
	path_from_document_to_root += '../';
/*
/_script/combine_js.php?files=_script/jquery-1.3.1.min+_script/jquery.hoverIntent.min+_script/vars0+_script/cookies+_script/rtelang/en+_script/rte+_script/elements+_script/form_validation+_script/fields+_script/arguments+_script/sites+_script/dates/dates+_script/templates+_script/magrim+http://www.google.com/friendconnect/script/friendconnect.js+_script/search+_script/etc+_script/jquery.taconite&out=_script/vars&minify=1
*/


/* _script/cookies */


/* arguments:
   name - name of the cookie
   value - value of the cookie
   [expirationDays] - expiration date of the cookie, in days from today
     (defaults to end of current session)
   [path] - path for which the cookie is valid
     (defaults to path of calling document)
   [domain] - domain for which the cookie is valid
     (defaults to domain of calling document)
   [secure] - Boolean value indicating if the cookie transmission requires
     a secure transmission
   * an argument defaults when it is assigned null as a placeholder
   * a null placeholder is not required for trailing omitted arguments
*/

function setCookie(name, value, expirationDays, path, domain, secure) {
  var expires = null;
  if (expirationDays) {
     // create an instance of the Date object
     expires = new Date();
     // fix the bug in Navigator 2.0, Macintosh
     fixDate(expires);
     expires.setTime(expires.getTime() + expirationDays * 24 * 60 * 60 * 1000);
  }
  var curCookie = name + "=" + escape(value) +
      ((expires) ? "; expires=" + expires.toGMTString() : "") +
      ((path) ? "; path=" + path : "") +
      ((domain) ? "; domain=" + domain : "") +
      ((secure) ? "; secure" : "");
  document.cookie = curCookie;
}


/*
  name - name of the desired cookie
  return string containing value of specified cookie or ""
  if cookie does not exist
*/

function getCookie(name) {
  var dc = document.cookie;
  var prefix = name + "=";
  var begin = dc.indexOf("; " + prefix);
  if (begin == -1) {
    begin = dc.indexOf(prefix);
    if (begin != 0) return "";       // instead of null
  } else
    begin += 2;
  var end = document.cookie.indexOf(";", begin);
  if (end == -1)
    end = dc.length;
  return unescape(dc.substring(begin + prefix.length, end));
}


/*
   name - name of the cookie
   [path] - path of the cookie (must be same as path used to create cookie)
   [domain] - domain of the cookie (must be same as domain used to
     create cookie)
   path and domain default if assigned null or omitted if no explicit
     argument proceeds
*/

function deleteCookie(name, path, domain) {
  if (getCookie(name)) {
    document.cookie = name + "=" +
    ((path) ? "; path=" + path : "") +
    ((domain) ? "; domain=" + domain : "") +
    "; expires=Thu, 01-Jan-70 00:00:01 GMT";
  }
}


function fixDate(date) {
  var base = new Date(0);
  var skew = base.getTime();
  if (skew > 0)
    date.setTime(date.getTime() - skew);
}




/* _script/rtelang/en */


var lblSubmit 				 = "Submit"; // Button value for non-designMode() & non fullsceen RTE
var lblModeRichText 	 = "Switch to RichText Mode"; // Label of the Show Design view link
var lblModeHTML 			 = "Switch to HTML Mode"; // Label of the Show Code view link
var lblPreview				 = "Preview";
var lblSave 				 	 = "Save";
var lblPrint					 = "Print";
var lblSelectAll			 = "Select/Deselect All";
var lblSpellCheck			 = "Spell Check";
var lblCut						 = "Cut";
var lblCopy						 = "Copy";
var lblPaste					 = "Paste";
var lblPasteText       = "Paste as Plain Text";
var lblPasteWord       = "Paste From Word";
var lblUndo						 = "Undo";
var lblRedo						 = "Redo";
var lblHR							 = "Horizontal Rule";
var lblInsertChar			 = "Insert Special Character";
var lblBold						 = "Bold";
var lblItalic					 = "Italic";
var lblUnderline			 = "Underline";
var lblStrikeThrough   = "Strike Through";
var lblSuperscript		 = "Superscript";
var lblSubscript			 = "Subscript";
var lblAlgnLeft				 = "Align Left";
var lblAlgnCenter			 = "Center";
var lblAlgnRight			 = "Align Right";
var lblJustifyFull		 = "Justify Full";
var lblOL							 = "Ordered List";
var lblUL							 = "Unordered List";
var lblOutdent				 = "Outdent";
var lblIndent					 = "Indent";
var lblTextColor			 = "Text Color";
var lblBgColor				 = "Background Color";
var lblSearch					 = "Search And Replace";
var lblInsertLink			 = "Insert Link";
var lblAddImage				 = "Add Image";
var lblInsertTable		 = "Insert Table";
var lblWordCount       = "Word Count";
var lblUnformat        = "Unformat";

var lblFormat  = "<option value=\"\"  selected=\"selected\">Format</option>";
lblFormat     += "<option value=\"p\">Default Paragraph</option>";
lblFormat     += "<option value=\"div\">Default Division</option>";
lblFormat     += "<option value=\"cite\">Citation</option>";      
lblFormat     += "<option value=\"q\">Quotation</option>";
lblFormat     += "<option value=\"q.psuq\">Quotation - Bible Verse</option>";
lblFormat     += "<option value=\"q.mfrj\">Quotation - Bible Commentator</option>";
lblFormat     += "<option value=\"dfn\">Definition</option>";
lblFormat     += "<option value=\"blockquote\">Block quotation</option>";
lblFormat     += "<option value=\"h1\">Heading 1</option>";
lblFormat     += "<option value=\"h2\">Heading 2</option>";
lblFormat     += "<option value=\"h3\">Heading 3</option>";
lblFormat     += "<option value=\"div.advanced\">div for advanced readers</option>";
lblFormat     += "<option value=\"span.advanced\">span for advanced readers</option>";
lblFormat     += "<option value=\"div.future\">div for future research</option>";
lblFormat     += "<option value=\"span.future\">span for future research</option>";
lblFormat     += "<option value=\"div.requirements\">div of requirements</option>";
lblFormat     += "<option value=\"span.field\">field template</option>";
lblFormat     += "<option value=\"div.revisions\">revision history</option>";
lblFormat     += "<option value=\"span.versionid\">version identifier</option>";
lblFormat     += "<option value=\"span.notes\">span of notes</option>";
lblFormat     += "<option value=\"div.submit\">div of submit</option>";
lblFormat     += "<option value=\"div.notes\">div of notes</option>";
lblFormat     += "<option value=\"h4\">Heading 4</option>";
lblFormat     += "<option value=\"h5\">Heading 5</option>";
lblFormat     += "<option value=\"h6\">Heading 6</option>";
lblFormat     += "<option value=\"abbr\">Abbreviation</option>";
lblFormat     += "<option value=\"acronym\">Acronym</option>";
lblFormat     += "<option value=\"address\">Address</option>";
lblFormat     += "<option value=\"pre\">Preformatted Text</option>";
lblFormat     += "<option value=\"code\">Code</option>";
lblFormat     += "<option value=\"kbd\">Text for keyboard</option>";
lblFormat     += "<option value=\"var\">Variable</option>";
lblFormat     += "<option value=\"samp\">Sample</option>";
lblFormat     += "<option value=\"ins\">Inserted text</option>";
lblFormat     += "<option value=\"del\">Deleted text</option>";



var lblFont 					 =  "<option value=\"\"  selected=\"selected\">Font</option>";
lblFont 							 += "<option value=\"Arial, Helvetica, sans-serif\">Arial</option>";
lblFont 							 += "<option value=\"Courier New, Courier, mono\">Courier New</option>";
lblFont 							 += "<option value=\"Palatino Linotype\">Palatino Linotype</option>";
lblFont 							 += "<option value=\"Times New Roman, Times, serif\">Times New Roman</option>";
lblFont 							 += "<option value=\"Verdana, Arial, Helvetica, sans-serif\">Verdana</option>";
var lblSize 					 =  "<option value=\"\">Size</option>";
lblSize 							 += "<option value=\"1\">1</option>";
lblSize 							 += "<option value=\"2\">2</option>";
lblSize 							 += "<option value=\"3\">3</option>";
lblSize 							 += "<option value=\"4\">4</option>";
lblSize 							 += "<option value=\"5\">5</option>";
lblSize 							 += "<option value=\"6\">6</option>";
lblSize 							 += "<option value=\"7\">7</option>";

var lblErrorPreload 	 = "Error preloading content.";
var lblSearchConfirm 	 =  "The search expression [SF] was found [RUNCOUNT] time(s).\n\n"; // Leave in [SF], [RUNCOUNT] and [RW]
lblSearchConfirm			 += "Are you sure you want to replace these entries with [RW] ?\n";
var lblSearchAbort 		 = "Operation Aborted.";
var lblSearchNotFound	 = "was not found.";
var lblCountTotal	     = "Total Word Count";
var lblCountSelection    = "Selection Word Count"; // Added by Erel
var lblCountChar	     = "Available Characters";
var lblCountCharWarn   = "Warning! Your content is too long and may not save correctly.";

var lblLinkType			 	 = "Link Type";
var lblLinkOldA				 = "existing anchor";
var lblLinkNewA 	 		 = "new anchor";
var lblLinkNoA     		 = "No Existing Anchors";
var lblLinkAnchors 		 = "Anchors";
var lblLinkAddress		 = "Address";
var lblLinkText		 		 = "Link Text";
var lblLinkOpenIn			 = "Open Link In";
var lblLinkVal0        = "Please enter a url.";
var lblLinkSubmit 		 = "OK";
var lblLinkCancel			 = "Cancel";
var lblImageURL			 	 = "Image URL";
var lblImageAltText		 = "Alternative Text";
var lblImageBorder 	 	 = "Border";
var lblImageBorderPx 	 = "Pixels";
var lblImageVal0     	 = "Please indicate the \"Image URL\".";
var lblImageSubmit 		 = "OK";
var lblImageCancel		 = "Cancel";
var lblTableRows			 = "Rows";
var lblTableColumns		 = "Columns";
var lblTableWidth 	 	 = "Table width";
var lblTablePx     		 = "pixels";
var lblTablePercent 	 = "percent";
var lblTableBorder		 = "Border thickness";
var lblTablePadding		 = "Cell padding";
var lblTableSpacing		 = "Cell spacing";
var lblTableSubmit 		 = "OK";
var lblTableCancel		 = "Cancel";
var lblSearchFind			 = "Find what";
var lblSearchReplace 	 = "Replace with";
var lblSearchMatch     = "Match case";
var lblSearchWholeWord = "Find whole words only";
var lblSearchVal0			 = "You must enter something into \"Find what:\".";
var lblSearchSubmit		 = "OK";
var lblSearchCancel		 = "Cancel";
var lblPasteTextHint   = "Hint: To paste you can either right-click and choose \"Paste\" or use the key combination of Ctrl-V.<br><br>";
var lblPasteTextVal0   = "Please enter text."
var lblPasteTextSubmit = "OK";
var lblPasteTextCancel = "Cancel";
var lblPasteWordHint   = "Hint: To paste you can either right-click and choose \"Paste\" or use the key combination of Ctrl-V.<br><br>";
var lblPasteWordVal0   = "Please enter text."
var lblPasteWordSubmit = "OK";
var lblPasteWordCancel = "Cancel";


var lblAutoBR					 = "Use Auto Line Breaks";
var lblRawHTML			 	 = "Use Only Raw HTML";
var lblnon_designMode  = 'To use the Rich Text Editor, a <a href="http://www.mozilla.org/" target="_new">Mozilla 1.3+</a> browser (eg, <a href="http://www.mozilla.org/products/firefox/" target=_new>Firefox</a>) or <a href="http://www.microsoft.com/windows/ie/default.asp" target="_new">MS IE5+</a> (Windows) are required. Apple Safari, IE5(Mac) and Opera browsers are not currently supported and all text must be in HTML.';


/* _script/rte */






var minWidth = 640;					// minumum width
var wrapWidth = 1245; 			//width at which all icons will appear on one bar
var maxchar = 64000;        // maximum number of characters per save



var lang_direction = "ltr";           // localization attribute added by Erel
var lang = "en"; 						//xhtml language
var encoding = "iso-8859-1"; 		//xhtml encoding, english only use "iso-8859-1"
if (document.body.lang != "en") {
	lang_direction = "rtl";
	lang = "he";
	encoding = "windows-1255";
}





var zeroBorder = "#c0c0c0"; //guideline color - see showGuidelines()
var btnText = "submit";			//Button value for non-designMode() & fullsceen rte
var resize_fullsrcreen = true;

var keep_absolute = true; // !!!Disabled - see line 456 for details!!!!!  

var InsertChar;
var InsertTable;
var InsertLink;
var InsertImg;
var dlgReplace;
var dlgPasteText;
var dlgPasteWord;

var ua = navigator.userAgent.toLowerCase();
var isIE = ((ua.indexOf("msie") != -1) && (ua.indexOf("opera") == -1) && (ua.indexOf("webtv") == -1))? true:false;
var isIE7 = ((isIE) && (ua.indexOf("msie 7.") != -1))? true:false;
var	isChrome = (ua.indexOf("chrome") != -1)? true:false;
var	isGecko = (ua.indexOf("gecko") != -1 || isChrome)? true:false;
var	isSafari = (ua.indexOf("safari") != -1)? true:false;
var	isKonqueror = (ua.indexOf("konqueror") != -1)? true:false;

var rng;  // global range
var currentRTE;
var allRTEs = "";
var obj_width;
var obj_height;
var imagesPath;
var includesPath;
var cssFile;
var generateXHTML = true;
var isRichText = false;
if(document.getElementById && document.designMode /*&& !isSafari */&& !isKonqueror) isRichText = true;

function initRTE(imgPath, incPath, css, genXHTML){
	// CM 05/04/05 check args for compatibility with old RTE implementations
	if (arguments.length == 3) {
		genXHTML = generateXHTML;
	}
	//set paths vars
	imagesPath = imgPath;
	includesPath = incPath;
	cssFile = css;
	generateXHTML = genXHTML;
	if(isRichText) document.writeln('<style type="text/css">@import "' + includesPath + 'rte.css";</style>');
	if(!isIE){
	  minWidth = minWidth-48;
	  wrapWidth = wrapWidth-102;
	}
}


function setRTE(rte, html, css, readOnly) {
	document.getElementById('hdn' + rte).value = html;  
	if(document.all){
		enableDesignMode(rte, css? css: cssFile, readOnly);  // enableDesignMode(rte, html, css, readOnly);
	}else{
		document.getElementById(rte).contentDocument.body.innerHTML = html;
	}
}


/* Doesn't work on IE! */
function setRTESize(rte,width,height) {
	var oRTE = document.getElementById(rte);
	var sRTE = document.getElementById('size'+rte);
	var oBut1 = document.getElementById('Buttons1_'+rte);
	var oVS = document.getElementById('vs'+rte);

	if (isIE) {
		oRTE.style = "width:"+(width-2)+"px; height:"+height+"px";  // Doesn't work!
	}
	else {
		oRTE.style.width = "" + width-2 + "px";
		oRTE.style.height = "" + height + "px";
	}

	if (sRTE) sRTE.value = height;
	if (oBut1) oBut1.style.width = "" + width + "px";
	if (oVS) oVS.style.width = "" + width + "px";
}



function showHideRTE(rte, showHide) {
	var display = (showHide == 'show'? '': 'none');
	// not all parts exist for each rte, so we ignore errors
	try {document.getElementById('Buttons1_'+rte).style.display = display ; } catch(e) {}
	try {document.getElementById('Buttons2_'+rte).style.display = display ; } catch(e) {}
	try {document.getElementById('vs'+rte).style.display = display ; } catch(e) {}
	if (isIE) {	document.getElementById(rte).style.display = display;	}
	else showHideElement(rte, showHide, false);  // "true" causes an error in Mozilla
}



function writeRichText(rte, html, css, width, height, buttons, readOnly, fullscreen) {
	currentRTE = rte;
	if(allRTEs.length > 0) allRTEs += ";";
	allRTEs += rte;
	// CM 06/04/05 stops single quotes from messing everything up
	html=replaceIt(html,'\'','&apos;');
	// CM 05/04/05 a bit of juggling for compatibility with old RTE implementations
	if (arguments.length == 6) {
		fullscreen = false;
		readOnly = buttons;
		buttons = height;
		height = width;
		width = css;
		css = "";
	}
	
	var iconWrapWidth = wrapWidth;
	if(readOnly) buttons = false;
	if(fullscreen)
	{
		readOnly = false; // fullscreen is not readOnly and must show buttons
		buttons = true;
		// resize rte on resize if the option resize_fullsrcreen = true.
		if(isRichText && resize_fullsrcreen) window.onresize = resizeRTE;
		document.body.style.margin = "0px";
		document.body.style.overflow = "hidden";
		//adjust maximum table widths
		findSize("");
		width = obj_width;
		if(width < iconWrapWidth) {
			height = (obj_height - 83);
		}else{
			height = (obj_height - 55);
		}
		if (width < minWidth){
			document.body.style.overflow = "auto";
			if(isIE){
				height = obj_height-22;
			}else{
				height = obj_height-24;
			}
			width = minWidth;
		}
		var tablewidth = width;
	}else{
		fullscreen = false;
		iconWrapWidth = iconWrapWidth-25;
		//adjust minimum table widths
		if (buttons && (width < minWidth)) width = minWidth;
		if(isIE){
			var tablewidth = width;
		}else{
			var tablewidth = width + 4;
		}
	}
	if(isRichText){
		var rte_css = "";
		if(css.length > 0) {
			rte_css = css;
		}else{
			rte_css = cssFile;
		}
		document.writeln('<div class="rteDiv">'); // Erel: changed from "span" to "div"
		if(buttons){
			document.writeln('<table class="rteBk" cellpadding=0 cellspacing=0 id="Buttons1_'+rte+'" width="' + tablewidth + '">');
			document.writeln('<tbody><tr>');
			insertBar();
			//document.writeln('<td><input type="image" class="rteImg" src="'+imagesPath+'save.gif" alt="'+lblSave+'" title="'+lblSave+'" onmouseover="this.className=\'rteImgUp\'" onmouseout="this.className=\'rteImg\'" onmousedown="this.className=\'rteImgDn\'" onmouseup="this.className=\'rteImgUp\'"></td>');
			insertImg(lblPrint,"print.gif","rtePrint('"+rte+"')");
			insertSep();
			insertImg(lblSelectAll,"selectall.gif","toggleSelection('"+rte+"')");
			insertImg(lblUnformat,"unformat.gif","rteCommand('"+rte+"','removeformat')");
			insertSep();
			if(isIE){
				insertImg(lblCut,"cut.gif","rteCommand('"+rte+"','cut')");
				insertImg(lblCopy,"copy.gif","rteCommand('"+rte+"','copy')");
				insertImg(lblPaste,"paste.gif","rteCommand('"+rte+"','paste')");
			}
			insertImg(lblPasteText,"pastetext.gif","dlgLaunch('"+rte+"','text')");
			insertImg(lblPasteWord,"pasteword.gif","dlgLaunch('"+rte+"','word')");
			insertSep();
			insertImg(lblUndo,"undo.gif","rteCommand('"+rte+"','undo')");
			insertImg(lblRedo,"redo.gif","rteCommand('"+rte+"','redo')");
			insertSep();
			document.writeln('<td><select id="formatblock_'+rte+'" onchange="selectClass(\''+rte+'\', this.id);" style="font-size:14px;width:155px;height:20px;margin:1px;">');  // Erel 2006/05/26: replaced "selectFont" with "selectClass"; added 50px for longer-named styles
			document.writeln(lblFormat);
			document.writeln('</select></td><td>');
			document.writeln('<select id="fontname_'+rte+'" onchange="selectFont(\''+rte+'\', this.id)" style="font-size:14px;width:125px;height:20px;margin:1px;">');
			document.writeln(lblFont);
			document.writeln('</select></td><td>');
	
			// Erel: removed 'unselectable="on"'
			document.writeln('<select id="fontsize_'+rte+'" onchange="selectFont(\''+rte+'\', this.id);" style="font-size:14px;width:75px;height:20px;margin:1px;">');
			document.writeln(lblSize);
			document.writeln('</select></td>');
			if(tablewidth < iconWrapWidth){
				document.writeln('<td width="100%"></td></tr></tbody></table>');
				document.writeln('<table class="rteBk" cellpadding="0" cellspacing="0" id="Buttons2_'+rte+'" width="' + tablewidth + '">');
				document.writeln('<tbody><tr>');
			}
			insertBar();
			insertImg(lblBold,"bold.gif","rteCommand('"+rte+"','bold')");
			insertImg(lblItalic,"italic.gif","rteCommand('"+rte+"','italic')");
			insertImg(lblUnderline,"underline.gif","rteCommand('"+rte+"','underline')");
			insertSep();
			insertImg(lblStrikeThrough,"strikethrough.gif","rteCommand('"+rte+"','strikethrough')");
			insertImg(lblSuperscript,"superscript.gif","rteCommand('"+rte+"','superscript')");
			insertImg(lblSubscript,"subscript.gif","rteCommand('"+rte+"','subscript')");
			insertSep();
			insertImg(lblAlgnLeft,"left_just.gif","rteCommand('"+rte+"','justifyleft')");
			insertImg(lblAlgnCenter,"centre.gif","rteCommand('"+rte+"','justifycenter')");
			insertImg(lblAlgnRight,"right_just.gif","rteCommand('"+rte+"','justifyright')");
			insertImg(lblJustifyFull,"justifyfull.gif","rteCommand('"+rte+"','justifyfull')");
			insertSep();
			insertImg(lblOL,"numbered_list.gif","rteCommand('"+rte+"','insertorderedlist')");
			insertImg(lblUL,"list.gif","rteCommand('"+rte+"','insertunorderedlist')");
			insertImg(lblOutdent,"outdent.gif","rteCommand('"+rte+"','outdent')");
			insertImg(lblIndent,"indent.gif","rteCommand('"+rte+"','indent')");
			insertSep();
			insertImg(lblTextColor,"textcolor.gif","dlgColorPalette('"+rte+"','forecolor')","forecolor_"+rte);
			insertImg(lblBgColor,"bgcolor.gif","dlgColorPalette('"+rte+"','hilitecolor')","hilitecolor_"+rte);
			insertSep();
			insertImg(lblHR,"hr.gif","rteCommand('"+rte+"','inserthorizontalrule')");
			insertSep();
			insertImg(lblInsertChar,"special_char.gif","dlgLaunch('"+rte+"','char')");
			insertImg(lblInsertLink,"hyperlink.gif","dlgLaunch('"+rte+"','link')");
			insertImg(lblAddImage,"image.gif","dlgLaunch('"+rte+"','image')");
			insertImg(lblInsertTable,"insert_table.gif","dlgLaunch('"+rte+"','table')");
			insertSep();
			insertImg(lblSearch,"replace.gif","dlgLaunch('"+rte+"','replace')");
			insertImg(lblWordCount,"word_count.gif","countWords('"+rte+"')");
			if(isIE)insertImg(lblSpellCheck,"spellcheck.gif","checkspell()");
			document.writeln('<td width="100%"></td></tr></tbody></table>');
		}
		document.writeln('<iframe id="'+rte+'" width="' + (tablewidth - 2) + 'px" height="' + height + 'px" frameborder=0 style="border: 1px solid #d2d2d2" src="' + includesPath + 'blank.htm" onfocus="dlgCleanUp();"></iframe>');
		if(!readOnly){
		  document.writeln('<table id="vs'+rte+'" class="rteBk" cellpadding=0 cellspacing=0 border=0 width="' + tablewidth + '"><tr>');
			document.writeln('<td onclick="toggleHTMLSrc(\''+rte+'\', ' + buttons + ');" nowrap><img class="rteBar" src="'+imagesPath+'bar.gif" alt="" align=absmiddle><span id="imgSrc'+rte+'"><img src="'+imagesPath+'code.gif" alt="" title="" style="margin:1px;" align=absmiddle></span><span id="txtSrc'+rte+'" style="font-family:tahoma,sans-serif;font-size:12px;color:#0000ff;CURSOR: default;">'+lblModeHTML+'</span></td>');
			document.writeln('<td width="100%" nowrap>&nbsp;</td></tr></table>');
		}
		document.writeln('<iframe width="142" height="98" id="cp'+rte+'" src="' + includesPath + 'palette.htm" scrolling="no" frameborder=0 style="margin:0;border:0;visibility:hidden;position:absolute;border:1px solid #cdcdcd;top:-1000px;left:-1000px"></iframe>');
		document.writeln('<input type="hidden" id="hdn'+rte+'" name="'+rte+'" value="" style="position: absolute;left:-1000px;top:-1000px;">');
		if(!fullscreen) document.writeln('<input type="hidden" id="size'+rte+'" value="'+height+'" style="position: absolute;left:-1000px;top:-1000px;">');
		document.writeln('</div><!--rteDiv-->');  // Erel: changed from "span" to "div"
		document.getElementById('hdn'+rte).value = html;  
		enableDesignMode(rte, rte_css, readOnly);            // "html" parameter removed by Erel -- see function definition
	}
	else{
		buttons = false;
		if(fullscreen && height > 90) height = (height - 75);tablewidth=tablewidth-30;
		// CM non-designMode() UI
		html = parseBreaks(html);
		document.writeln('<div style="font:12px Verdana, Arial, Helvetica, sans-serif;width: ' + tablewidth + 'px;padding:15px;">');
		if(!readOnly){
		  document.writeln('<div style="color:gray">'+lblnon_designMode+'</div><br>');
		  document.writeln('<input type="radio" name="' + rte + '_autobr" value="1" checked="checked" onclick="autoBRon(\'' + rte + '\');" /> '+lblAutoBR+'<input type="radio" name="' + rte + '_autobr" value="0" onclick="autoBRoff(\'' + rte + '\');" />'+lblRawHTML+'<br>');
		  document.writeln('<textarea name="'+rte+'" id="'+rte+'" style="width: ' + tablewidth + 'px; height: ' + height + 'px;">' + html + '</textarea>');
		}else{
			document.writeln('<textarea name="'+rte+'" id="'+rte+'" style="width: ' + tablewidth + 'px; height: ' + height + 'px;" readonly=readonly>' + html + '</textarea>');
		}
		if(fullscreen) document.writeln('<br><input type="submit" value="'+btnText+'" />');
		document.writeln('</div>');
	}
}


function insertBar(){
	document.writeln('<td><img class="rteBar" src="'+imagesPath+'bar.gif" alt=""></td>');
}
function insertSep(){
	document.writeln('<td><img class="rteSep" src="'+imagesPath+'blackdot.gif" alt=""></td>');
}
function insertImg(name, image, command, id){
	var td = "<td>";
	if(id!=null) td = "<td id='"+id+"'>";
	document.writeln(td+'<img class="rteImg" src="'+imagesPath+image+'" alt="'+name+'" title="'+name+'" onClick="'+command+'" onmouseover="this.className=\'rteImgUp\'" onmouseout="this.className=\'rteImg\'" onmousedown="this.className=\'rteImgDn\'" onmouseup="this.className=\'rteImgUp\'"></td>');
}



function enableDesignMode(rte, css, readOnly) {
	html = document.getElementById('hdn'+rte).value;       // line added by Erel
	var frameHtml = "<html dir='" + lang_direction + "' lang='" + lang + "' id='" + rte + "'>\n<head>\n";
	frameHtml += "<meta http-equiv='Content-Type' content='text/html; charset=" + encoding + "'>\n";
	frameHtml += "<meta http-equiv='Content-Language' content='" + lang + "'>\n";

	if(css.length > 0){
	  frameHtml += "<link media=\"all\" type=\"text/css\" href=\"" + css + "\" rel=\"stylesheet\">\n";
	}
	else {
	  // styles changed by Erel
	  frameHtml += "<style>" + 
	  	"@charset \"utf-8\"; " + 
		"body            { font-weight:normal; font-size:1.25em }" + 
		"small           { font-size: 0.6em }" + 
		"li table td { font-size: 0.7em }" + 
		"cite, .citut { font-weight: bolder; font-family: serif; font-style: normal; font-size:1.1em }" + 
		"cite small, .citut small, small cite, small .citut {font-size: 0.6em}" + 
		"textarea, input { font-family: 'Courier New', 'Courier', monospace; font-size: 0.6em }" + 
		"textarea.code   { font-size: 0.6em }" + 
		"button          { font-size: 0.6em }" + 
		"table  {border-spacing: 0}" + 
		"table td {border-style:ridge; border-width:1pt}" + 

		
		"h1           { font-weight:normal; font-size:2.5em; text-align:center; margin:auto }" + 
		"h2           { font-weight:normal; font-size:1.6em }" + 
		"h3           { font-weight:normal; font-size:1.3em }" + 
		"h4           { font-weight:normal; font-size:1.2em }" + 
		"h5           { font-weight:normal; font-size:1.1em }" + 
		"h6           { font-weight:normal; font-size:1em }" + 
		
		"td { vertical-align:top }" + 
		"form table tr { background:#dfdfdf; color:black  }" + 
		"form {border: dotted 1pt; margin:1em}" + 
		".notes {font-style:italic; font-size:smaller}" + 
		".requirements {color:#880000}" + 
		".field {border: solid 1pt black; padding-right:10em}" + 
		"a u, a .u {font-weight: bolder; border-bottom: solid 1px}" + 
		".u { text-decoration:underline }" + 
		"h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {text-decoration:none}" + 

		"div.lang  { border-top: 1px solid #eeeeee; border-bottom: 1px solid #eeeeee; padding-top: 1em }" + 
		"span.lang { border-left: 1px solid #eeeeee; border-right: 1px solid #eeeeee }" + 
		
		"textarea.code { background:#eeeeff; color:black; margin:auto }" + 
		"button {margin:auto; text-align:center}" + 
		"body.jsfunction, body.jsalgorithm { text-align:center; margin:auto }" + 
	
		"li table {border: none}" + 
		"li table td {border: groove 1.1px rgb(230,230,184)}" + 
		"li table td a {text-decoration: none}" + 
		
		".advanced, .revisions {background-color:#eee; border:dotted 1pt}" + 
		".versionid {border: solid 1pt #008; background: #ccf; margin:0 2em 0 2em; text-align:center; width:4em}" + 
		".future {font-size:smaller; background-color:#ccc}" + 
		"a.psuq {font-size:10px}" + 

		/* styles for sikum.php */

		"#etnachta {background:#fee}" + 
		
		"#mikraotgdolot {background:#eef}" + 
		"#mikraotgdolot #toc {display:none}" + 
		"#mikraotgdolot .links_in_title {display:none}" + 
		
		"#mamrim {background:#efe}" + 
		"#mamrim .skipped {font-size:10px}" + 
	


		"q:before {content: no-open-quote;}" + 
		"q:after {content: no-close-quote;}" + 
		"cite, .citut, q { font-family: serif; font-style: normal; font-size:1.2em }" + 
		"q      { color: #800 }" + 
		"q.psuq { color: #008 }" + 
		"q.mfrj { color: #080 }" + 

		"body {background:#FFFFFF;margin:8px;padding:0px;font-size:15pt}" + 
		"</style>\n";   // style change by Erel
	}
	frameHtml += "</head><body class='RTE'>\n"+html+"\n</body></html>";     // class attribute added by Erel
	
	var oRTE = returnRTE(rte).document;
	if(document.all){
		oRTE.open();
		oRTE.write(frameHtml);
		oRTE.close();
		if(!readOnly){
			oRTE.designMode = "On";
		}
	}else{
		try{
			// Commented out the following line to confront a bug when loading multiple RTEs on one page in a MOZ browser
			// Fix provided by "Kings". Safari may have problems with this snytax - unable to test because I don't own a MAC.(Tim Bell)
			//
			if(!readOnly) document.getElementById(rte).contentDocument.designMode = "on";
			//if(!readOnly) {
			//	addLoadEvent(function() { document.getElementById(rte).contentDocument.designMode = "on"; });
			//}
			try{
				oRTE.open();
				oRTE.write(frameHtml);
				oRTE.close();
				if(isGecko && !readOnly){
				  //attach a keyboard handler for gecko browsers to make keyboard shortcuts work
				  oRTE.addEventListener("keypress", geckoKeyPress, true);
				  oRTE.addEventListener("focus", function (){dlgCleanUp()}, false);
				}
			}catch(e){
				alert(lblErrorPreload + ": " + e);   // added by Erel for clearer error diagnostics
			}
		}catch(e){
			dump('\nenableDesignMode(' + rte + ', ' + css + ', ' + readOnly + ')\n catch: ' + e + '\n');     // dump added by Erel for diagnostics
			//gecko may take some time to enable design mode.
			//Keep looping until able to set.
			if(isGecko){
				setTimeout("enableDesignMode('"+rte+"', '"+css+"', "+readOnly+");", 200); 
					// html parameter removed by Erel -- see function definition
			}else{
			  return false;
			}
		}
	}
	setTimeout('showGuidelines("'+rte+'")',300);
}


function addLoadEvent(func) {
	 var oldonload = window.onload;
	 if (typeof window.onload != 'function') {
	    window.onload = func;
	 } else {
	    window.onload = function() {
	       oldonload();
	       func();
	    }
	 }
}

function returnRTE(rte) {
	var rtn;
	if(document.all){
		rtn = frames[rte];
	}else{
		rtn = document.getElementById(rte);
		if (rtn==null) {
			//alert("rte '"+rte+"' is null");
			return null;
		}
		else rtn = rtn.contentWindow;
	}
	return rtn;
}

function updateRTE(rte) {
	if(isRichText) {
		dlgCleanUp(); // 	Closes Pop-ups
		stripGuidelines(rte); // Removes Table Guidelines 
		// [Erel thinks the previous line is redundant because it is already done in parseRTE]
		// [Timm Bell says: "I can't remember the reason why stripGuidelines(rte); was added to updateRTE(), but it was added to fix a bug."]
	}
	parseRTE(rte);
}

function parseRTE(rte) {
	if (!isRichText) {
		 autoBRoff(rte); // sorts out autoBR
		 return false;
	}
	//check for readOnly mode
	var readOnly = false;
	var oRTE = returnRTE(rte);
	if(document.all){
		if (oRTE.document.designMode != "On") readOnly = true;
	}else{
		if (oRTE.document.designMode != "on") readOnly = true;
	}

	if(isRichText && !readOnly){
		//if viewing source, switch back to design view
		if(document.getElementById("txtSrc"+rte).innerHTML == lblModeRichText){
			if(document.getElementById("Buttons1_"+rte)){
				 toggleHTMLSrc(rte, true);
			}
			else{
				toggleHTMLSrc(rte, false);
			}
			stripGuidelines(rte);
		}
		setHiddenVal(rte);
	}
}

function setHiddenVal(rte){
	//set hidden form field value for current rte
	var oHdnField = document.getElementById('hdn'+rte);
	//convert html output to xhtml (thanks Timothy Bell and Vyacheslav Smolin!)
	if(oHdnField.value == null) oHdnField.value = "";
	var sRTE = returnRTE(rte).document.body;
	if(generateXHTML){
	  try{
		  oHdnField.value = get_xhtml(sRTE, lang, encoding);
	  }catch(e){
	    oHdnField.value = sRTE.innerHTML;
	  }
	}else{
	  oHdnField.value = sRTE.innerHTML;
	}
	// fix to replace special characters added here: 
	oHdnField.value = replaceSpecialChars(oHdnField.value); 
	//if there is no content (other than formatting) set value to nothing
	if(stripHTML(oHdnField.value.replace("&nbsp;", " ")) == "" &&
		oHdnField.value.toLowerCase().search("<hr") == -1 &&
		oHdnField.value.toLowerCase().search("<img") == -1) oHdnField.value = "";
}

function updateRTEs(){
	var vRTEs = allRTEs.split(";");
	for(var i=0; i<vRTEs.length; i++){
		updateRTE(vRTEs[i]);
	}
}

function rteCommand(rte, command, option){
	dlgCleanUp();
	if (!rte) {
		alert("empty rte "+rte+"'");
		return;
	}
	var oRTE = returnRTE(rte);
	try{
		oRTE.focus();
		if (option) oRTE._doc.execCommand(command, false, option);
		else        oRTE._doc.execCommand(command               );
		oRTE.focus();
	}catch(e){
	}
}

function toggleHTMLSrc(rte, buttons){
	dlgCleanUp();
	//contributed by Bob Hutzel (thanks Bob!)
	var cRTE = document.getElementById(rte);
	var hRTE = document.getElementById('hdn'+rte);
	var sRTE = document.getElementById("size"+rte);
	var tRTE = document.getElementById("txtSrc"+rte);
	var iRTE = document.getElementById("imgSrc"+rte);
	var oRTE = returnRTE(rte).document;
	if(sRTE){
		obj_height = parseInt(sRTE.value);
	}else{
		findSize(rte);
	}
	if(tRTE.innerHTML == lblModeHTML){
		//we are checking the box
		tRTE.innerHTML = lblModeRichText;
		stripGuidelines(rte);
		if(buttons){
			showHideElement("Buttons1_" + rte, "hide", true);
			if(document.getElementById("Buttons2_"+rte)){
				showHideElement("Buttons2_" + rte, "hide", true);
				cRTE.style.height = obj_height+56;
			}else{
				cRTE.style.height = obj_height+28;
			}
		}
		setHiddenVal(rte);
		if(document.all){
			oRTE.body.innerText = hRTE.value;
		}else{
			var htmlSrc = oRTE.createTextNode(hRTE.value);
			oRTE.body.innerHTML = "";
			oRTE.body.appendChild(htmlSrc);
		}
		iRTE.innerHTML = '<img src="'+imagesPath+'design.gif" alt="Switch Mode" style="margin:1px;" align=absmiddle>';
	}else{
		//we are unchecking the box
		obj_height = parseInt(cRTE.style.height);
		tRTE.innerHTML = lblModeHTML;
		if(buttons){
			showHideElement("Buttons1_" + rte, "show", true);
			if(document.getElementById("Buttons2_"+rte)){
				showHideElement("Buttons2_" + rte, "show", true);
				cRTE.style.height = obj_height-56;
			}else{
				cRTE.style.height = obj_height-28;
			}
		}
		if(document.all){
			//fix for IE
			var output = escape(oRTE.body.innerText);
			output = output.replace("%3CP%3E%0D%0A%3CHR%3E", "%3CHR%3E");
			output = output.replace("%3CHR%3E%0D%0A%3C/P%3E", "%3CHR%3E");
			oRTE.body.innerHTML = unescape(output);
			// Disabled due to flaw in the regular expressions, this fix 
	    // does not work with the revamped's enhanced insert link dialog window.
	    //
	    // Prevent links from changing to absolute paths
	    if(!keep_absolute){
	      var tagfix = unescape(output).match(/<a[^>]*href=(['"])([^\1>]*)\1[^>]*>/ig); 
	      var coll = oRTE.body.all.tags('A'); 
	      for(i=0; i<coll.length; i++){ 
	        // the 2 alerts below show when we hinder the links from becoming absolute			
	        //alert(tagfix[i]); 
	        coll[i].href = tagfix[i].replace(/.*href=(['"])([^\1]*)\1.*/i,"$2"); 
	        //alert(RegExp.$1 + " " + RegExp.$2 + " " + RegExp.$3); 
	      } 
	      var imgfix = unescape(output).match(/<img[^>]*src=['"][^'"]*['"][^>]*>/ig); 
	      var coll2 = oRTE.body.all.tags('IMG'); 
	      for(i=0; i<coll2.length; i++){ 
	        coll2[i].src = imgfix[i].replace(/.*src=['"]([^'"]*)['"].*/i,"$1"); 
	      } 
	    }
	    //end path fix			
		}else{
	 		var htmlSrc = oRTE.body.ownerDocument.createRange();
			htmlSrc.selectNodeContents(oRTE.body);
			oRTE.body.innerHTML = htmlSrc.toString();
		}
		oRTE.body.innerHTML = replaceSpecialChars(oRTE.body.innerHTML);
		showGuidelines(rte);
		// (IE Only)This prevents an undo operation from displaying a pervious HTML mode
		// This resets the undo/redo buffer.
		if(document.all){
			parseRTE(rte);
	  }
	  iRTE.innerHTML = '<img src="'+imagesPath+'code.gif" alt="Switch Mode" style="margin:1px;" align=absmiddle>';
	}
}

function toggleSelection(rte) {
	var rng = getRange(rte);
	var oRTE = returnRTE(rte).document;
	var length1;
	var length2;
	if(document.all){
		length1 = rng.text.length;
		var output = escape(oRTE.body.innerText);
		output = output.replace("%3CP%3E%0D%0A%3CHR%3E", "%3CHR%3E");
		output = output.replace("%3CHR%3E%0D%0A%3C/P%3E", "%3CHR%3E");
		length2 = unescape(output).length;
	}else{
		length1 = rng.toString().length;
		var htmlSrc = oRTE.body.ownerDocument.createRange();
		htmlSrc.selectNodeContents(oRTE.body);
	  length2 = htmlSrc.toString().length;
	}
	if(length1 < length2){
	  rteCommand(rte,'selectall','');
	} else {
		if(!document.all){
		  oRTE.designMode = "off";
		  oRTE.designMode = "on";
		}else{
		  rteCommand(rte,'unselect','');
		}
	}
}

function dlgColorPalette(rte, command) {
	//function to display or hide color palettes
	setRange(rte);
	//get dialog position
	var oDialog = document.getElementById('cp' + rte);
	var buttonElement = document.getElementById(command+"_"+rte);
	var iLeftPos = buttonElement.offsetLeft+5; 
	var iTopPos = buttonElement.offsetTop+53;
	if (!document.getElementById('Buttons2_'+rte)) iTopPos = iTopPos-28;
	oDialog.style.left = iLeftPos + "px";
	oDialog.style.top = iTopPos + "px";
	
	if((command == parent.command)&&(rte == currentRTE)){
		//if current command dialog is currently open, close it
		if(oDialog.style.visibility == "hidden"){
			showHideElement(oDialog, 'show', false);
		}else{
			showHideElement(oDialog, 'hide', false);
		}
	}else{
		//if opening a new dialog, close all others
		var vRTEs = allRTEs.split(";");
		for(var i = 0; i<vRTEs.length; i++){
			showHideElement('cp' + vRTEs[i], 'hide', false);
		}
		showHideElement(oDialog, 'show', false);
	}
	//save current values
	currentRTE = rte;
	parent.command = command;
}

function dlgLaunch(rte, command) {
	var selectedText = '';
	//save current values
	parent.command = command;
	currentRTE = rte;
	switch(command){
	case "char":
	  InsertChar = popUpWin(includesPath+'insert_char.htm', 'InsertChar', 50, 50, 'status=yes,');
	  break;
	case "table":
	  InsertTable = popUpWin(includesPath + 'insert_table.htm', 'InsertTable', 50, 50, 'status=yes,');
	  break;
	case "image":
	  setRange(rte);
	  parseRTE(rte);
	  InsertImg = popUpWin(includesPath + 'insert_img.htm','AddImage', 50, 50, 'status=yes,');
	  break;
	case "link":
	  selectedText = getText(rte);
	  InsertLink = popUpWin(includesPath + 'insert_link.htm', 'InsertLink', 50, 50, 'status=yes,');
	  setFormText("0", selectedText);
	  break;
	case "replace":
	  selectedText = getText(rte);
	  dlgReplace = popUpWin(includesPath + 'replace.htm', 'dlgReplace', 50, 50, 'status=yes,');
	  setFormText("1", selectedText);
	  break;
	case "text":
	  dlgPasteText = popUpWin(includesPath + 'paste_text.htm', 'dlgPasteText', 50, 50, 'status=yes,');
	  break;
	case "word":
	  dlgPasteWord = popUpWin(includesPath + 'paste_word.htm', 'dlgPasteWord', 50, 50, 'status=yes,');
	  break;
	}
}

function getText(rte) {
	//get currently highlighted text and set link text value
	setRange(rte);
	var rtn = '';
	if (isIE) {
	  rtn = stripHTML(rng.htmlText);
	} else {
	  rtn = stripHTML(rng.toString());
	}
	parseRTE(rte);
	if(document.all){
	  rtn = rtn.replace(/'/g,"\\\\\\'");    // Erel 2006/05/26: added "g" to fix double-quote bug
	}else{
	  rtn = rtn.replace(/'/g,"\\'");        // Erel 2006/05/26: added "g" to fix double-quote bug
	}
	return rtn;
}

function setFormText(popup, content){
	//set link text value in dialog windows
	if(content != "undefined")
	{
	  try{
		  switch(popup){
		    case "0": InsertLink.document.getElementById("linkText").value = content; break;
		    case "1": dlgReplace.document.getElementById("searchText").value = content; break;
		  }
	  }catch(e){
		  //may take some time to create dialog window.
		  //Keep looping until able to set.
		  setTimeout("setFormText('"+popup+"','" + content + "');", 10);
	  }
	}
}

function dlgCleanUp(){
	var vRTEs = allRTEs.split(";");
	for(var i = 0; i < vRTEs.length; i++){
		showHideElement('cp' + vRTEs[i], 'hide', false);
	}
	if(InsertChar!=null) InsertChar.close();InsertChar=null;
	if(InsertTable!=null) InsertTable.close();InsertTable=null;
	if(InsertLink!=null) InsertLink.close();InsertLink=null;
	if(InsertImg!=null) InsertImg.close();InsertImg=null;
	if(dlgReplace!=null) dlgReplace.close();dlgReplace=null;
	if(dlgPasteText!=null) dlgPasteText.close();dlgPasteText=null;
	if(dlgPasteWord!=null) dlgPasteWord.close();dlgPasteWord=null;
}

function popUpWin (url, win, width, height, options) {
	dlgCleanUp();
	var leftPos = (screen.availWidth - width) / 2;
	var topPos = (screen.availHeight - height) / 2;
	options += 'width=' + width + ',height=' + height + ',left=' + leftPos + ',top=' + topPos;
	return window.open(url, win, options);
}

function setColor(color) {
	//function to set color
	var rte = currentRTE;
	var parentCommand = parent.command;
	if(document.all){
		if(parentCommand == "hilitecolor") parentCommand = "backcolor";
		//retrieve selected range
		rng.select();
	}
	rteCommand(rte, parentCommand, color);
	showHideElement('cp'+rte, "hide", false);
}

function addImage(rte) {
	dlgCleanUp();
	//function to add image
	imagePath = prompt('Enter Image URL:', 'http://');				
	if((imagePath != null)&&(imagePath != "")){
		rteCommand(rte, 'InsertImage', imagePath);
	}
}

function rtePrint(rte) {
	dlgCleanUp();
	if(isIE){
	  document.getElementById(rte).contentWindow.document.execCommand('Print');
	}else{
 	  document.getElementById(rte).contentWindow.print();
	}
}

function selectFont(rte, selectname){
	//function to handle font changes
	var idx = document.getElementById(selectname).selectedIndex;
	// First one is always a label
	if(idx != 0){
		var selected = document.getElementById(selectname).options[idx].value;
		document.getElementById(selectname).selectedIndex = 0;
		var cmd = selectname.replace('_'+rte, '');
		rteCommand(rte, cmd, selected);
	}
}

function tagIsBlock(tag) {
	return (tag=="div" || tag=="p" || tag=="blockquote");
}

function selectClass(rte, selectname) {
	//function to handle font changes
	var idx = document.getElementById(selectname).selectedIndex;
	// First one is always a label
	if(idx != 0){
		var selected = document.getElementById(selectname).options[idx].value;
		document.getElementById(selectname).selectedIndex = 0;
		
		var tag_class = selected.split(".");
		var tag = tag_class[0].toLowerCase();    // for XHTML compliance
		var cls = tag_class[1];

		if (tagIsBlock(tag) && !cls)     // keep previous behaviour when there is no class
			rteCommand(rte, "formatblock", (isIE? "<"+tag+">": tag) );  // "<" and ">" needed in IE, but don't work in Mozilla in some of the tags
		else
			setTagAndClass(rte, tag, cls);
	}
}

function setTagAndClass(rte, tag, cls) {
	var rng = getRange(rte);

	// rng.toString destroys the current formatting, so we use it only for non-block tags.
	// surroundContents doesn't enable UNDO in Mozilla, so we use it only for block-tags.
	if (isIE || !tagIsBlock(tag)) {
		var currentText = isIE? rng.htmlText: rng.toString(); // NOTE: toString clears the current formatting tags!
		var newHTML = 
			"<" + tag + 
				(cls?  " class='"+cls+"'":  "") + 
			">" + currentText + "</" + tag + ">";
		currentRTE = rte;  // because insertHTML uses global variable currentRTE
		insertHTML(newHTML);
	}
	else {      // for DIV styles on non-IE browsers
		var newNode = document.createElement(tag);
		newNode.className = cls;
		rng.surroundContents(newNode);  // NOTE: Mozilla doesn't undo this!
	}
}

function insertHTML(html){
	//function to add HTML -- thanks dannyuk1982
	var rte = currentRTE;
	var oRTE = returnRTE(rte);
	oRTE.focus();
	if(document.all){
		var oRng = oRTE.document.selection.createRange();
		oRng.pasteHTML(html);
		oRng.collapse(false);
		oRng.select();
	}else{
		oRTE.document.execCommand('insertHTML', false, html);
	}
}

function replaceHTML(tmpContent, searchFor, replaceWith) {
	var runCount = 0;
	var intBefore = 0;
	var intAfter = 0;
	var tmpOutput = "";
	while(tmpContent.toUpperCase().indexOf(searchFor.toUpperCase()) > -1) {
	  runCount = runCount+1;
	  // Get all content before the match
	  intBefore = tmpContent.toUpperCase().indexOf(searchFor.toUpperCase());
	  tmpBefore = tmpContent.substring(0, intBefore);
	  tmpOutput = tmpOutput + tmpBefore;
	  // Get the string to replace
	  tmpOutput = tmpOutput + replaceWith;
	  // Get the rest of the content after the match until
	  // the next match or the end of the content
	  intAfter = tmpContent.length - searchFor.length + 1;
	  tmpContent = tmpContent.substring(intBefore + searchFor.length);
	}
	return runCount+"|^|"+tmpOutput+tmpContent;
}

function replaceSpecialChars(html){ 
	 var specials = new Array("&cent;","&euro;","&pound;","&curren;","&yen;","&copy;","&reg;","&trade;","&divide;","&times;","&plusmn;","&frac14;","&frac12;","&frac34;","&deg;","&sup1;","&sup2;","&sup3;","&micro;","&laquo;","&raquo;","&lsquo;","&rsquo;","&lsaquo;","&rsaquo;","&sbquo;","&bdquo;","&ldquo;","&rdquo;","&iexcl;","&brvbar;","&sect;","&not;","&macr;","&para;","&middot;","&cedil;","&iquest;","&fnof;","&mdash;","&ndash;","&bull;","&hellip;","&permil;","&ordf;","&ordm;","&szlig;","&dagger;","&Dagger;","&eth;","&ETH;","&oslash;","&Oslash;","&thorn;","&THORN;","&oelig;","&OElig;","&scaron;","&Scaron;","&acute;","&circ;","&tilde;","&uml;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&ccedil;","&Ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&igrave;","&iacute;","&icirc;","&iuml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ntilde;","&Ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&ugrave;","&uacute;","&ucirc;","&uuml;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&yacute;","&yuml;","&Yacute;","&Yuml;"); 
	 var unicodes = new Array("\u00a2","\u20ac","\u00a3","\u00a4","\u00a5","\u00a9","\u00ae","\u2122","\u00f7","\u00d7","\u00b1","\u00bc","\u00bd","\u00be","\u00b0","\u00b9","\u00b2","\u00b3","\u00b5","\u00ab","\u00bb","\u2018","\u2019","\u2039","\u203a","\u201a","\u201e","\u201c","\u201d","\u00a1","\u00a6","\u00a7","\u00ac","\u00af","\u00b6","\u00b7","\u00b8","\u00bf","\u0192","\u2014","\u2013","\u2022","\u2026","\u2030","\u00aa","\u00ba","\u00df","\u2020","\u2021","\u00f0","\u00d0","\u00f8","\u00d8","\u00fe","\u00de","\u0153","\u0152","\u0161","\u0160","\u00b4","\u02c6","\u02dc","\u00a8","\u00e0","\u00e1","\u00e2","\u00e3","\u00e4","\u00e5","\u00e6","\u00c0","\u00c1","\u00c2","\u00c3","\u00c4","\u00c5","\u00c6","\u00e7","\u00c7","\u00e8","\u00e9","\u00ea","\u00eb","\u00c8","\u00c9","\u00ca","\u00cb","\u00ec","\u00ed","\u00ee","\u00ef","\u00cc","\u00cd","\u00ce","\u00cf","\u00f1","\u00d1","\u00f2","\u00f3","\u00f4","\u00f5","\u00f6","\u00d2","\u00d3","\u00d4","\u00d5","\u00d6","\u00f9","\u00fa","\u00fb","\u00fc","\u00d9","\u00da","\u00db","\u00dc","\u00fd","\u00ff","\u00dd","\u0178"); 
	 for(var i=0; i<specials.length; i++){ 
	    html = replaceIt(html,unicodes[i],specials[i]); 
	 } 
	 return html; 
}

function SearchAndReplace(searchFor, replaceWith, matchCase, wholeWord) {
	 var cfrmMsg = lblSearchConfirm.replace("SF",searchFor).replace("RW",replaceWith);
	 var rte = currentRTE;
	 stripGuidelines(rte);
	 var oRTE = returnRTE(rte);
	 var tmpContent = oRTE.document.body.innerHTML.replace("'", "\'").replace('"', '\"');
	 var strRegex;
	 if (matchCase && wholeWord) {
	    strRegex = "/(?!<[^>]*)(\\b(" + searchFor + ")\\b)(?![^<]*>)/g";
	 }
	 else if (matchCase) {
	    strRegex = "/(?!<[^>]*)(" + searchFor + ")(?![^<]*>)/g";
	 }
	 else if (wholeWord) {
	    strRegex = "/(?!<[^>]*)(\\b(" + searchFor + ")\\b)(?![^<]*>)/gi";
	 } else {
	    strRegex = "/(?!<[^>]*)(" + searchFor + ")(?![^<]*>)/gi";
	 }
	 var cmpRegex=eval(strRegex);
	 var runCount = 0;
	 var tmpNext = tmpContent;
	 var intFound = tmpNext.search(cmpRegex);
	 while(intFound > -1) {
	    runCount = runCount+1;
	    tmpNext = tmpNext.substr(intFound + searchFor.length);
	    intFound = tmpNext.search(cmpRegex);
	 }
	 if (runCount > 0) {
	    cfrmMsg = cfrmMsg.replace("[RUNCOUNT]",runCount);
	    if(confirm(cfrmMsg)) {
	       tmpContent=tmpContent.replace(cmpRegex,replaceWith);
	       oRTE.document.body.innerHTML = tmpContent.replace("\'", "'").replace('\"', '"');
	    } else {
	     alert(lblSearchAbort);
	  }
	    showGuidelines(rte);
	 }
	 else {
	   showGuidelines(rte);
	    alert("["+searchFor+"] "+lblSearchNotFound);
	 }
}
		
function showHideElement(element, showHide, rePosition){
	//function to show or hide elements
	//element variable can be string or object
	if(document.getElementById(element)){
		element = document.getElementById(element);
	}
	if(showHide == "show"){
		element.style.visibility = "visible";
		if(rePosition){
			element.style.position = "relative";
			element.style.left = "auto";
			element.style.top = "auto";
		}
	}else if(showHide == "hide"){
		element.style.visibility = "hidden";
		if(rePosition){
				element.style.position = "absolute";
				element.style.left = "-1000px";
				element.style.top = "-1000px";
		}
	}
}

function getRange(rte){
	var oRTE = returnRTE(rte);
	var rng;
	if(document.all){
		var selection = oRTE.document.selection;
		if(selection != null) rng = selection.createRange();
	}else{
		var selection = oRTE.getSelection();
		rng = selection.getRangeAt(selection.rangeCount - 1).cloneRange();
	}
	return rng;
}

function setRange(rte){
	rng = getRange(rte);
}



function stripHTML(strU) {
	//strip all html
	var strN = strU.replace(/(<([^>]+)>)/ig,"");
	//replace carriage returns and line feeds
	strN = strN.replace(/\r\n/g," ");
	strN = strN.replace(/\n/g," ");
	strN = strN.replace(/\r/g," ");
	strN = trim(strN);
	return strN;
}

function trim(inputString) {
	if (typeof inputString != "string") return inputString;
	var retValue = inputString;
	var ch = retValue.substring(0, 1);
	while(ch == " "){
	  retValue = retValue.substring(1, retValue.length);
	  ch = retValue.substring(0, 1);
	}
	ch = retValue.substring(retValue.length - 1, retValue.length);
	while(ch == " "){
	  retValue = retValue.substring(0, retValue.length - 1);
	  ch = retValue.substring(retValue.length - 1, retValue.length);
	}
	// Note that there are two spaces in the string - look for multiple spaces within the string
	while (retValue.indexOf("  ") != -1) {
	  // Again, there are two spaces in each of the strings
	  retValue = retValue.substring(0, retValue.indexOf("  ")) + retValue.substring(retValue.indexOf("  ") + 1, retValue.length);
	}
	return retValue; // Return the trimmed string back to the user
}

function showGuidelines(rte) {
	return; // TEMPORARY by Erel
	if(rte.length == 0) rte = currentRTE;
	var oRTE = returnRTE(rte);
	var tables = oRTE.document.getElementsByTagName("table");
	for(var i=0; i<tables.length; i++){
	  if(tables[i].getAttribute("border") == "0"){
	    var trs = tables[i].getElementsByTagName("tr");
	    for(var j=0; j<trs.length; j++){
	      var tds = trs[j].getElementsByTagName("td");
	      for(var k=0; k<tds.length; k++){
					if(j == 0 && k == 0){
			   	  tds[k].style.border = "dashed 1px "+zeroBorder;
					}else if(j == 0 && k != 0){
	  		    tds[k].style.borderBottom = "dashed 1px "+zeroBorder;
						tds[k].style.borderTop = "dashed 1px "+zeroBorder;
						tds[k].style.borderRight = "dashed 1px "+zeroBorder;
	        }else if(j != 0 && k == 0) {
			      tds[k].style.borderBottom = "dashed 1px "+zeroBorder;
					  tds[k].style.borderLeft = "dashed 1px "+zeroBorder;
						tds[k].style.borderRight = "dashed 1px "+zeroBorder;
	        }else if(j != 0 && k != 0) {
	          tds[k].style.borderBottom = "dashed 1px "+zeroBorder;
					  tds[k].style.borderRight = "dashed 1px "+zeroBorder;
		      }
	      }
	    }
	  }
	}
}

function stripGuidelines(rte) {
	return; // TEMPORARY by Erel
	var oRTE = returnRTE(rte);
	var tbls = oRTE.document.getElementsByTagName("table");
	for(var j=0; j<tbls.length; j++) {
	  if(tbls[j].getAttribute("border") == "0") {
	    var tds = tbls[j].getElementsByTagName("td");
	    for(var k=0; k<tds.length; k++) {
	      tds[k].removeAttribute("style");
	    }
	  }
	}
}

function findSize(obj) {
	if(obj.length > 0 && document.all) {
	  obj = frames[obj];
	} else if(obj.length > 0 && !document.all) {
	  obj = document.getElementById(obj).contentWindow;
	} else {
	  obj = this;
	}
	
	if ( typeof( obj.window.innerWidth ) == 'number' ) {
	  //Non-IE
	  obj_width = obj.window.innerWidth;
	  obj_height = obj.window.innerHeight;
	} else if( obj.document.documentElement && ( obj.document.documentElement.clientWidth || obj.document.documentElement.clientHeight ) ) {
	  //IE 6+ in 'standards compliant mode'
	  obj_width = document.documentElement.clientWidth;
	  obj_height = document.documentElement.clientHeight;
	} else if( obj.document.body && ( obj.document.body.clientWidth || obj.document.body.clientHeight ) ) {
	  //IE 4 compatible
	  obj_width = obj.document.body.clientWidth;
	  obj_height = obj.document.body.clientHeight;
	}

}

function resizeRTE() {
	document.body.style.overflow = "hidden";
	var rte = currentRTE;
	var oRTE = document.getElementById(rte);
	var oBut1 = document.getElementById('Buttons1_'+rte);
	var oBut2;
	var oVS = document.getElementById('vs'+rte);
	findSize("");
	width = obj_width;
	if (width < minWidth){
		document.body.style.overflow = "auto";
		width = minWidth;
	}
	var height = obj_height - 83;
	if (document.getElementById("txtSrc"+rte).innerHTML == lblModeRichText) {
		height = obj_height-28;
		if (!document.getElementById('Buttons2_'+rte) && width < wrapWidth) {
			document.body.style.overflow = "auto";
			width = wrapWidth;
		}
		if (document.getElementById('Buttons2_'+rte)) document.getElementById('Buttons2_'+rte).style.width = width;
	} else {
		if (document.getElementById('Buttons2_'+rte)) {
			document.getElementById('Buttons2_'+rte).style.width = width;
		} else {
				height = obj_height - 55;
				if(width < wrapWidth){
					document.body.style.overflow = "auto";
					width = wrapWidth;
				}
		}
	}
	if (document.body.style.overflow == "auto" && isIE) height = height-18;
	if (document.body.style.overflow == "auto" && !isIE) height = height-24;
	oBut1.style.width = width;
	oVS.style.width = width;
	oRTE.style.width = width-2;
	oRTE.style.height = height;
	if(!document.all)oRTE.contentDocument.designMode = "on";
}

function replaceIt(string,text,by) {
	// CM 19/10/04 custom replace function
	var strLength = string.length, txtLength = text.length;
	if ((strLength == 0) || (txtLength == 0)) return string;
	var i = string.indexOf(text);
	if ((!i) && (text != string.substring(0,txtLength))) return string;
	if (i == -1) return string;
	var newstr = string.substring(0,i) + by;
	if (i+txtLength < strLength)
	  newstr += replaceIt(string.substring(i+txtLength,strLength),text,by);
	return newstr;
}

function countWords(rte){
	parseRTE(rte);
	var words = document.getElementById("hdn"+rte).value;
	var totalWordCount = getWordCount(words);
	var selectionWordCount = getWordCount(getSelectionedText(rte));
	
	var chars = trim(words);
	chars = chars.length;
	chars = maxchar - chars;

	var alarm = "";
	if(chars<0) alarm = "\n\n"+lblCountCharWarn;
	
	alert(
		lblCountSelection+": "+selectionWordCount+"\n\n"+
		lblCountTotal+": "+totalWordCount+ "\n\n"+
		lblCountChar+": "+chars+alarm);
}


function getWordCount(words) {
	var str = stripHTML(words);
	str = str+" a ";  // word added to avoid error
	str = str.
		replace(/&nbsp;/gi,' ').
		replace(/([\n\r\t])/g,' ').
		replace(/(  +)/g,' ').
		replace(/&[a-z]*;/gi,' ').      //bug fix by Erel
		replace(/^\s*|\s*$/g,'');
	var count = 0;
	for (x=0;x<str.length;x++) {
	  if (str.charAt(x)==" " && str.charAt(x-1)!=" ") count++;  
	}
	if (str.charAt(str.length-1) != " ") count++;
	count = count - 1; // extra word removed
	return count;
}




function getSelectionedText(rte) {
	var oRTE = returnRTE(rte);
	var txt = '';
	if (oRTE.window && oRTE.window.getSelection) {
		txt = oRTE.window.getSelection();
	}
	else if (oRTE.document.getSelection) {
		txt = oRTE.document.getSelection();
	}
	else if (oRTE.document.selection) {
		txt = oRTE.document.selection.createRange().text;
	}
	return txt.toString();
}


function autoBRon(rte) {
	// CM 19/10/04 used for non RTE browsers to deal with auto <BR> (and clean up other muck)
	var oRTE = document.forms[0].elements[rte];
	oRTE.value=parseBreaks(oRTE.value);
	oRTE.value=replaceIt(oRTE.value,'&apos;','\'');
}

function autoBRoff(rte) {
	// CM 19/10/04 used for non RTE browsers to deal with auto <BR> (auto carried out when the form is submitted)
	var oRTE = document.forms[0].elements[rte];
	oRTE.value=replaceIt(oRTE.value,'\n','<br />');
	oRTE.value=replaceIt(oRTE.value,'\'','&apos;');
}

function parseBreaks(argIn) {
	// CM 19/10/04 used for non RTE browsers to deal with auto <BR> (and clean up other muck)
	argIn=replaceIt(argIn,'<br>','\n');
	argIn=replaceIt(argIn,'<BR>','\n');
	argIn=replaceIt(argIn,'<br/>','\n');
	argIn=replaceIt(argIn,'<br />','\n');
	argIn=replaceIt(argIn,'\t',' ');
	argIn=replaceIt(argIn,'    ',' ');
	argIn=replaceIt(argIn,'   ',' ');
	argIn=replaceIt(argIn,'  ',' ');
	argIn=replaceIt(argIn,'  ',' ');
	argIn=replaceIt(argIn,'\n ','\n');
	argIn=replaceIt(argIn,' <p>','<p>');
	argIn=replaceIt(argIn,'</p><p>','\n\n');
	argIn=replaceIt(argIn,'&apos;','\'');
	return argIn;
}

var getKeys = function(obj){
   var keys = [];
   for(var key in obj){
      keys.push(key);
   }
   return keys;
}

function geckoKeyPress(evt) {
	//function to add bold, italic, and underline shortcut commands to gecko RTEs
	//contributed by Anti Veeranna (thanks Anti!)

	var rte = evt.target.id;
	if (!rte) {	
		return; // can't find the id of the rte
	}
	if (evt.ctrlKey) {
		var char = String.fromCharCode(evt.which);
		var key = char.toLowerCase();
		var cmd = '';
		switch (key) {
			case 'b': case '': rteCommand(rte,"bold",null); break;
			case 'i': case '': rteCommand(rte,"italic",null); break;
			case 'u': case '': rteCommand(rte,"underline",null); break;
			//case 'b': setTagAndClass(rte,"strong"); break;     // breaks containing spans!
			//case 'i': setTagAndClass(rte,"em"); break;         // breaks containing spans!  
			//case 'u': setTagAndClass(rte,"span.u"); break;     // breaks containing spans!
	
			case 'q': case '/': setTagAndClass(rte,"q","psuq"); break;
			case 'p': case '': setTagAndClass(rte,"q","mfrj"); break;
			case 'w': case "'": setTagAndClass(rte,"q"); break;
			case 's': case "": setTagAndClass(rte,"small"); break;

			case 'd': case '': setTagAndClass(rte,"dfn"); break;
			case '0': rteCommand(rte, 'removeformat'); break;
			case '1': setTagAndClass(rte,"h1"); break;
			case '2': setTagAndClass(rte,"h2"); break;
			case '3': setTagAndClass(rte,"h3"); break;
			case '4': setTagAndClass(rte,"h4"); break;
			case '5': setTagAndClass(rte,"h5"); break;
			case '6': setTagAndClass(rte,"h6"); break;
			case 'k': case '': dlgLaunch(rte,"link"); break;
			default: return;
		}
		// if there was a command, stop the event bubble
		evt.preventDefault();
		evt.stopPropagation();
 	}
}

function checkspell() {
	dlgCleanUp();
	//function to perform spell check
	try {
		var tmpis = new ActiveXObject("ieSpell.ieSpellExtension");
		tmpis.CheckAllLinkedDocuments(document);
	}
	catch(exception) {
		if(exception.number==-2146827859) {
			if (confirm("ieSpell not detected.  Click Ok to go to download page."))
				window.open("http://www.iespell.com/download.php","DownLoad");
		} else {
			alert("Error Loading ieSpell: Exception " + exception.number);
		}
	}
}




replacements = new Array (
	//convert all types of single quotes
	new RegExp(String.fromCharCode(145),'g'), "'",
	new RegExp(String.fromCharCode(146),'g'), "'",
	new RegExp("'",'g'), "&#39;",

	//convert all types of double quotes
	new RegExp(String.fromCharCode(147),'g'), "\"",
	new RegExp(String.fromCharCode(148),'g'), "\"",
	//new RegExp("\"",'g'), "&#34;",

	//replace carriage returns & line feeds
	new RegExp("[\r\n]",'g'), " "
);


function rteSafe(html) {
	for (i=0; i<replacements.length; i+=2) {
		html = html.replace(replacements[i], replacements[i+1]);
	}
	return html;
}


/* _script/elements */




function isAlien(a) {
   return isObject(a) && typeof a.constructor != 'function';
}

function isArray(a) {
    return isObject(a) && a.constructor == Array;
}

function isBoolean(a) {
    return typeof a == 'boolean';
}

function isEmpty(o) {
    var i, v;
    if (isObject(o)) {
        for (i in o) {
            v = o[i];
            if (isUndefined(v) && isFunction(v)) {
                return false;
            }
        }
    }
    return true;
}

function isFunction(a) {
    return typeof a == 'function';
}

function isNull(a) {
    return typeof a == 'object' && !a;
}

function isNumber(a) {
    return typeof a == 'number' && isFinite(a);
}

function isObject(a) {
    return (a && typeof a == 'object') || isFunction(a);
}

function isString(a) {
    return typeof a == 'string';
}

function isUndefined(a) {
    return typeof a == 'undefined';
} 



function getFirstElementNamed(theName) {
	theArray = document.getElementsByName(theName);
	if (theArray.length>0)
		return theArray[0].content;
	else
		return null;
}

function getElement(obj) {
	if (isString(obj))
		return document.getElementById(obj);
	else
		return obj;
}


function mark(obj) {	getElement(obj).style.color='green'}
function unmark(obj) {	getElement(obj).style.color=''}



function setdisplay(obj, value) {
	var e = getElement(obj);
	if (!e)
		throw('cant setdisplay of '+obj+' to '+value);
	if (!e.style)  // no style - can't change it
		return;

	if (value=='switch')
		value = (e.style.display=='none'? '': 'none');
	e.style.display = value;
}
function show(obj) {setdisplay(obj,'');}
function hide(obj) {setdisplay(obj,'none');}
function showorhide(obj, value) {
	if (arguments.length==1)
		setdisplay(obj,'switch');
	else if (value)
		setdisplay(obj,'');
	else
		setdisplay(obj,'nonw');
}


function setdisplayGroup(elements, display) {
	for (var i=0; i<elements.length; ++i)
		setdisplay(elements[i], display);
}
function showGroup(n) {setdisplayGroup(n,'')};
function hideGroup(n) {setdisplayGroup(n,'none')};
function showorhideGroup(n) {setdisplayGroup(n,'switch')};


function setdisplayByClass(c, display) {
	var alltags = document.all? document.all: document.getElementsByTagName('*');
	for (i in alltags) {
		obj = alltags[i];
		if (obj.className == c) {
			//alert("setting display of obj");
			setdisplay(obj, display);
		}
	}
}
function showByClass(c) {setdisplayByClass(c,'')};
function hideByClass(c) {setdisplayByClass(c,'none')};
function showorhideByClass(c) {setdisplayByClass(c,'switch')};


function setdisplaySiblings(element, display) {
	var siblings = element.parentNode.childNodes;
	for (var i=0; i<siblings.length; ++i) {
		var child = siblings[i];
		if (child!=element)
			setdisplay(child, display);
	}
}
function showSiblings(n) {setdisplaySiblings(n,'')};
function hideSiblings(n) {setdisplaySiblings(n,'none')};
function showorhideSiblings(n) {setdisplaySiblings(n,'switch')};


function setdisplayByName(n, display) { setdisplayGroup(document.getElementsByName(n)); }
function showByName(n) {setdisplayByName(n,'')};
function hideByName(n) {setdisplayByName(n,'none')};
function showorhideByName(n) {setdisplayByName(n,'switch')};



/* show_only_siblings(obj, delay_milliseconds) - Show only the siblings of the given object, after a delay of "delay" milliseconds */
var object_to_show;
var timeout_id = 0;
function show_only_siblings(obj, delay_milliseconds) {
	object_to_show = obj;
	if (!delay_milliseconds) delay_milliseconds=500;
	if (timeout_id) clearTimeout(timeout_id);
	timeout_id = setTimeout(
		"hideByClass('dor2');showSiblings(object_to_show);",
		delay_milliseconds);
}


var theCurrentLanguage = '';

function showSingleLanguage(l) {
	regexp = new RegExp(l);
	var alltags = document.all? document.all: document.getElementsByTagName('*');
	for (i in alltags) {
		obj = alltags[i];
		if (!obj || isFunction(obj) || !obj.lang) continue;
		if (regexp.test(obj.lang)) {
			obj.style.display='';
		}
		else if (obj.lang.length>0 && obj.tagName!='HTML' && obj.tagName!='BODY' && obj.tagName!='META' && obj.style) 
			obj.style.display='none';
	}
	theCurrentLanguage = l;
}



function activate(obj) {
	if (obj.hiddenText)
		obj.innerHTML=obj.hiddenText;
}
function deactivate(obj) {
	if (obj.innerHTML.length > 0) {
		alert(obj.innerHTML)
		obj.hiddenText = obj.innerHTML;
		obj.innerHTML="";
	}
}


var ContentEditableSupportedCache;
var undefined;
function ContentEditableSupported() {
  if (ContentEditableSupportedCache == undefined) {
    ContentEditableSupportedCache = false;
    document.write("<span id='test' style='line-height:0'>&nbsp;</span>");
    testElement = document.getElementById("test");
    if (testElement != null) {
      if (testElement["contentEditable"] != null) {
        ContentEditableSupportedCache = true;
      }
    }
  }
  return ContentEditableSupportedCache;
}

function makeEditable(theElement, isEditable) {
	if (theElement) {
		theElement.contentEditable=isEditable;
		theElement.className = isEditable? 'edited': '';
	}
}

function AllPropertiesOf(object) {
	result = "<div dir=ltr>";
	for (i in object) {
		if (!/function/.test(object[i]))
			result += ("<br>" + i + ": " + object[i] + "\n");
	} 
	result += "</div>";
	return result;
}

function AllFunctionsOf(object) {
	result = "<div dir=ltr>";
	for (i in object) {
		if (/function/.test(object[i]))
			result += ("<br>" + i + ": " + object[i] + "\n");
	} 
	result += "</div>";
	return result;
}

function bilingual(lang, lang2, tag, he_text, en_text) {
	if (lang2)
		return "<" + tag + " dir='ltr' lang='en'>" + en_text + "</" + tag + ">\n<" + tag + " dir='rtl' lang='he'>" + he_text + "</" + tag + ">\n";
	else {
		theText = (lang=='en'? en_text: he_text);
		if (tag=="div" || tag=="span")          // don't add the tag - it's redundant
			return theText;
		else 
			return "<" + tag + ">" + theText + "</" + tag + ">";
	}
}





function markOnly(theButton) {
	try {
		for (i=1; i<10; ++i)
			unmark('button' + i);
	} catch(e) {}
	mark(theButton);
}

function buttonHTML(id, action, title, description) {
	if (!action || !title) 
		return "<td id='" + id + "'>";
	else {
		action = "markOnly('" + id + "');" + action;
		return "<td id='" + id + "'><button title='" + description.replace(/["]/g,"").replace(/[']/g,"") + "' onclick=\"" + action + "\">" + title + "</button>&nbsp;";
	}
}

function buttonGroup() {
	theText = '<p class="buttons" id="buttons">' + 
		'<table class="buttons"><tr>';
	for (i=0; i<arguments.length; i += 3)
		theText += buttonHTML('button' + (i/3 + 1), arguments[i], arguments[i+1], arguments[i+2]);
	theText += 
		'</table>'+
		'</p>';
	return theText;
}


function addEvent(elm, evType, fn, useCapture)
{
  if (elm.addEventListener){
    elm.addEventListener(evType, fn, useCapture);
    return true;
  } else if (elm.attachEvent){
    var r = elm.attachEvent("on"+evType, fn);
    return r;
  } else {
    alert("Handler could not be removed");
  }
}

/* _script/form_validation */

/**
 * 1. create the validator over a row in your form. this row should have a label, and a method to indicate of errors.
 * 	var my_row = $('div.form_row');
 * 2. Add a validator function, and a parameter which it will receive
 * 	my_row.validation.add(function(field){return !(!(field.value); }, my_row.find('input').get(0));
 * 3. You can get the validation object using my_row.validation.get();
 * 4. To run the validator use my_row.run(); it will return true if valid, false if not valid, and will notify the row of errors.
 */
jQuery.fn.extend({
	// is_v is the validation function, param is its parameter
	validation_unshift : function (is_v, param) {
		var v_arr = this.data("validation");
		if (!v_arr)
			v_arr = new Array();
		v_arr.unshift({'is_v':is_v,'param':param});
		this.data("validation",v_arr);
		return this;
	},
	validation_push : function (is_v, param) {
		var v_arr = this.data("validation");
		if (!v_arr)
			v_arr = new Array();
		v_arr.push({'is_v':is_v,'param':param});
		this.data("validation",v_arr);
		return this;
	},
	validation_clear_errors : function () {
		this.find('label,legend,fieldset').removeClass('wrong').attr('title','').end().find('span.wrong').remove();		
	},
	validation_run : function() {
		var v_arr = this.data("validation");
		this.validation_clear_errors();
		if (!v_arr)
			return true; // No validators
		var l = v_arr.length;
		for (var i = 0; i < l; i++) {
			var v_obj = v_arr[i];
			switch (v_obj.is_v(v_obj.param)) {
				case false: return false; break;
				case 'valid': return true; break;
				// case true: continue 2; break;
			}
		}
		return true;
	}
});

function validator_handler(e) {
	var res = $(this).closest(".row").validation_run();
	if (e && e.type && e.type == 'keypress') 
		res = true; // Don't return false on key press - it will disable keyboard
	else
		if (res) $(this).trigger('field_validated'); // Trigger update in background
	if (!res && e) e.stopImmediatePropagation(); // Enough validators
	return res;
}
function on_submit_form(){
	window.form_cancled = false;
	$('.wrong').removeClass('wrong');
	var form_rows = $(this).find("div.row");
	window.GrowlValidatorSetError = true
	for (var i = 0; i < form_rows.length; i++) {
		if (!$(form_rows[i]).validation_run()) {
			window.form_cancled = true;
			window.GrowlValidatorSetError = false;
			return false;
		}
	}
	window.GrowlValidatorSetError = false;
	return true;
}
function RadioSetError(field, errorMessage) {
    var legend = field.closest('.radio_fieldset').find('p.legend').andSelf().find('legend,fieldset').andSelf(); 
    legend.addClass('wrong');
    legend.attr('title',errorMessage);
    if (window.GrowlValidatorSetError)
		$.jGrowl(errorMessage, {sticky:true});
}
function ValidatorSetError(field, errorMessage, silent) {
	var label = field.closest('div.row').find('label'); 
	silent = (silent == null) ? false : silent;
	label.addClass('wrong');
	label.attr('title',errorMessage);
	label.parents('.category_close').find('h3').trigger('click');
	if (!silent && window.GrowlValidatorSetError) 
		$.jGrowl(errorMessage, {sticky:true});
}
function ValidatorUnsetError(field) {
	field.parents('div.row').find('label,legend,fieldset').removeClass('wrong').attr('title','').end().find('span.wrong').remove();
}
function ValidatePassword(field, errorMessage) {
    if (!field) {
		$.jGrowl(static_text["missing fields"] + errorMessage, {sticky:true});
	    return false;
	}
	var a = field.val();
	if (a.length <= 3 && a.length > 0) {
        ValidatorSetError(field, errorMessage + static_text["password length"]);
        return false;
    }
    return true;
}

function ValidateBirthday (year_field, month_field, day_field, errorMessage, tooYoungMessage, current) {
    var today=new Date();
    if (!year_field || !month_field || !day_field) {
		$.jGrowl(static_text["missing fields"] + errorMessage, {sticky:true});
	    return false;
	}
	var year_val = parseInt(year_field.val());
	var month_val = parseInt(month_field.val());
	var day_val = parseInt(day_field.val());
	if (($(current).attr("name") && !$(current).val())) {
        ValidatorSetError(year_field, errorMessage);
		return false;
	} else if (!year_val || !month_val || !day_val) {
		// If there is a "current" birth_day field - it's probably valid otherwise we would already return by the statement above.
		// If it is valid - then we need a silent error
		ValidatorSetError(year_field, errorMessage);
			return false;
	}
    if((year_val  > today.getFullYear()-18) || 
       (year_val == today.getFullYear()-18 && month_val  > today.getMonth()+1) || 
       (year_val == today.getFullYear()-18 && month_val == today.getMonth()+1 && day_val > today.getDate()))
       {
        ValidatorSetError(year_field, tooYoungMessage);
        return false;
    }
    return true;
}

function ValidateFieldPresent(field, errorMessage) {
	if (!field) {
		return false;
		//$.jGrowl(static_text["missing fields"] + errorMessage, {sticky:true});
		//return false;
	}
	return true;
}

function ValidateInputNotEmpty(field, errorMessage) {
	// If the fields isnt' present, it best that it won't trigger an error otherwise the user couldn't fill in the form.
	if (!ValidateFieldPresent(field, errorMessage) || !field.val)
		return true; 
	if (!field.val()) {
		ValidatorSetError(field, errorMessage);
		return false;
	}
	return true;
}

function ValidateSelect(field, errorMessage) {
    if (!ValidateFieldPresent(field, errorMessage))
        return true;
	if (!field.get(0).selectedIndex) {
	    ValidatorSetError (field, errorMessage);
		return false;
	}
	return true;
}

function ValidateEmail(field) {
	var email = field.val();
	var email_error_message;
	email_error_message = get_email_string_validation_error_message(email);
	if (email && email_error_message) {
		ValidatorSetError (field, email_error_message);
		return false;
	}
	return true;
}

function ValidateEqual(field1, field2, errorMessage) {
    if (!ValidateFieldPresent(field1, errorMessage))
        return false; 
    if (!ValidateFieldPresent(field2, errorMessage))
        return false; 
	if (field1.val() != field2.val()) {
	    ValidatorSetError (field2, errorMessage);
		return false;
	}
	return true;
}

function ValidateChecked(field, errorMessage) {
	if (field.attr("disabled"))
		return true;
		
    if (!ValidateFieldPresent(field, errorMessage))
        return false; 
	if (!field.filter(':checked').length) {
	    ValidatorSetError (field, errorMessage);
		return false;
	}
	return true;
}

function ValidateRadioChecked(field, errorMessage) {
	if (!field.filter(':checked').length) {
	    RadioSetError (field, errorMessage);
		return false;
	}
	return true;
}

function ValidateAllOrNone(fields, errorMessage) {
/*
	for (var i=0; i<fields.length; ++i) {

	}
	return true;
*/
}

function ValidateNotEmpty(field, fieldName, youForgotLabel) {
	if (!youForgotLabel)
		youForgotLabel = sprintf(static_text["you forgot"],fieldName);
	return ValidateInputNotEmpty(field, youForgotLabel + fieldName + ".");
}

function ValidateAllNotEmpty(theForm, youForgotLabel) {
	var all_ok = true;
	for (var i=1; i<arguments.length; ++i) {
		fieldInternalName = arguments[i];
		fieldName = fieldInternalName.replace(/_/g," ");
	    all_ok = all_ok && ValidateNotEmpty(theForm[fieldInternalName], fieldName, youForgotLabel);
	}
    return all_ok;
}


/**
 * @see admin/make_js.php (relevant_properties)
 * @see email_validation_system.php get_email_string_validation_error_message()
 */
function get_email_string_validation_error_message(email_address) {
	var forbidden_chars = {
		"comma": ",", 
		"semicolon": ";",  
		"space": " ", 
		"quote": "\"", 
		"apostrophe": "\'",
		"greater_than": ">",
		"less_than": "<"
		};
	var forbidden_leading_chars = {
		"dot": ".",
		"at_sign": "@"
		};
	var forbidden_trailing_chars = forbidden_leading_chars;

	if (!email_address)
		return static_text["missing fields"];

	message = sprintf(static_text["email invalid"],email_address);
	if (email_address.indexOf('@') == -1) {
		return message + static_text["email invalid no at"];
	}

	for (var bad_char in forbidden_chars) {
		if (email_address.indexOf(forbidden_chars[bad_char]) > -1) {
			return message + sprintf(static_text["email invalid forbidden char"],static_text[bad_char],forbidden_chars[bad_char]);
		}
	}

	for (var bad_char in forbidden_leading_chars) {
		if (email_address.charAt(0) == forbidden_leading_chars[bad_char]) {
			return message + sprintf(static_text["email invalid forbidden leading char"],static_text[bad_char],forbidden_leading_chars[bad_char]);
		}
	}

	for (var bad_char in forbidden_trailing_chars) {
		if (email_address.charAt(email_address.length-1) == forbidden_trailing_chars[bad_char]) {
			return message + sprintf(static_text["email invalid forbidden trailing char"],static_text[bad_char],forbidden_trailing_chars[bad_char]);
		}
	}

	return "";
}

/* _script/fields */



var lang = document.body && document.body.lang? document.body.lang: 'he';


var title_without_quotes = document.title.replace(/["]/g,"").replace(/[']/g,"");

var submitLabel = (lang=='en'? "submit": "");
var saveLabel =   (lang=='en'? "[s]ave changes": " ");
var undoLabel =   (lang=='en'? "return to the non-formal version": "   - ");
var formatLabel =   (lang=='en'? "match destination formatting": "  ");
var versionsLabel =   (lang=='en'? "show former versions": "  ");

var nameLabel = (lang=='en'? 'user name': ' ');
var passwordLabel = (lang=='en'? 'password': '');
var subjectLabel = (lang=='en'? 'subject': '');
var youForgotLabel = (lang=='en'? 'You forgot to fill in the ': '  '); // for ValidateNotEmpty
var authorLabel = (lang=='en'? 'Author - if different than username': '  -    /');


function setCookies (name, email, rememberme, password) {
   if (name) setCookie('name',name.value,365,"/",null,null);   // remember the name and email for a year
   if (email) {setCookie('email',email.value, 365,"/",null,null);} // remember the name and email for a year
   if (rememberme && rememberme.checked && password) {
      setCookie('password',password.value,null,"/",null,null); // remember the password only for this session
   }
   else {
      deleteCookie('password',"/");
   }
}



titleInputHidden = '<input type="hidden" name="title" value="'+title_without_quotes+'">' + 
             '<input type="hidden" name="titlechanged" value="">';
languageInputHidden = '<input type="hidden" name="lang" value="' + lang + '">';



titleInputVisible = '<input type="text" disabled="disabled" name="title" size="50" value="" />';

authorInputVisible = '<p>' + authorLabel + ': <input type="text" name="author" size="50" value="" />' + '</p>';

languageInputVisible = '<select size=1 name="lang">' + 
	(lang=='en'? 
		'<option value="en" selected="selected">English' + '<option value="he">' : 
		'<option value="he" selected="selected">' + '<option value="en">English'  ) + 
	'</select>&nbsp;';

	
function bodyclass_title(the_bodyclass_text, the_bodyclass) {
	if (the_bodyclass_text == ' ')
		alert(':       ,         ,   !');
	
	if (the_bodyclass == 'new')
		return '';
	else
		return the_bodyclass_text + 
		(lang=='en'? ": ": " : ") +
		title_without_quotes;
}

bodyclassInput = '<select size="1" name="bodyclass" onchange="theAddForm.lang.selectedIndex=0; if (selectedIndex>0) {this.form.title.value=bodyclass_title(options[selectedIndex].text, options[selectedIndex].value); this.form.title.disabled=false;}">' + 
  '<option value="" selected="selected">' + (lang=='en'? '* add what? *': '*  ? *') + 
'</select>';

bodyclassInput_short = '<input type="hidden" name="bodyclass" value="short">';


function validate(theForm) {
	if (
		/*ValidateNotEmpty(theForm.username, nameLabel, youForgotLabel) &&*/
		ValidateNotEmpty(theForm.title, subjectLabel, youForgotLabel) &&
		/*(!passwordIsRequired || ValidateNotEmpty(theForm.password, passwordLabel, youForgotLabel))*/
		1
		) {
			setCookies (theForm.username, theForm.email, theForm.rememberme, theForm.password); 
			return true;
	}
	else 
		return false;
}

function formHeader(formId, target, action) {
	if (!action)
		action = path_from_document_to_root + '_script/rewrite.php?to=add';
	theHeader = "<form method='post' id='" + formId + "'" +
		" enctype='multipart/form-data'" +
		(target? " target='" + target + "'": "") +
		" action='" + action + "'" +
		" onsubmit='return validate(this)'>" + 
		"\n";
	return theHeader;
}


function idFields(path_from_root_to_document,usernameHint,passwordHint,emailHint) {
	theText =  
	'<table>\n'+
	'<tr>' + 
		'<td><label>' + (lang=='en'? 'user n<u>a</u>me:': '<u></u> :') + '</label>' + 
		'<td><input type="text" name="username" accesskey="a" value="' +  getCookie('name') +  '" size="50">' + 
		'<br /><small>' + usernameHint + '</small>' +
	'<tr>' + 
		'<td><label>' + (lang=='en'? "<u>p</u>assword:": ":") + '</label>' + 
	 	'<td><input accesskey="p" type="password" name="password" value="' + getCookie('password') + '">' + 
		'<br /><small>' + passwordHint + '</small>' +
	(emailHint==undefined? "": 
	'<tr>' +
		'<td><label>' + (lang=='en'? "<u>e</u>mail / published at:": " /  :") + '</label>' + 
		'<td><input accesskey="e" type="text" name="email" value="' + getCookie('email') + '" size="50">' + 
		'<br /><small>' + emailHint + '</small>') +
	'<tr>' + 
		'<td style="text-align:left"><input accesskey="k" name="rememberme" type="checkbox"' + (getCookie('name')? ' checked="checked"': '') + '>' + 
		'<td><label>' + (lang=='en'? "<u>k</u>eep my details on this computer": "   <u></u>    (   )") + '</label>' + 
		'' + 
	'<input type="hidden" name="followup" value='+path_from_root_to_document+'>'+
	'<input type="hidden" name="file" value='+path_from_root_to_document+'>'+
	"</table>\n";
	return theText;
	// both "followup" and "file" are sent - to handle Holam bug in MSIE
}


function idFields_short(path_from_root_to_document) {
	theText =  
	'<input type="hidden" name="username" value="-">'+
	'<input type="hidden" name="password" value="-">'+
	'<input type="hidden" name="followup" value='+path_from_root_to_document+'>'+
	/*'Additional info (optional): <input type="text" name="email" value="">' + */
	'<input type="hidden" name="file" value='+path_from_root_to_document+'>';
	return theText;
}


/* _script/arguments */




var path_from_root_to_document, theAuthor, theReceiver, theTvnit;
if (document.getElementsByName) {
	path_from_root_to_document = getFirstElementNamed('jmQovc');
	theAuthor = getFirstElementNamed('author');
	theReceiver = getFirstElementNamed('receiver');
	theTvnit = getFirstElementNamed('tvnit');
	theLang2 = getFirstElementNamed('lang2');
}
else if (document.all) {
	path_from_root_to_document = document.all.jmQovc.content;
	theAuthor = document.all.author.content;
	theReceiver = document.all.receiver.content;
	theTvnit = document.all.tvnit.content;
	theLang2 = document.all.lang2.content;
}
else {
	path_from_root_to_document = window.location.href.replace(/^.*:\/\/\/?[^\/]*\/(.*)[.][^.]*$/, "$1");
	theAuthor = "";
	theReceiver = "";
	theTvnit = "";
	theLang2 = "";
}








/* _script/sites */


var server = "http://tora.us.fm/";

var relative_depth=0;
for (i=0; i<path_from_root_to_document.length; ++i) {
	if (path_from_root_to_document.charAt(i)=='/') relative_depth++;
}

var path_from_document_to_site = '';
for (i=1; i<relative_depth; ++i) {
	path_from_document_to_site += '../';
}

function fileparse(theFullPath) {
	hasDirectory = /[\/\\]/.test(theFullPath);
	hasExtension = /\.[^\/\\\.]*$/.test(theFullPath);
	if (hasDirectory && hasExtension)
		return /^(.*)[\/\\]([^\/\\]*)(\.[^\/\\\.]*)$/.exec(theFullPath);
	else if (hasDirectory && !hasExtension)
		return /^(.*)[\/\\]([^\/\\]*)()$/.exec(theFullPath);
	else if (!hasDirectory && hasExtension)
		return /^()(.*)(\.[^\/\\\.]*)$/.exec(theFullPath);
	else
		return /^()(.*)()$/.exec(theFullPath);
}

var site, path_from_site_to_document, path_from_document_to_document, siomt;
path_components = /^([^\/\\]*)\/(.*)$/.exec(path_from_root_to_document);
if (path_components) {
	site = path_components[1];
	path_from_site_to_document = path_components[2];
	path_components = fileparse(path_from_root_to_document);
	path_from_document_to_document = path_components[2] + path_components[3];
	siomt = path_components[3]? "": ".html";
} else {
	site = "";
	path_from_site_to_document = path_from_root_to_document;
	path_from_document_to_document = path_from_root_to_document;
	siomt = ".html";
}

var absolute_site_url = server + site;
var absolute_document_url = absolute_site_url + "/" + path_from_site_to_document + siomt;

var path_from_site_to_cgi = "../cgi-bin";
var filepath_from_cgi_to_site = (/localhost|127.0.0.1/.test(document.URL))? "../"+site : "../httpdocs/"+site;
var linkpath_from_cgi_to_site = "../"+site;
var path_from_document_to_cgi = path_from_document_to_site + path_from_site_to_cgi;


var passwordIsRequired = false;
var site_name, usernameHint, passwordHint, emailHint;
if (document.body.lang=='en') {
	site_name='site';
	usernameHint = '';
	passwordHint = '(If you leave blank, your changes will enter a non-formal version)';
	emailHint = '(optional)';
}
else {
	site_name='';
	usernameHint = '';
	passwordHint = '(   ,   .      )';
	emailHint = '(  )';
}

if (site=='tnk1') {
	site_name='  ';
	passwordHint = '(   ,    3    ,  .  ,      )';
	passwordIsRequired = true;
}
else if ((site=='nxt') || (site=='~nachat')) {
	site_name='   ';
}
else if (site=='tokxot')
	site_name='  ';
else if (site=='limudim')
	site_name='    ';
else if (site=='fuelcell')
	site_name='      ';
else if (site=='js')
	site_name='Javascript Algorithm Encyclopedia';
else if (site=='tryg')
	site_name='  ';
else if (site=='erelsgl')
	site_name='   ';
else if (site=='levisegal') {
	passwordIsRequired = true;
	site_name='  --';
}
else if (site=='dugma') {
	usernameHint = '(  ,    "")';
	passwordHint = '(  ,    "")';
	passwordIsRequired = true;
	site_name=' ';
}
else if (site=='demo') {
	usernameHint = '(for the demo site, use "admin")';
	passwordHint = '(for the demo site, use "admin")';
	passwordIsRequired = true;
	site_name='English Demonstration site';
}


/* _script/dates/dates */


var sunsetMinuteOfDayGMT = new Array(12);
sunsetMinuteOfDayGMT[0] = 15*60 + 1;
sunsetMinuteOfDayGMT[1] = 15*60 + 28;
sunsetMinuteOfDayGMT[2] = 15*60 + 49;
sunsetMinuteOfDayGMT[3] = 16*60 + 9;
sunsetMinuteOfDayGMT[4] = 16*60 + 30;
sunsetMinuteOfDayGMT[5] = 16*60 + 48;
sunsetMinuteOfDayGMT[6] = 16*60 + 49;
sunsetMinuteOfDayGMT[7] = 16*60 + 26;
sunsetMinuteOfDayGMT[8] = 15*60 + 50;
sunsetMinuteOfDayGMT[9] = 15*60 + 11;
sunsetMinuteOfDayGMT[10] = 14*60 + 44;
sunsetMinuteOfDayGMT[11] = 14*60 + 40;


function isShabbat() {
	now = new Date();
	currentWeekday = now.getDay()+1;
	currentMinuteOfDayGMT = now.getHours()*60 + now.getMinutes() + now.getTimezoneOffset();
	meanSunsetMinuteOfDayGMT = sunsetMinuteOfDayGMT[now.getMonth()];
	return (currentWeekday==6 && currentMinuteOfDayGMT>meanSunsetMinuteOfDayGMT) ||
	       (currentWeekday==7 && currentMinuteOfDayGMT<meanSunsetMinuteOfDayGMT);
	return weekday;
}


/* _script/templates */





var theBnim, theBnimArray, theWrittenBnim;  
function AnalyzeBnim() {  // called from  a <script> block afterwards
	//start = new Date();
	theBnim = document.getElementById('ulbnim');
	theBnimArray = theBnim.innerHTML.replace(/<\/li>/ig,"").split(/<li>/i);
	if (theBnimArray[0].length<10)  {
		theBnimArray.shift();
	}
	theWrittenBnim = new Array(theBnimArray.length);
	theBnim.style.display = 'none';
}

var theBnimHash;
function CreateHash() {
	theBnimHash = new Array();
	theRegexp = new RegExp("^((<a[^<>]*>)?)([^<>]*?)([0-9-]+:)((.|\r|\n)*)$");

	for (var i=theBnimArray.length-1; i>=0; --i) {
		bn = theBnimArray[i];
		parts = theRegexp.exec(bn);
		if (parts!=null) {
			psuq = parts[4];
			rest = parts[1] + parts[3] + parts[5];
		}
		else {
			psuq = 0;
			rest = bn;
		}
		
		if (! theBnimHash[psuq] ) {
			theBnimHash[psuq] = new Array();
		}
		theBnimHash[psuq].push(i);
		theBnimArray[i] = rest;
	}
	
}


function replace_type_with_typeimage(bn) {
   if (site=='tnk1')
      return bn.
            replace(/ : /, ": ").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/tw.gif>").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/srt.gif>").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/storybook.gif>").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/games.gif>").
            replace(/:/, "").
            replace(/ :/, "").
            replace(/ :/, "").
            replace(/ :/, "<img title='' src="+path_from_document_to_site+"_themes/ein_knisa.gif> :").
            replace(/:/, "").
            replace(/:/, "").
            replace(/:/, "").
            replace(/:/, "").
            replace(/  :/, "<img title=' ' src="+path_from_document_to_site+"_themes/jtil.gif> ").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/jtil.gif> ").
            replace(/:/, "<img title='' src="+path_from_document_to_site+"_themes/mcwa.gif> ").
            replace(/:/, "");
   else
      return bn;
}

function ktov_bnim(header, pattern, footer) {
   var regexp = new RegExp(pattern,"i");
   var regexp1 = new RegExp(">"+pattern, "i");
   var regexp2 = new RegExp("^"+pattern, "i");
   var theText = "";
   var numWritten = 0;
   for (i=0; i<theBnimArray.length; ++i) {
      var bn = theBnimArray[i];
      if (regexp1.test(bn) || regexp2.test(bn)) {
        if (/href/.test(bn) || !/: -/.test(bn)) {
          if (numWritten==0) theText += header;
          if (!/img/i.test(bn)) {
            theText += "<li>";
            bn = bn.replace(//, "<img title='' src="+path_from_document_to_site+"_themes/cyur.gif>");
          }
          bn = replace_type_with_typeimage(bn).replace(regexp,"");

          theText += bn + "</li>";
          ++numWritten;
          theWrittenBnim[i] = 1;
	}
      }
   }
   if (numWritten>0) theText += footer;
   document.write(theText);
}


function ktov_bnim_axrim(header, footer) {
   if (!header) header=""; 
   if (!footer) footer="";
   theText = "";
   numWritten = 0;
   for (i=0; i<theBnimArray.length; ++i) {
      if (!theWrittenBnim[i]) {
        bn = theBnimArray[i];
        if (/href/.test(bn) || !/: -/.test(bn)) {
          if (numWritten==0) theText += header;
          theText += ("<li>"+replace_type_with_typeimage(bn));
          ++numWritten;
        }
     }
   }
   if (numWritten>0) theText += footer;
   document.write(theText);
}

function ktov_bnim_tnk() {
	ktov_bnim('', ':', ' ');
	document.write (
			"<ol class='awsp_mpwrt'>");
				ktov_bnim('', ':', ' ');
				ktov_bnim('', ':', ' ');
	document.write (
			"</ol>");
					ktov_bnim('<h2></h2> <ol class="awsp_mpwrt"> ', '(|||||||||):', ' </ol>');
					ktov_bnim('<h2>  </h2> <ol class="awsp_mpwrt"> ', '( ||||):', ' </ol>');
					ktov_bnim('<h2> </h2> <ol class="awsp_mpwrt"> ', ':', ' </ol>');
					ktov_bnim('<h2>   </h2> <ol class="awsp_mpwrt"> ', '(  |  |):', ' </ol>');
	document.write ("<br style='clear:all' />");
}



function ktov_bnim_jorj() {
	hide(theBnim);
	ktov_bnim('', '_[^<>]*:', '');
	document.write (
		"<div class='tt_jorjim'>");
			ktov_bnim('<ul> ', '(||):', ' </ul>');
			ktov_bnim('<ul> ', '([^<>]*[^<>]*):', ' </ul>');
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
	document.write (
		"</div>" + 

		"<table class='milim_mjorj'><thead><col><col></thead><tbody>" + 
		"<tr><td>");
			ktov_bnim('<h3>  \'</h3> <ul> ', '1:', ' </ul>');
			ktov_bnim('<h3>  </h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3></h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3></h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
			ktov_bnim('', '[^<>]*[^<>]*:', '');
	document.write (
		"<td>");
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
			ktov_bnim('<h3> </h3> <ul> ', ':', ' </ul>');
	document.write (
		"</table>" + 
		"<table class='mamrim_mjorj'><thead><col><col></thead><tbody>" + 
		"<tr><td>");
			ktov_bnim('<h2></h2> <ul> ', ':', ' </ul>');
			ktov_bnim('<h2></h2> <ul> ', ':', ' </ul>');
	document.write (
		"<td>");
			ktov_bnim('<h2> </h2> <ul> ', '1:', ' </ul>');
			ktov_bnim('<h2></h2> <ul> ', '(||  |  | ):', ' </ul>');
	document.write (
		"</table>");
			ktov_bnim('<h3 id=bituy></h3> <ul> ', '[^<>]*[^<>]*:', ' </ul>');
	document.write ("<br style='clear:all' />");
}


function ktov_bnim_mcwa() {
	ktov_bnim("<div class='pswqym'> <h2></h2> <ul> ", ":", " </ul> </div>");
	ktov_bnim("<div class='femym'> <h2></h2> <ul> ", ":", " </ul> </div>");
	ktov_bnim("<div class='hgdrwt'> <h2> </h2> <ul> ", "(|):", " </ul> </div>");
	ktov_bnim("<div class='drkym'> <ul> ", ":", " </ul> </div>");
	ktov_bnim("<div class='sywwgym'> <h2>  (   )</h2> <ul> ", ":", " </ul> </div>");
}

function ktov_bnim_mcwot(tdirut) {
	ktov_bnim("", ":", "");
	
	document.write(
		"<table width='100%'>" + 
		"<tbody>" + 
		"<tr>" + 
		
		"<td class='drkym'>");
		ktov_bnim("<h2>   </h2> <ol class='TableSublists'>",
			":"," </ol>");

	document.write(
		"<td class='mcwwt'>");
		
	if (tdirut == 'erua') {
		ktov_bnim("<h2>     </h2> <ol class='TableSublists'>", 
			"(_|||_|_):", "</ol>");
		ktov_bnim("<h2>      </h2> <ol class='TableSublists'>",
			"(_|_|_):","</ol>");
		ktov_bnim("<h2>      </h2> <ol class='TableSublists'>",
			"_:","</ol>");
		ktov_bnim("<h2> </h2> <ol class='TableSublists'>",
			"(_|_):", " </ol>");
	}
	else if (tdirut == 'rcon') {
		ktov_bnim("<h2>      </h2> <ol class='TableSublists'>", 
			"(_|||_):", "</ol>");
		ktov_bnim("<h2>      </h2> <ol class='TableSublists'>",
			"(_|_|_):","</ol>");
		ktov_bnim("<h2>     </h2> <ol class='TableSublists'>",
			"(_|_):", "</ol>");
		ktov_bnim("<h2> </h2> <ol class='TableSublists'>",
			"(_|_):", " </ol>");
	}
	else if (tdirut == 'ecm') {
		ktov_bnim("<h2>      /  </h2> <ol class='TableSublists'>", 
			"(_|||_|_|_):", "</ol>");
		ktov_bnim("<h2>      </h2> <ol class='TableSublists'>",
			"_:","</ol>");
		ktov_bnim("<h2>     </h2> <ol class='TableSublists'>",
			"(_|_):", "</ol>");
		ktov_bnim("<h2> </h2> <ol class='TableSublists'>",
			"(_|_):", " </ol>");
	}
	else if (tdirut == 'mcwot') {
		ktov_bnim("<h2> </h2> <ol class='TableSublists'>", 
			"(_|||_|_|_|_|_|_|_):", "</ol>");
		ktov_bnim("<h2>   </h2> <ol class='TableSublists'>",
			"_:", " </ol>");
	}
	else /*if (tdirut == 'mcwot1')*/ {
		ktov_bnim("<ol class='TableSublists'>", 
			"(_|||_|_|_|_|_|_|_|_):", "</ol>");
	}

	document.write(
		"</table>" + 
		"<table width='100%'>" + 
		"<col width='*'>" + 
		"<tbody>" + 
		"<tr>" + 
		"<td class='qyjwrym'>");

		ktov_bnim_axrim("<h2>,  </h2> <ol class='TableSublists'>",
			"</ol>");
	document.write(
		"</table>");
}




/* _script/magrim */

var magrim_root = path_from_document_to_root + "tnk1/_magr/";
function table_link_item(table_name, table_description) {
	return "<li>" +
		"<b>" + table_name + "</b> (" +
		"<a href='" + magrim_root + table_name + ".sql'></a>, " +
		"<a href='" + magrim_root + table_name + ".txt'></a>): " +
		table_description +
		"</li>\n";
}
function show_table(table_name, table_description) {
	document.write(table_link_item(table_name, table_description));
}

function mdb_table_link_item(table_name, table_description) {
	return "<li>" +
		"<b>" + table_name + "</b> (" +
		"<a href='" + path_from_document_to_root + "tnk1/_mdb/" + table_name +  ".txt'></a>; <small>     </small>): " +
		table_description +
		"</li>\n";
}
function show_mdb_table(table_name, table_description) {
	document.write(mdb_table_link_item(table_name, table_description));
}

function show_table_warning() {
	document.write("<li>!     ( 2 &quot;).       ,         .           .       &quot;&quot;." + 
	"</li>\n" + 
	"<li>     1255,   utf-8.       ,    ." + 
	"</li>\n");
}


/* http://www.google.com/friendconnect/script/friendconnect.js */

window.google = window["google"] || {};google.friendconnect = google.friendconnect_ || {};if (!window['__ps_loaded__']) {/*http://www-a-fc-opensocial.googleusercontent.com/gadgets/js/rpc:core.util.js?c=1*/
window['___jsl'] = window['___jsl'] || {};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"}});window['___jsl']=window['___jsl']||{};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"}});
/* [start] feature=taming */
var safeJSON=window.safeJSON;
var tamings___=window.tamings___||[];
var bridge___;
var caja___=window.caja___;
var ___=window.___;;

/* [end] feature=taming */

/* [start] feature=gapi-globals */
var gapi=window.gapi||{};gapi.client=window.gapi&&window.gapi.client||{};
;
;

/* [end] feature=gapi-globals */

/* [start] feature=globals */
var gadgets=window.gadgets||{},shindig=window.shindig||{},osapi=window.osapi=window.osapi||{},google=window.google||{};
;
;

/* [end] feature=globals */

/* [start] feature=core.config.base */
window['___cfg'] = window['___cfg'] || window['___gcfg'];;
if(!window.gadgets["config"]){gadgets.config=function(){var f;
var h={};
var b={};
function c(j,l){for(var k in l){if(!l.hasOwnProperty(k)){continue
}if(typeof j[k]==="object"&&typeof l[k]==="object"){c(j[k],l[k])
}else{j[k]=l[k]
}}}function i(){var j=document.scripts||document.getElementsByTagName("script");
if(!j||j.length==0){return null
}var m;
if(f.u){for(var k=0;
!m&&k<j.length;
++k){var l=j[k];
if(l.src&&l.src.indexOf(f.u)==0){m=l
}}}if(!m){m=j[j.length-1]
}if(!m.src){return null
}return m
}function a(j){var k="";
if(j.nodeType==3||j.nodeType==4){k=j.nodeValue
}else{if(j.innerText){k=j.innerText
}else{if(j.innerHTML){k=j.innerHTML
}else{if(j.firstChild){var l=[];
for(var m=j.firstChild;
m;
m=m.nextSibling){l.push(a(m))
}k=l.join("")
}}}}return k
}function e(k){if(!k){return{}
}var j;
while(k.charCodeAt(k.length-1)==0){k=k.substring(0,k.length-1)
}try{j=(new Function("return ("+k+"\n)"))()
}catch(l){}if(typeof j==="object"){return j
}try{j=(new Function("return ({"+k+"\n})"))()
}catch(l){}return typeof j==="object"?j:{}
}function g(n){var p=window.___cfg;
if(p){c(n,p)
}var o=i();
if(!o){return
}var k=a(o);
var j=e(k);
if(f.f&&f.f.length==1){var m=f.f[0];
if(!j[m]){var l={};
l[f.f[0]]=j;
j=l
}}c(n,j)
}function d(o){for(var l in h){if(h.hasOwnProperty(l)){var n=h[l];
for(var m=0,k=n.length;
m<k;
++m){o(l,n[m])
}}}}return{register:function(l,k,j,m){var n=h[l];
if(!n){n=[];
h[l]=n
}n.push({validators:k||{},callback:j,callOnUpdate:m})
},get:function(j){if(j){return b[j]||{}
}return b
},init:function(k,j){f=window.___jsl||{};
c(b,k);
g(b);
var l=window.___config||{};
c(b,l);
d(function(q,p){var o=b[q];
if(o&&!j){var m=p.validators;
for(var n in m){if(m.hasOwnProperty(n)){if(!m[n](o[n])){throw new Error('Invalid config value "'+o[n]+'" for parameter "'+n+'" in component "'+q+'"')
}}}}if(p.callback){p.callback(b)
}})
},update:function(k,p){var o=(window.gapi&&window.gapi["config"]&&window.gapi["config"]["update"]);
if(!p&&o){o(k)
}var n=[];
d(function(q,j){if(k.hasOwnProperty(q)||(p&&b&&b[q])){if(j.callback&&j.callOnUpdate){n.push(j.callback)
}}});
b=p?{}:b||{};
c(b,k);
for(var m=0,l=n.length;
m<l;
++m){n[m](b)
}}}
}()
}else{gadgets.config=window.gadgets["config"];
gadgets.config.register=gadgets.config.register;
gadgets.config.get=gadgets.config.get;
gadgets.config.init=gadgets.config.init;
gadgets.config.update=gadgets.config.update
};;

/* [end] feature=core.config.base */

/* [start] feature=core.log */
gadgets.log=(function(){var e=1;
var a=2;
var f=3;
var c=4;
var d=function(i){b(e,i)
};
gadgets.warn=function(i){b(a,i)
};
gadgets.error=function(i){b(f,i)
};
gadgets.debug=function(i){};
gadgets.setLogLevel=function(i){h=i
};
function b(k,i){if(k<h||!g){return
}if(k===a&&g.warn){g.warn(i)
}else{if(k===f&&g.error){try{g.error(i)
}catch(j){}}else{if(g.log){g.log(i)
}}}}d.INFO=e;
d.WARNING=a;
d.NONE=c;
var h=e;
var g=window.console?window.console:window.opera?window.opera.postError:undefined;
return d
})();;
;

/* [end] feature=core.log */

/* [start] feature=gapi.util-globals */
gapi.util=window.gapi&&window.gapi.util||{};
;

/* [end] feature=gapi.util-globals */

/* [start] feature=core.config */
(function(){gadgets.config.EnumValidator=function(d){var c=[];
if(arguments.length>1){for(var b=0,a;
(a=arguments[b]);
++b){c.push(a)
}}else{c=d
}return function(f){for(var e=0,g;
(g=c[e]);
++e){if(f===c[e]){return true
}}return false
}
};
gadgets.config.RegExValidator=function(a){return function(b){return a.test(b)
}
};
gadgets.config.ExistsValidator=function(a){return typeof a!=="undefined"
};
gadgets.config.NonEmptyStringValidator=function(a){return typeof a==="string"&&a.length>0
};
gadgets.config.BooleanValidator=function(a){return typeof a==="boolean"
};
gadgets.config.LikeValidator=function(a){return function(c){for(var d in a){if(a.hasOwnProperty(d)){var b=a[d];
if(!b(c[d])){return false
}}}return true
}
}
})();;

/* [end] feature=core.config */

/* [start] feature=core.util.base */
gadgets.util=gadgets.util||{};
(function(){gadgets.util.makeClosure=function(d,f,e){var c=[];
for(var b=2,a=arguments.length;
b<a;
++b){c.push(arguments[b])
}return function(){var g=c.slice();
for(var k=0,h=arguments.length;
k<h;
++k){g.push(arguments[k])
}return f.apply(d,g)
}
};
gadgets.util.makeEnum=function(b){var c,a,d={};
for(c=0;
(a=b[c]);
++c){d[a]=a
}return d
}
})();;

/* [end] feature=core.util.base */

/* [start] feature=core.util.dom */
gadgets.util=gadgets.util||{};
(function(){var c="http://www.w3.org/1999/xhtml";
function b(f,e){var h=e||{};
for(var g in h){if(h.hasOwnProperty(g)){f[g]=h[g]
}}}function d(g,f){var e=["<",g];
var i=f||{};
for(var h in i){if(i.hasOwnProperty(h)){e.push(" ");
e.push(h);
e.push('="');
e.push(gadgets.util.escapeString(i[h]));
e.push('"')
}}e.push("></");
e.push(g);
e.push(">");
return e.join("")
}function a(f){var g="";
if(f.nodeType==3||f.nodeType==4){g=f.nodeValue
}else{if(f.innerText){g=f.innerText
}else{if(f.innerHTML){g=f.innerHTML
}else{if(f.firstChild){var e=[];
for(var h=f.firstChild;
h;
h=h.nextSibling){e.push(a(h))
}g=e.join("")
}}}}return g
}gadgets.util.createElement=function(f){var e;
if((!document.body)||document.body.namespaceURI){try{e=document.createElementNS(c,f)
}catch(g){}}return e||document.createElement(f)
};
gadgets.util.createIframeElement=function(g){var i=gadgets.util.createElement("iframe");
try{var e=d("iframe",g);
var f=gadgets.util.createElement(e);
if(f&&((!i)||((f.tagName==i.tagName)&&(f.namespaceURI==i.namespaceURI)))){i=f
}}catch(h){}b(i,g);
return i
};
gadgets.util.getBodyElement=function(){if(document.body){return document.body
}try{var f=document.getElementsByTagNameNS(c,"body");
if(f&&(f.length==1)){return f[0]
}}catch(e){}return document.documentElement||document
};
gadgets.util.getInnerText=function(e){return a(e)
}
})();;

/* [end] feature=core.util.dom */

/* [start] feature=core.util.event */
gadgets.util=gadgets.util||{};
(function(){gadgets.util.attachBrowserEvent=function(c,b,d,a){if(typeof c.addEventListener!="undefined"){c.addEventListener(b,d,a)
}else{if(typeof c.attachEvent!="undefined"){c.attachEvent("on"+b,d)
}else{gadgets.warn("cannot attachBrowserEvent: "+b)
}}};
gadgets.util.removeBrowserEvent=function(c,b,d,a){if(c.removeEventListener){c.removeEventListener(b,d,a)
}else{if(c.detachEvent){c.detachEvent("on"+b,d)
}else{gadgets.warn("cannot removeBrowserEvent: "+b)
}}}
})();;

/* [end] feature=core.util.event */

/* [start] feature=core.util.onload */
gadgets.util=gadgets.util||{};
(function(){var a=[];
gadgets.util.registerOnLoadHandler=function(b){a.push(b)
};
gadgets.util.runOnLoadHandlers=function(){for(var c=0,b=a.length;
c<b;
++c){a[c]()
}}
})();;

/* [end] feature=core.util.onload */

/* [start] feature=core.util.string */
gadgets.util=gadgets.util||{};
(function(){var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true,65282:true,65287:true,65308:true,65310:true,65340:true};
function b(c,d){return String.fromCharCode(d)
}gadgets.util.escape=function(c,g){if(!c){return c
}else{if(typeof c==="string"){return gadgets.util.escapeString(c)
}else{if(typeof c==="array"){for(var f=0,d=c.length;
f<d;
++f){c[f]=gadgets.util.escape(c[f])
}}else{if(typeof c==="object"&&g){var e={};
for(var h in c){if(c.hasOwnProperty(h)){e[gadgets.util.escapeString(h)]=gadgets.util.escape(c[h],true)
}}return e
}}}}return c
};
gadgets.util.escapeString=function(g){if(!g){return g
}var d=[],f,h;
for(var e=0,c=g.length;
e<c;
++e){f=g.charCodeAt(e);
h=a[f];
if(h===true){d.push("&#",f,";")
}else{if(h!==false){d.push(g.charAt(e))
}}}return d.join("")
};
gadgets.util.unescapeString=function(c){if(!c){return c
}return c.replace(/&#([0-9]+);/g,b)
}
})();;

/* [end] feature=core.util.string */

/* [start] feature=core.util.urlparams */
gadgets.util=gadgets.util||{};
(function(){var a=null;
function b(e){var f;
var c=e.indexOf("?");
var d=e.indexOf("#");
if(d===-1){f=e.substr(c+1)
}else{f=[e.substr(c+1,d-c-1),"&",e.substr(d+1)].join("")
}return f.split("&")
}gadgets.util.getUrlParameters=function(p){var d=typeof p==="undefined";
if(a!==null&&d){return a
}var l={};
var f=b(p||window.location.href);
var n=window.decodeURIComponent?decodeURIComponent:unescape;
for(var h=0,g=f.length;
h<g;
++h){var m=f[h].indexOf("=");
if(m===-1){continue
}var c=f[h].substring(0,m);
var o=f[h].substring(m+1);
o=o.replace(/\+/g," ");
try{l[c]=n(o)
}catch(k){}}if(d){a=l
}return l
};
gadgets.util.getUrlParameters()
})();;

/* [end] feature=core.util.urlparams */

/* [start] feature=gapi.util.getOrigin */
gapi.util.getOrigin=function(a){if(!a)return"";a=a.split("#")[0].split("?")[0];a=a.toLowerCase();0==a.indexOf("//")&&(a=window.location.protocol+a);/^\w*:\/\//.test(a)||(a=window.location.href);var b=a.substring(a.indexOf("://")+3),c=b.indexOf("/");-1!=c&&(b=b.substring(0,c));a=a.substring(0,a.indexOf("://"));var c="",d=b.indexOf(":");if(-1!=d){var e=b.substring(d+1),b=b.substring(0,d);if("http"===a&&"80"!==e||"https"===a&&"443"!==e)c=":"+e}return a+"://"+b+c};
;

/* [end] feature=gapi.util.getOrigin */

/* [start] feature=core.json */
if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets.json=(function(){var a=/___$/;
function b(d,e){var c=this[d];
return c
}return{parse:function(d){try{return window.JSON.parse(d)
}catch(c){return false
}},stringify:function(d){var h=window.JSON.stringify;
function f(e){return h.call(this,e,b)
}var g=(Array.prototype.toJSON&&h([{x:1}])==='"[{\\"x\\": 1}]"')?f:h;
try{return g(d,function(i,e){return !a.test(i)?e:void 0
})
}catch(c){return null
}}}
})()
};;
;
if(!(window.JSON&&window.JSON.parse&&window.JSON.stringify)){gadgets.json=function(){function f(n){return n<10?"0"+n:n
}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")
};
var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
function stringify(value){var a,i,k,l,r=/[\"\\\x00-\x1f\x7f-\x9f]/g,v;
switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];
if(c){return c
}c=a.charCodeAt();
return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)
})+'"':'"'+value+'"';
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}a=[];
if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")){l=value.length;
for(i=0;
i<l;
i+=1){a.push(stringify(value[i])||"null")
}return"["+a.join(",")+"]"
}for(k in value){if(/___$/.test(k)){continue
}if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);
if(v){a.push(stringify(k)+":"+v)
}}}}return"{"+a.join(",")+"}"
}return""
}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")
}return false
}}
}()
};;
gadgets.json.flatten=function(c){var d={};
if(c===null||c===undefined){return d
}for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];
if(null===b||undefined===b){continue
}d[a]=(typeof b==="string")?b:gadgets.json.stringify(b)
}}return d
};;

/* [end] feature=core.json */

/* [start] feature=core.util */
gadgets.util=gadgets.util||{};
(function(){var b={};
var a={};
function c(d){b=d["core.util"]||{}
}if(gadgets.config){gadgets.config.register("core.util",null,c)
}gadgets.util.getFeatureParameters=function(d){return typeof b[d]==="undefined"?null:b[d]
};
gadgets.util.hasFeature=function(d){return typeof b[d]!=="undefined"
};
gadgets.util.getServices=function(){return a
}
})();;

/* [end] feature=core.util */

/* [start] feature=rpc */
gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.wpm){gadgets.rpctx.wpm=function(){var e,d;
var c=true;
function b(h,j,g){if(typeof window.addEventListener!="undefined"){window.addEventListener(h,j,g)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("on"+h,j)
}}if(h==="message"){window.___jsl=window.___jsl||{};
var i=window.___jsl;
i.RPMQ=i.RPMQ||[];
i.RPMQ.push(j)
}}function a(h,i,g){if(window.removeEventListener){window.removeEventListener(h,i,g)
}else{if(window.detachEvent){window.detachEvent("on"+h,i)
}}}function f(h){var i=gadgets.json.parse(h.data);
if(!i||!i.f){return
}gadgets.debug("gadgets.rpc.receive("+window.name+"): "+h.data);
var g=gadgets.rpc.getTargetOrigin(i.f);
if(c&&(typeof h.origin!=="undefined"?h.origin!==g:h.domain!==/^.+:\/\/([^:]+).*/.exec(g)[1])){gadgets.error("Invalid rpc message origin. "+g+" vs "+(h.origin||""));
return
}e(i,h.origin)
}return{getCode:function(){return"wpm"
},isParentVerifiable:function(){return true
},init:function(h,i){function g(k){var j=k&&k.rpc||{};
if(String(j.disableForceSecure)==="true"){c=false
}}gadgets.config.register("rpc",null,g);
e=h;
d=i;
b("message",f,false);
d("..",true);
return true
},setup:function(h,g){d(h,true);
return true
},call:function(h,k,j){var g=gadgets.rpc.getTargetOrigin(h);
var i=gadgets.rpc._getTargetWin(h);
if(g){window.setTimeout(function(){var l=gadgets.json.stringify(j);
gadgets.debug("gadgets.rpc.send("+window.name+"): "+l);
i.postMessage(l,g)
},0)
}else{if(h!=".."){gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message")
}}return true
}}
}()
};;

       gadgets.rpctx.ifpc = gadgets.rpctx.wpm;
    ;
if(!window.gadgets||!window.gadgets["rpc"]){gadgets.rpc=function(){var M="__cb";
var S="";
var T="__ack";
var f=500;
var G=10;
var b="|";
var u="callback";
var g="origin";
var r="referer";
var s="legacy__";
var q={};
var W={};
var D={};
var B={};
var z=0;
var l={};
var m={};
var d={};
var n={};
var E={};
var e=null;
var p=null;
var A=(window.top!==window.self);
var v=window.name;
var J=function(){};
var P=0;
var Y=1;
var a=2;
var x=window.console;
var V=x&&x.log&&function(ae){x.log(ae)
}||function(){};
var R=(function(){function ae(af){return function(){V(af+": call ignored")
}
}return{getCode:function(){return"noop"
},isParentVerifiable:function(){return true
},init:ae("init"),setup:ae("setup"),call:ae("call")}
})();
if(gadgets.util){d=gadgets.util.getUrlParameters()
}function K(){if(d.rpctx=="flash"){return gadgets.rpctx.flash
}if(d.rpctx=="rmr"){return gadgets.rpctx.rmr
}var ae=typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?(gadgets.rpctx.flash?gadgets.rpctx.flash:(gadgets.rpctx.nix?gadgets.rpctx.nix:gadgets.rpctx.ifpc)):navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc;
if(!ae){ae=R
}return ae
}function k(aj,ah){if(n[aj]){return
}var af=H;
if(!ah){af=R
}n[aj]=af;
var ae=E[aj]||[];
for(var ag=0;
ag<ae.length;
++ag){var ai=ae[ag];
ai.t=F(aj);
af.call(aj,ai.f,ai)
}E[aj]=[]
}var I=false,U=false;
function N(){if(U){return
}function ae(){I=true
}if(typeof window.addEventListener!="undefined"){window.addEventListener("unload",ae,false)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onunload",ae)
}}U=true
}function j(ae,ai,af,ah,ag){if(!B[ai]||B[ai]!==af){gadgets.error("Invalid gadgets.rpc token. "+B[ai]+" vs "+af);
J(ai,a)
}ag.onunload=function(){if(m[ai]&&!I){J(ai,Y);
gadgets.rpc.removeReceiver(ai)
}};
N();
ah=gadgets.json.parse(decodeURIComponent(ah))
}function Z(ai,af){if(ai&&typeof ai.s==="string"&&typeof ai.f==="string"&&ai.a instanceof Array){if(B[ai.f]){if(B[ai.f]!==ai.t){gadgets.error("Invalid gadgets.rpc token. "+B[ai.f]+" vs "+ai.t);
J(ai.f,a)
}}if(ai.s===T){window.setTimeout(function(){k(ai.f,true)
},0);
return
}if(ai.c){ai[u]=function(aj){var ak=ai.g?s:"";
gadgets.rpc.call(ai.f,ak+M,null,ai.c,aj)
}
}if(af){var ag=t(af);
ai[g]=af;
var ah=ai.r;
if(!ah||t(ah)!=ag){ah=af
}ai[r]=ah
}var ae=(q[ai.s]||q[S]).apply(ai,ai.a);
if(ai.c&&typeof ae!=="undefined"){gadgets.rpc.call(ai.f,M,null,ai.c,ae)
}}}function t(ag){if(!ag){return""
}ag=((ag.split("#"))[0].split("?"))[0];
ag=ag.toLowerCase();
if(ag.indexOf("//")==0){ag=window.location.protocol+ag
}if(ag.indexOf("://")==-1){ag=window.location.protocol+"//"+ag
}var ah=ag.substring(ag.indexOf("://")+3);
var ae=ah.indexOf("/");
if(ae!=-1){ah=ah.substring(0,ae)
}var aj=ag.substring(0,ag.indexOf("://"));
var ai="";
var ak=ah.indexOf(":");
if(ak!=-1){var af=ah.substring(ak+1);
ah=ah.substring(0,ak);
if((aj==="http"&&af!=="80")||(aj==="https"&&af!=="443")){ai=":"+af
}}return aj+"://"+ah+ai
}function C(af,ae){return"/"+af+(ae?b+ae:"")
}function y(ah){if(ah.charAt(0)=="/"){var af=ah.indexOf(b);
var ag=af>0?ah.substring(1,af):ah.substring(1);
var ae=af>0?ah.substring(af+1):null;
return{id:ag,origin:ae}
}else{return null
}}function ad(ag){if(typeof ag==="undefined"||ag===".."){return window.parent
}var af=y(ag);
if(af){return window.top.frames[af.id]
}ag=String(ag);
var ae=window.frames[ag];
if(ae){return ae
}ae=document.getElementById(ag);
if(ae&&ae.contentWindow){return ae.contentWindow
}return null
}function L(ah){var ag=null;
var ae=O(ah);
if(ae){ag=ae
}else{var af=y(ah);
if(af){ag=af.origin
}else{if(ah==".."){ag=d.parent
}else{ag=document.getElementById(ah).src
}}}return t(ag)
}var H=K();
q[S]=function(){V("Unknown RPC service: "+this["s"])
};
q[M]=function(af,ae){var ag=l[af];
if(ag){delete l[af];
ag.call(this,ae)
}};
function X(ag,ae){if(m[ag]===true){return
}if(typeof m[ag]==="undefined"){m[ag]=0
}var af=ad(ag);
if(ag===".."||af!=null){if(H.setup(ag,ae)===true){m[ag]=true;
return
}}if(m[ag]!==true&&m[ag]++<G){window.setTimeout(function(){X(ag,ae)
},f)
}else{n[ag]=R;
m[ag]=true
}}function O(af){var ae=W[af];
if(ae&&ae.substring(0,1)==="/"){if(ae.substring(1,2)==="/"){ae=document.location.protocol+ae
}else{ae=document.location.protocol+"//"+document.location.host+ae
}}return ae
}function ac(af,ae,ag){if(ae&&!/http(s)?:\/\/.+/.test(ae)){if(ae.indexOf("//")==0){ae=window.location.protocol+ae
}else{if(ae.charAt(0)=="/"){ae=window.location.protocol+"//"+window.location.host+ae
}else{if(ae.indexOf("://")==-1){ae=window.location.protocol+"//"+ae
}}}}W[af]=ae;
if(typeof ag!=="undefined"){D[af]=!!ag
}}function F(ae){return B[ae]
}function c(ae,af){af=af||"";
B[ae]=String(af);
X(ae,af)
}function ab(af){var ae=af.passReferrer||"";
var ag=ae.split(":",2);
e=ag[0]||"none";
p=ag[1]||"origin"
}function aa(ae){if(Q(ae)){H=gadgets.rpctx.ifpc||R;
H.init(Z,k)
}}function Q(ae){return String(ae.useLegacyProtocol)==="true"
}function h(af,ae){function ag(aj){var ai=aj&&aj.rpc||{};
ab(ai);
var ah=ai.parentRelayUrl||"";
ah=t(d.parent||ae)+ah;
ac("..",ah,Q(ai));
aa(ai);
c("..",af)
}if(!d.parent&&ae){ag({});
return
}gadgets.config.register("rpc",null,ag)
}function o(af,aj,al){var ai=null;
if(af.charAt(0)!="/"){if(!gadgets.util){return
}ai=document.getElementById(af);
if(!ai){throw new Error("Cannot set up gadgets.rpc receiver with ID: "+af+", element not found.")
}}var ae=ai&&ai.src;
var ag=aj||gadgets.rpc.getOrigin(ae);
ac(af,ag);
var ak=gadgets.util.getUrlParameters(ae);
var ah=al||ak.rpctoken;
c(af,ah)
}function i(ae,ag,ah){if(ae===".."){var af=ah||d.rpctoken||d.ifpctok||"";
h(af,ag)
}else{o(ae,ag,ah)
}}function w(ag){if(e==="bidir"||(e==="c2p"&&ag==="..")||(e==="p2c"&&ag!=="..")){var af=window.location.href;
var ah="?";
if(p==="query"){ah="#"
}else{if(p==="hash"){return af
}}var ae=af.lastIndexOf(ah);
ae=ae===-1?af.length:ae;
return af.substring(0,ae)
}return null
}return{config:function(ae){if(typeof ae.securityCallback==="function"){J=ae.securityCallback
}},register:function(af,ae){if(af===M||af===T){throw new Error("Cannot overwrite callback/ack service")
}if(af===S){throw new Error("Cannot overwrite default service: use registerDefault")
}q[af]=ae
},unregister:function(ae){if(ae===M||ae===T){throw new Error("Cannot delete callback/ack service")
}if(ae===S){throw new Error("Cannot delete default service: use unregisterDefault")
}delete q[ae]
},registerDefault:function(ae){q[S]=ae
},unregisterDefault:function(){delete q[S]
},forceParentVerifiable:function(){if(!H.isParentVerifiable()){H=gadgets.rpctx.ifpc
}},call:function(ae,ag,al,aj){ae=ae||"..";
var ak="..";
if(ae===".."){ak=v
}else{if(ae.charAt(0)=="/"){ak=C(v,gadgets.rpc.getOrigin(window.location.href))
}}++z;
if(al){l[z]=al
}var ai={s:ag,f:ak,c:al?z:0,a:Array.prototype.slice.call(arguments,3),t:B[ae],l:!!D[ae]};
var af=w(ae);
if(af){ai.r=af
}if(ae!==".."&&y(ae)==null&&!document.getElementById(ae)){return
}var ah=n[ae];
if(!ah&&y(ae)!==null){ah=H
}if(ag.indexOf(s)===0){ah=H;
ai.s=ag.substring(s.length);
ai.c=ai.c?ai.c:z
}ai.g=true;
ai.r=ak;
if(!ah){if(!E[ae]){E[ae]=[ai]
}else{E[ae].push(ai)
}return
}if(D[ae]){ah=gadgets.rpctx.ifpc
}if(ah.call(ae,ak,ai)===false){n[ae]=R;
H.call(ae,ak,ai)
}},getRelayUrl:O,setRelayUrl:ac,setAuthToken:c,setupReceiver:i,getAuthToken:F,removeReceiver:function(ae){delete W[ae];
delete D[ae];
delete B[ae];
delete m[ae];
delete n[ae]
},getRelayChannel:function(){return H.getCode()
},receive:function(af,ae){if(af.length>4){H._receiveMessage(af,Z)
}else{j.apply(null,af.concat(ae))
}},receiveSameDomain:function(ae){ae.a=Array.prototype.slice.call(ae.a);
window.setTimeout(function(){Z(ae)
},0)
},getOrigin:t,getTargetOrigin:L,init:function(){if(H.init(Z,k)===false){H=R
}if(A){i("..")
}else{gadgets.config.register("rpc",null,function(af){var ae=af.rpc||{};
ab(ae);
aa(ae)
})
}},_getTargetWin:ad,_parseSiblingId:y,ACK:T,RPC_ID:v||"..",SEC_ERROR_LOAD_TIMEOUT:P,SEC_ERROR_FRAME_PHISH:Y,SEC_ERROR_FORGED_MSG:a}
}();
gadgets.rpc.init()
}else{if(typeof gadgets.rpc=="undefined"||!gadgets.rpc){gadgets.rpc=window.gadgets["rpc"];
gadgets.rpc.config=gadgets.rpc.config;
gadgets.rpc.register=gadgets.rpc.register;
gadgets.rpc.unregister=gadgets.rpc.unregister;
gadgets.rpc.registerDefault=gadgets.rpc.registerDefault;
gadgets.rpc.unregisterDefault=gadgets.rpc.unregisterDefault;
gadgets.rpc.forceParentVerifiable=gadgets.rpc.forceParentVerifiable;
gadgets.rpc.call=gadgets.rpc.call;
gadgets.rpc.getRelayUrl=gadgets.rpc.getRelayUrl;
gadgets.rpc.setRelayUrl=gadgets.rpc.setRelayUrl;
gadgets.rpc.setAuthToken=gadgets.rpc.setAuthToken;
gadgets.rpc.setupReceiver=gadgets.rpc.setupReceiver;
gadgets.rpc.getAuthToken=gadgets.rpc.getAuthToken;
gadgets.rpc.removeReceiver=gadgets.rpc.removeReceiver;
gadgets.rpc.getRelayChannel=gadgets.rpc.getRelayChannel;
gadgets.rpc.receive=gadgets.rpc.receive;
gadgets.rpc.receiveSameDomain=gadgets.rpc.receiveSameDomain;
gadgets.rpc.getOrigin=gadgets.rpc.getOrigin;
gadgets.rpc.getTargetOrigin=gadgets.rpc.getTargetOrigin;
gadgets.rpc._getTargetWin=gadgets.rpc._getTargetWin;
gadgets.rpc._parseSiblingId=gadgets.rpc._parseSiblingId
}};;

/* [end] feature=rpc */
gadgets.config.init({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"}});
(function(){var j=window['___jsl']=window['___jsl']||{};j['l']=(j['l']||[]).concat(['rpc','core.util']);})();(function(){var j=window['___jsl']=window['___jsl']||{};if(j['c']){j['c']();delete j['c'];}})();var friendconnect_serverBase = "http://www.google.com";var friendconnect_loginUrl = "https://www.google.com/accounts";var friendconnect_gadgetPrefix = "http://www-a-fc-opensocial.googleusercontent.com/gadgets";
var friendconnect_serverVersion = "0.1-742aaa61_a7f8ae74_68a68baf_18f050c4_8a33537c.7";
var friendconnect_imageUrl = "http://www.google.com/friendconnect/scs/images";
var friendconnect_lightbox = true;
var fca=gadgets,fcb=Error,fcc=friendconnect_serverBase,fcd=encodeURIComponent,fcaa=parseInt,fce=String,fcf=window,fcba=setTimeout,fcca=Object,fcg=document,fch=Array,fci=Math;function fcda(a,b){return a.length=b}function fcea(a,b){return a.className=b}function fcj(a,b){return a.width=b}function fck(a,b){return a.innerHTML=b}function fcl(a,b){return a.height=b}
var fcm="appendChild",fcn="push",fcfa="toString",fco="length",fcga="propertyIsEnumerable",fcha="stringify",fc="prototype",fcia="test",fcja="shift",fcp="width",fcq="round",fcr="slice",fcs="replace",fct="document",fcka="data",fcu="split",fcv="getElementById",fcw="charAt",fcx="location",fcy="getUrlParameters",fcz="indexOf",fcla="Dialog",fcA="style",fcB="body",fcma="left",fcC="call",fcD="match",fcE="options",fcna="random",fcF="createElement",fcG="json",fcH="addEventListener",fcI="setAttribute",fcoa="href",
fcpa="substring",fcqa="getContentElement",fcJ="util",fcra="maxHeight",fcsa="type",fcK="apply",fcta="auth",fcua="reset",fcva="getSecurityToken",fcwa="bind",fcL="name",fcxa="display",fcM="height",fcN="register",fcO="join",fcya="unshift",fcza="toLowerCase",fcP="right",goog=goog||{},fcQ=this,fcAa=function(a,b,c){a=a[fcu](".");c=c||fcQ;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[fco]&&(d=a[fcja]());)a[fco]||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b},fcBa=function(a){var b=typeof a;if("object"==
b)if(a){if(a instanceof fch)return"array";if(a instanceof fcca)return b;var c=fcca[fc][fcfa][fcC](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[fco]&&"undefined"!=typeof a.splice&&"undefined"!=typeof a[fcga]&&!a[fcga]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[fcC]&&"undefined"!=typeof a[fcga]&&!a[fcga]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[fcC])return"object";return b},fcCa=function(a){return void 0!==
a},fcDa=function(a){var b=fcBa(a);return"array"==b||"object"==b&&"number"==typeof a[fco]},fcR=function(a){return"string"==typeof a},fcEa=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};fci[fcna]();
var fcS=function(a){var b=fcBa(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=fcS(a[c]);return b}return a},fcFa=function(a,b,c){return a[fcC][fcK](a[fcwa],arguments)},fcGa=function(a,b,c){if(!a)throw fcb();if(2<arguments[fco]){var d=fch[fc][fcr][fcC](arguments,2);return function(){var c=fch[fc][fcr][fcC](arguments);fch[fc][fcya][fcK](c,d);return a[fcK](b,c)}}return function(){return a[fcK](b,arguments)}},fcT=function(a,b,c){fcT=Function[fc][fcwa]&&
-1!=Function[fc][fcwa][fcfa]()[fcz]("native code")?fcFa:fcGa;return fcT[fcK](null,arguments)},fcHa=function(a,b){var c=fch[fc][fcr][fcC](arguments,1);return function(){var b=fch[fc][fcr][fcC](arguments);b[fcya][fcK](b,c);return a[fcK](this,b)}},fcIa=function(a,b){for(var c in b)a[c]=b[c]},fcJa=Date.now||function(){return+new Date},fcU=function(a,b,c){fcAa(a,b,c)},fcV=function(a,b){function c(){}c.prototype=b[fc];a.Qc=b[fc];a.prototype=new c;a[fc].constructor=a};
Function[fc].bind=Function[fc][fcwa]||function(a,b){if(1<arguments[fco]){var c=fch[fc][fcr][fcC](arguments,1);c[fcya](this,a);return fcT[fcK](null,c)}return fcT(this,a)};SHA1=function(){this.c=fch(5);this.da=fch(64);this.Hc=fch(80);this.ua=fch(64);this.ua[0]=128;for(var a=1;64>a;++a)this.ua[a]=0;this[fcua]()};SHA1[fc].reset=function(){this.c[0]=1732584193;this.c[1]=4023233417;this.c[2]=2562383102;this.c[3]=271733878;this.c[4]=3285377520;this.J=this.A=0};SHA1[fc].za=function(a,b){return(a<<b|a>>>32-b)&4294967295};
SHA1[fc].M=function(a){for(var b=this.Hc,c=0;64>c;c+=4){var d=a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3];b[c/4]=d}for(c=16;80>c;++c)b[c]=this.za(b[c-3]^b[c-8]^b[c-14]^b[c-16],1);a=this.c[0];for(var d=this.c[1],e=this.c[2],g=this.c[3],l=this.c[4],k,m,c=0;80>c;++c)40>c?20>c?(k=g^d&(e^g),m=1518500249):(k=d^e^g,m=1859775393):60>c?(k=d&e|g&(d|e),m=2400959708):(k=d^e^g,m=3395469782),k=this.za(a,5)+k+l+m+b[c]&4294967295,l=g,g=e,e=this.za(d,30),d=a,a=k;this.c[0]=this.c[0]+a&4294967295;this.c[1]=this.c[1]+d&4294967295;
this.c[2]=this.c[2]+e&4294967295;this.c[3]=this.c[3]+g&4294967295;this.c[4]=this.c[4]+l&4294967295};SHA1[fc].update=function(a,b){b||(b=a[fco]);var c=0;if(0==this.A)for(;c+64<b;)this.M(a[fcr](c,c+64)),c+=64,this.J+=64;for(;c<b;)if(this.da[this.A++]=a[c++],++this.J,64==this.A)for(this.A=0,this.M(this.da);c+64<b;)this.M(a[fcr](c,c+64)),c+=64,this.J+=64};
SHA1[fc].digest=function(){var a=fch(20),b=8*this.J;56>this.A?this.update(this.ua,56-this.A):this.update(this.ua,64-(this.A-56));for(var c=63;56<=c;--c)this.da[c]=b&255,b>>>=8;this.M(this.da);for(c=b=0;5>c;++c)for(var d=24;0<=d;d-=8)a[b++]=this.c[c]>>d&255;return a};G_HMAC=function(a,b,c){if(!(a&&"object"==typeof a&&a[fcua]&&a.update&&a.digest))throw fcb("Invalid hasher object. Hasher unspecified or does not implement expected interface.");if(b.constructor!=fch)throw fcb("Invalid key.");if(c&&"number"!=typeof c)throw fcb("Invalid block size.");this.k=a;this.ca=c||16;this.Wb=fch(this.ca);this.Vb=fch(this.ca);b[fco]>this.ca&&(this.k.update(b),b=this.k.digest());for(c=0;c<this.ca;c++)a=c<b[fco]?b[c]:0,this.Wb[c]=a^G_HMAC.OPAD,this.Vb[c]=a^G_HMAC.IPAD};
G_HMAC.OPAD=92;G_HMAC.IPAD=54;G_HMAC[fc].reset=function(){this.k[fcua]();this.k.update(this.Vb)};G_HMAC[fc].update=function(a){if(a.constructor!=fch)throw fcb("Invalid data. Data must be an array.");this.k.update(a)};G_HMAC[fc].digest=function(){var a=this.k.digest();this.k[fcua]();this.k.update(this.Wb);this.k.update(a);return this.k.digest()};G_HMAC[fc].Ib=function(a){this[fcua]();this.update(a);return this.digest()};var fcKa=function(a,b){for(var c=a[fcu]("%s"),d="",e=fch[fc][fcr][fcC](arguments,1);e[fco]&&1<c[fco];)d+=c[fcja]()+e[fcja]();return d+c[fcO]("%s")},fcLa=function(a,b){var c=fce(a)[fcza](),d=fce(b)[fcza]();return c<d?-1:c==d?0:1},fcRa=function(a,b){if(b)return a[fcs](fcMa,"&amp;")[fcs](fcNa,"&lt;")[fcs](fcOa,"&gt;")[fcs](fcPa,"&quot;");if(!fcQa[fcia](a))return a;-1!=a[fcz]("&")&&(a=a[fcs](fcMa,"&amp;"));-1!=a[fcz]("<")&&(a=a[fcs](fcNa,"&lt;"));-1!=a[fcz](">")&&(a=a[fcs](fcOa,"&gt;"));-1!=a[fcz]('"')&&
(a=a[fcs](fcPa,"&quot;"));return a},fcMa=/&/g,fcNa=/</g,fcOa=/>/g,fcPa=/\"/g,fcQa=/[&<>\"]/,fcSa=function(a,b){for(var c=0,d=fce(a)[fcs](/^[\s\xa0]+|[\s\xa0]+$/g,"")[fcu]("."),e=fce(b)[fcs](/^[\s\xa0]+|[\s\xa0]+$/g,"")[fcu]("."),g=fci.max(d[fco],e[fco]),l=0;0==c&&l<g;l++){var k=d[l]||"",m=e[l]||"",n=RegExp("(\\d*)(\\D*)","g"),h=RegExp("(\\d*)(\\D*)","g");do{var f=n.exec(k)||["","",""],p=h.exec(m)||["","",""];if(0==f[0][fco]&&0==p[0][fco])break;var c=0==f[1][fco]?0:fcaa(f[1],10),r=0==p[1][fco]?0:fcaa(p[1],
10),c=(c<r?-1:c>r?1:0)||((0==f[2][fco])<(0==p[2][fco])?-1:(0==f[2][fco])>(0==p[2][fco])?1:0)||(f[2]<p[2]?-1:f[2]>p[2]?1:0)}while(0==c)}return c};fci[fcna]();var fcTa=function(a){return fce(a)[fcs](/\-([a-z])/g,function(a,c){return c.toUpperCase()})},fcUa=function(a,b){var c=fcR(b)?fce(b)[fcs](/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")[fcs](/\x08/g,"\\x08"):"\\s",c=c?"|["+c+"]+":"",c=RegExp("(^"+c+")([a-z])","g");return a[fcs](c,function(a,b,c){return b+c.toUpperCase()})};var fcW,fcVa,fcWa,fcXa,fcYa=function(){return fcQ.navigator?fcQ.navigator.userAgent:null},fcZa=function(){return fcQ.navigator},fc_a=function(){fcXa=fcWa=fcVa=fcW=!1;var a;if(a=fcYa()){var b=fcZa();fcW=0==a[fcz]("Opera");fcVa=!fcW&&-1!=a[fcz]("MSIE");(fcWa=!fcW&&-1!=a[fcz]("WebKit"))&&a[fcz]("Mobile");fcXa=!fcW&&!fcWa&&"Gecko"==b.product}};fc_a();
var fc0a=fcW,fcX=fcVa,fc1a=fcXa,fcY=fcWa,fc2a=function(){var a=fcZa();return a&&a.platform||""},fc3a=fc2a(),fc4a=function(){fc3a[fcz]("Mac");fc3a[fcz]("Win");fc3a[fcz]("Linux");fcZa()&&(fcZa().appVersion||"")[fcz]("X11");var a=fcYa();a&&a[fcz]("Android");a&&a[fcz]("iPhone");a&&a[fcz]("iPad")};fc4a();
var fc6a=function(){var a="",b;fc0a&&fcQ.opera?(a=fcQ.opera.version,a="function"==typeof a?a():a):(fc1a?b=/rv\:([^\);]+)(\)|;)/:fcX?b=/MSIE\s+([^\);]+)(\)|;)/:fcY&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(fcYa()))?a[1]:""));return fcX&&(b=fc5a(),b>parseFloat(a))?fce(b):a},fc5a=function(){var a=fcQ[fct];return a?a.documentMode:void 0},fc7a=fc6a(),fc8a={},fc9a=function(a){return fc8a[a]||(fc8a[a]=0<=fcSa(fc7a,a))},fc$a=function(){var a=fcQ[fct];if(a&&fcX){var b=fc5a();return b||("CSS1Compat"==a.compatMode?
fcaa(fc7a,10):5)}}();var fcab=function(a){fcb.captureStackTrace?fcb.captureStackTrace(this,fcab):this.stack=fcb().stack||"";a&&(this.message=fce(a))};fcV(fcab,fcb);fcab[fc].name="CustomError";var fcbb=function(a,b){b[fcya](a);fcab[fcC](this,fcKa[fcK](null,b));b[fcja]();this.messagePattern=a};fcV(fcbb,fcab);fcbb[fc].name="AssertionError";var fccb=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),g=d;else a&&(e+=": "+a,g=b);throw new fcbb(""+e,g||[]);},fcdb=function(a,b,c){a||fccb("",null,b,fch[fc][fcr][fcC](arguments,2));return a};var fceb=fch[fc],fcfb=fceb[fcz]?function(a,b,c){fcdb(null!=a[fco]);return fceb[fcz][fcC](a,b,c)}:function(a,b,c){c=null==c?0:0>c?fci.max(0,a[fco]+c):c;if(fcR(a))return fcR(b)&&1==b[fco]?a[fcz](b,c):-1;for(;c<a[fco];c++)if(c in a&&a[c]===b)return c;return-1},fcgb=fceb.forEach?function(a,b,c){fcdb(null!=a[fco]);fceb.forEach[fcC](a,b,c)}:function(a,b,c){for(var d=a[fco],e=fcR(a)?a[fcu](""):a,g=0;g<d;g++)g in e&&b[fcC](c,e[g],g,a)},fchb=function(a,b){return 0<=fcfb(a,b)},fcib=function(a){var b=a[fco];
if(0<b){for(var c=fch(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},fcjb=function(a,b,c){fcdb(null!=a[fco]);return 2>=arguments[fco]?fceb[fcr][fcC](a,b):fceb[fcr][fcC](a,b,c)};var fckb=function(a){for(var b=[],c=0,d=0;d<a[fco];d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b};var fclb=null,fcmb=null,fcnb=null,fcob=null,fcqb=function(a,b){if(!fcDa(a))throw fcb("encodeByteArray takes an array as a parameter");fcpb();for(var c=b?fcnb:fclb,d=[],e=0;e<a[fco];e+=3){var g=a[e],l=e+1<a[fco],k=l?a[e+1]:0,m=e+2<a[fco],n=m?a[e+2]:0,h=g>>2,g=(g&3)<<4|k>>4,k=(k&15)<<2|n>>6,n=n&63;m||(n=64,l||(k=64));d[fcn](c[h],c[g],c[k],c[n])}return d[fcO]("")},fcrb=function(a,b){fcpb();for(var c=b?fcob:fcmb,d=[],e=0;e<a[fco];){var g=c[a[fcw](e++)],l=e<a[fco],l=l?c[a[fcw](e)]:0;++e;var k=e<a[fco],
k=k?c[a[fcw](e)]:0;++e;var m=e<a[fco],m=m?c[a[fcw](e)]:0;++e;if(null==g||null==l||null==k||null==m)throw fcb();g=g<<2|l>>4;d[fcn](g);64!=k&&(g=l<<4&240|k>>2,d[fcn](g),64!=m&&(g=k<<6&192|m,d[fcn](g)))}return d},fcpb=function(){if(!fclb){fclb={};fcmb={};fcnb={};fcob={};for(var a=0;65>a;a++)fclb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[fcw](a),fcmb[fclb[a]]=a,fcnb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_."[fcw](a),fcob[fcnb[a]]=a}};var fcZ=function(a){this.wb=a},fcsb=/\s*;\s*/;fcZ[fc].Tb=function(a){return!/[;=\s]/[fcia](a)};fcZ[fc].Ub=function(a){return!/[;\r\n]/[fcia](a)};fcZ[fc].set=function(a,b,c,d,e,g){if(!this.Tb(a))throw fcb('Invalid cookie name "'+a+'"');if(!this.Ub(b))throw fcb('Invalid cookie value "'+b+'"');fcCa(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";g=g?";secure":"";0>c?c="":(c=0==c?new Date(1970,1,1):new Date(fcJa()+1E3*c),c=";expires="+c.toUTCString());this.vc(a+"="+b+e+d+c+g)};
fcZ[fc].get=function(a,b){for(var c=a+"=",d=this.la(),e=0,g;g=d[e];e++){if(0==g.lastIndexOf(c,0))return g.substr(c[fco]);if(g==a)return""}return b};fcZ[fc].remove=function(a,b,c){var d=this.N(a);this.set(a,"",0,b,c);return d};fcZ[fc].z=function(){return this.ja().keys};fcZ[fc].F=function(){return this.ja().values};fcZ[fc].Q=function(){var a=this.Oa();return a?this.la()[fco]:0};fcZ[fc].N=function(a){return fcCa(this.get(a))};fcZ[fc].clear=function(){for(var a=this.ja().keys,b=a[fco]-1;0<=b;b--)this.remove(a[b])};
fcZ[fc].vc=function(a){this.wb.cookie=a};fcZ[fc].Oa=function(){return this.wb.cookie};fcZ[fc].la=function(){return(this.Oa()||"")[fcu](fcsb)};fcZ[fc].ja=function(){for(var a=this.la(),b=[],c=[],d,e,g=0;e=a[g];g++)d=e[fcz]("="),-1==d?(b[fcn](""),c[fcn](e)):(b[fcn](e[fcpa](0,d)),c[fcn](e[fcpa](d+1)));return{keys:b,values:c}};var fctb=new fcZ(fcg);fctb.MAX_COOKIE_LENGTH=3950;var fc_=function(a,b){fcj(this,a);fcl(this,b)};fc_[fc].clone=function(){return new fc_(this[fcp],this[fcM])};fc_[fc].toString=function(){return"("+this[fcp]+" x "+this[fcM]+")"};fc_[fc].ceil=function(){fcj(this,fci.ceil(this[fcp]));fcl(this,fci.ceil(this[fcM]));return this};fc_[fc].floor=function(){fcj(this,fci.floor(this[fcp]));fcl(this,fci.floor(this[fcM]));return this};fc_[fc].round=function(){fcj(this,fci[fcq](this[fcp]));fcl(this,fci[fcq](this[fcM]));return this};
fc_[fc].scale=function(a,b){var c="number"==typeof b?b:a;fcj(this,this[fcp]*a);fcl(this,this[fcM]*c);return this};var fcub=function(a,b,c){for(var d in a)b[fcC](c,a[d],d,a)},fcvb=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b},fcwb=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},fcxb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),fcyb=function(a,b){for(var c,d,e=1;e<arguments[fco];e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<fcxb[fco];g++)c=fcxb[g],fcca[fc].hasOwnProperty[fcC](d,c)&&(a[c]=d[c])}};var fczb=!fcX||fcX&&9<=fc$a;!fc1a&&!fcX||fcX&&fcX&&9<=fc$a||fc1a&&fc9a("1.9.1");fcX&&fc9a("9");var fcAb=function(a,b){fcea(a,b)},fcBb=function(a){a=a.className;return fcR(a)&&a[fcD](/\S+/g)||[]},fcDb=function(a,b){var c=fcBb(a),d=fcjb(arguments,1),e=c[fco]+d[fco];fcCb(c,d);fcAb(a,c[fcO](" "));return c[fco]==e},fcCb=function(a,b){for(var c=0;c<b[fco];c++)fchb(a,b[c])||a[fcn](b[c])};var fcEb=function(a){return fcR(a)?fcg[fcv](a):a},fcFb=fcEb,fcGb=function(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return c=b+(c?"."+c:""),a.querySelectorAll(c);if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,g=0,l;l=a[g];g++)b==l.nodeName&&(d[e++]=l);fcda(d,e);return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(g=e=0;l=a[g];g++)b=l.className,"function"==typeof b[fcu]&&fchb(b[fcu](/\s+/),c)&&(d[e++]=
l);fcda(d,e);return d}return a},fcIb=function(a,b){fcub(b,function(b,d){"style"==d?a[fcA].cssText=b:"class"==d?fcea(a,b):"for"==d?a.htmlFor=b:d in fcHb?a[fcI](fcHb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a[fcI](d,b):a[d]=b})},fcHb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},fcJb=function(a){a=a[fct];
a="CSS1Compat"==a.compatMode?a.documentElement:a[fcB];return new fc_(a.clientWidth,a.clientHeight)},fc0=function(a,b,c){return fcKb(fcg,arguments)},fcKb=function(a,b){var c=b[0],d=b[1];if(!fczb&&d&&(d[fcL]||d[fcsa])){c=["<",c];d[fcL]&&c[fcn](' name="',fcRa(d[fcL]),'"');if(d[fcsa]){c[fcn](' type="',fcRa(d[fcsa]),'"');var e={};fcyb(e,d);delete e[fcsa];d=e}c[fcn](">");c=c[fcO]("")}c=a[fcF](c);d&&(fcR(d)?fcea(c,d):"array"==fcBa(d)?fcDb[fcK](null,[c].concat(d)):fcIb(c,d));2<b[fco]&&fcLb(a,c,b,2);return c},
fcLb=function(a,b,c,d){function e(c){c&&b[fcm](fcR(c)?a.createTextNode(c):c)}for(;d<c[fco];d++){var g=c[d];!fcDa(g)||fcEa(g)&&0<g.nodeType?e(g):fcgb(fcMb(g)?fcib(g):g,e)}},fcMb=function(a){if(a&&"number"==typeof a[fco]){if(fcEa(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"==fcBa(a))return"function"==typeof a.item}return!1};var fcNb="StopIteration"in fcQ?fcQ.StopIteration:fcb("StopIteration"),fcOb=function(){};fcOb[fc].next=function(){throw fcNb;};fcOb[fc].__iterator__=function(){return this};var fc1=function(a,b){this.i={};this.e=[];var c=arguments[fco];if(1<c){if(c%2)throw fcb("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.nb(a)};fc1[fc].r=0;fc1[fc].K=0;fc1[fc].Q=function(){return this.r};fc1[fc].F=function(){this.L();for(var a=[],b=0;b<this.e[fco];b++){var c=this.e[b];a[fcn](this.i[c])}return a};fc1[fc].z=function(){this.L();return this.e.concat()};fc1[fc].N=function(a){return fcPb(this.i,a)};
fc1[fc].clear=function(){this.i={};fcda(this.e,0);this.K=this.r=0};fc1[fc].remove=function(a){return fcPb(this.i,a)?(delete this.i[a],this.r--,this.K++,this.e[fco]>2*this.r&&this.L(),!0):!1};fc1[fc].L=function(){if(this.r!=this.e[fco]){for(var a=0,b=0;a<this.e[fco];){var c=this.e[a];fcPb(this.i,c)&&(this.e[b++]=c);a++}fcda(this.e,b)}if(this.r!=this.e[fco]){for(var d={},b=a=0;a<this.e[fco];)c=this.e[a],fcPb(d,c)||(this.e[b++]=c,d[c]=1),a++;fcda(this.e,b)}};
fc1[fc].get=function(a,b){return fcPb(this.i,a)?this.i[a]:b};fc1[fc].set=function(a,b){fcPb(this.i,a)||(this.r++,this.e[fcn](a),this.K++);this.i[a]=b};fc1[fc].nb=function(a){var b;a instanceof fc1?(b=a.z(),a=a.F()):(b=fcwb(a),a=fcvb(a));for(var c=0;c<b[fco];c++)this.set(b[c],a[c])};fc1[fc].clone=function(){return new fc1(this)};
fc1[fc].__iterator__=function(a){this.L();var b=0,c=this.e,d=this.i,e=this.K,g=this,l=new fcOb;l.next=function(){for(;;){if(e!=g.K)throw fcb("The map has changed since the iterator was created");if(b>=c[fco])throw fcNb;var l=c[b++];return a?l:d[l]}};return l};var fcPb=function(a,b){return fcca[fc].hasOwnProperty[fcC](a,b)};var fcRb=function(a,b,c){fcR(b)?fcQb(a,c,b):fcub(b,fcHa(fcQb,a))},fcQb=function(a,b,c){(c=fcSb(a,c))&&(a[fcA][c]=b)},fcSb=function(a,b){var c=fcTa(b);if(void 0===a[fcA][c]){var d=(fcY?"Webkit":fc1a?"Moz":fcX?"ms":fc0a?"O":null)+fcUa(b);if(void 0!==a[fcA][d])return d}return c},fcTb=function(a,b){var c=9==a.nodeType?a:a.ownerDocument||a[fct];return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""},fcUb=function(a){var b;try{b=
a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}fcX&&(a=a.ownerDocument,b.left=b[fcma]-(a.documentElement.clientLeft+a[fcB].clientLeft),b.top-=a.documentElement.clientTop+a[fcB].clientTop);return b},fcXb=function(a,b,c){if(b instanceof fc_)c=b[fcM],b=b[fcp];else if(void 0==c)throw fcb("missing height argument");fcVb(a,b);fcWb(a,c)},fcYb=function(a,b){"number"==typeof a&&(a=(b?fci[fcq](a):a)+"px");return a},fcWb=function(a,b){fcl(a[fcA],fcYb(b,!0))},fcVb=function(a,b){fcj(a[fcA],
fcYb(b,!0))},fc_b=function(a){if("none"!=(fcTb(a,"display")||(a.currentStyle?a.currentStyle[fcxa]:null)||a[fcA]&&a[fcA][fcxa]))return fcZb(a);var b=a[fcA],c=b[fcxa],d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=fcZb(a);b.display=c;b.position=e;b.visibility=d;return a},fcZb=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=fcY&&!b&&!c;return fcCa(b)&&!d||!a.getBoundingClientRect?new fc_(b,c):(a=fcUb(a),new fc_(a[fcP]-a[fcma],a.bottom-a.top))},fc0b=function(a,
b){a[fcA].display=b?"":"none"};var fc1b={},fc2b={};var fc3b=function(a,b,c,d){b=b||"800";c=c||"550";d=d||"friendconnect";a=fcf.open(a,d,"menubar=no,toolbar=no,dialog=yes,location=yes,alwaysRaised=yes,width="+b+",height="+c+",resizable=yes,scrollbars=1,status=1");fcf.focus&&a&&a.focus()},fc4b=function(a,b){var c=fca[fcJ][fcy]().communityId;fca.rpc[fcC](null,"signin",null,c,a,b)};fcU("goog.peoplesense.util.openPopup",fc3b);fcU("goog.peoplesense.util.finishSignIn",fc4b);var fc7b=function(a,b){var c=fc5b()+"/friendconnect/invite/friends",d=fcd(shindig[fcta][fcva]());fc6b(c,d,a,b)},fc6b=function(a,b,c,d){a+="?st="+b;c&&(a+="&customMessage="+fcd(c));d&&(a+="&customInviteUrl="+fcd(d));b=760;fcX&&(b+=25);fc3b(a,fce(b),"515","friendconnect_invite")};fcU("goog.peoplesense.util.invite",fc7b);fcU("goog.peoplesense.util.inviteFriends",fc6b);var fc8b=function(a){this.url=a};fc8b[fc].l=function(a,b){if(0<=this.url[fcz]("?"+a+"=")||0<=this.url[fcz]("&"+a+"="))throw fcb("duplicate: "+a);if(null===b||void 0===b)return this;var c=0<=this.url[fcz]("?")?"&":"?";this.url+=c+a+"="+fcd(b);return this};fc8b[fc].toString=function(){return this.url};var fc5b=function(){return fcf.friendconnect_serverBase},fc9b=function(a,b,c,d,e,g,l){b=b||"800";c=c||"550";d=d||"friendconnect";g=g||!1;fca.rpc[fcC](null,"openLightboxIframe",l,a,shindig[fcta][fcva](),b,c,d,e,null,null,null,g)},fc$b=function(a,b){var c=fca[fcJ][fcy]().psinvite||"",d=new fc8b(fc5b()+"/friendconnect/signin/home");d.l("st",fcf.shindig[fcta][fcva]());d.l("psinvite",c);d.l("iframeId",a);d.l("loginProvider",b);d.l("subscribeOnSignin","1");fc3b(d[fcfa]());return!1},fcac=function(){var a=
fca[fcJ][fcy]().communityId;fca.rpc[fcC](null,"signout",null,a)},fccc=function(a,b){var c=fc5b()+"/friendconnect/settings/edit?st="+fcd(shindig[fcta][fcva]())+(a?"&iframeId="+fcd(a):"");b&&(c=c+"&"+b);fcbc(c)},fcdc=function(a){a=fc5b()+"/friendconnect/settings/siteProfile?st="+fcd(a);fcbc(a)},fcbc=function(a){var b=800,c=510;fcX&&(b+=25);fc3b(a,fce(b),fce(c))},fcec=function(a,b,c,d){d=d||2;var e=null;if("text"==b)e=fc0("div",{"class":"gfc-button-text"},fc0("div",{"class":"gfc-icon"},fc0("a",{href:"javascript:void(0);"},
c))),a[fcm](e);else if("long"==b||"standard"==b)e=1==d?fc0("div",{"class":"gfc-inline-block gfc-primaryactionbutton gfc-button-base"},fc0("div",{"class":"gfc-inline-block gfc-button-base-outer-box"},fc0("div",{"class":"gfc-inline-block gfc-button-base-inner-box"},fc0("div",{"class":"gfc-button-base-pos"},fc0("div",{"class":"gfc-button-base-top-shadow",innerHTML:"&nbsp;"}),fc0("div",{"class":"gfc-button-base-content"},fc0("div",{"class":"gfc-icon"},c)))))):fc0("table",{"class":"gfc-button-base-v2 gfc-button",
cellpadding:"0",cellspacing:"0"},fc0("tbody",{"class":""},fc0("tr",{"class":""},fc0("td",{"class":"gfc-button-base-v2 gfc-button-1"}),fc0("td",{"class":"gfc-button-base-v2 gfc-button-2"},c),fc0("td",{"class":"gfc-button-base-v2 gfc-button-3"})))),a[fcm](e),"standard"==b&&(b=fc0("div",{"class":"gfc-footer-msg"},"with Google Friend Connect"),1==d&&a[fcm](fc0("br")),a[fcm](b));return e},fcfc=function(a,b){if(!a)throw"google.friendconnect.renderSignInButton: missing options";var c=a[fcA]||"standard",
d=a.text,e=a.version;if("standard"==c)d=a.text||"Sign in";else if("text"==c||"long"==c)d=a.text||"Sign in with Friend Connect";var g=a.element;if(!g){g=a.id;if(!g)throw"google.friendconnect.renderSignInButton: options[id] and options[element] == null";g=fcFb(g);if(!g)throw"google.friendconnect.renderSignInButton: element "+a.id+" not found";}fck(g,"");c=fcec(g,c,d,e);fcf[fcH]?c[fcH]("click",b,!1):c.attachEvent("onclick",b)},fcgc=function(a,b){b=b||fcT(fc$b,null,null,null,null);fcfc(a,b)},fchc=function(a,
b){fca.rpc[fcC](null,"putReloadViewParam",null,a,b);var c=fca.views.getParams();c[a]=b},fcic=function(a,b){var c=new fc8b("/friendconnect/gadgetshare/friends");c.l("customMessage",a);c.l("customInviteUrl",b);c.l("container","glb");var d=310;fcX&&(d+=25);fc9b(c[fcfa](),fce(d),"370")};fcU("goog.peoplesense.util.getBaseUrl",fc5b);fcU("goog.peoplesense.util.finishSignIn",fc4b);fcU("goog.peoplesense.util.signout",fcac);fcU("goog.peoplesense.util.signin",fc$b);fcU("goog.peoplesense.util.editSettings",fccc);
fcU("goog.peoplesense.util.editSSProfile",fcdc);fcU("goog.peoplesense.util.setStickyViewParamToken",fchc);fcU("google.friendconnect.renderSignInButton",fcgc);fcU("goog.peoplesense.util.share",fcic);fcU("goog.peoplesense.util.userAgent.IE",fcX);var fcjc={},fckc={},fc2=function(a){this.h=new fc1;this.snippetId=a.id;this.site=a.site;a=a["view-params"];var b=a.skin;this.gc=(b?b.POSITION:"top")||"top";this.Ic={allowAnonymousPost:a.allowAnonymousPost||!1,scope:a.scope||"SITE",docId:a.docId||"",features:a.features||"video,comment",startMaximized:"true",disableMinMax:"true",skin:b};this.absoluteBottom=fcX&&!fc9a("7");this.fixedIeSizes=fcX;fcf[fcH]?fcf[fcH]("resize",fcT(this.db,this),!1):fcf.attachEvent("onresize",fcT(this.db,this));this.sb()};
fc2[fc].sb=function(){if(!this.site)throw fcb("Must supply site ID.");if(!this.snippetId)throw fcb("Must supply a snippet ID.");};fc2[fc].b=10;fc2[fc].Da=1;fc2[fc].q="fc-friendbar-";fc2[fc].t=fc2[fc].q+"outer";fc2[fc].gb=fc2[fc].t+"-shadow";fc2[fc].render=function(){fcg.write(this.Ab());var a=fcEb(this.snippetId);fck(a,this.P())};fc2[fc].Bb=function(){var a=fcEb(this.t);return a=fc_b(a)[fcp]};fc2[fc].db=function(){for(var a=this.h.z(),b=0;b<a[fco];b++)this.sc(a[b]);goog&&(fc1b&&fc2b&&fclc)&&fcmc("resize")};
fc2[fc].n=function(){return this.gc};fc2[fc].d=function(a){return this.q+"shadow-"+a};fc2[fc].ka=function(a){return this.q+"menus-"+a};fc2[fc].S=function(a){return this.q+a+"Target"};fc2[fc].ha=function(a){return this.q+a+"Drawer"};fc2[fc].Ta=function(){return this.S("")};fc2[fc].Ua=function(){return this.q+"wallpaper"};fc2[fc].Pa=function(){return this.ha("")};
fc2[fc].Ab=function(){var a=fcf.friendconnect_imageUrl+"/",b=a+"shadow_tc.png",c=a+"shadow_bc.png",d=a+"shadow_bl.png",e=a+"shadow_tl.png",g=a+"shadow_tr.png",l=a+"shadow_br.png",a=a+"shadow_cr.png",k=function(a,b){return fcX?'filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale");':"background-image: url("+a+");background-repeat: "+b+"; "},m="position:absolute; top:";"top"!=this.n()&&(m="position:fixed; bottom:",this.absoluteBottom&&(m="position:absolute; bottom:"));
var n=c;"top"!=this.n()&&(n=b);var h=0,f=[];f[h++]='<style type="text/css">';"top"!=this.n()&&this.absoluteBottom&&(f[h++]="html, body {height: 100%; overflow: auto; };");f[h++]="#"+this.t+" {";f[h++]="background:#E0ECFF;";f[h++]="left:0;";f[h++]="height: "+(fcX?"35px;":"36px;");"top"!=this.n()&&this.absoluteBottom&&(f[h++]="margin-right: 20px;");f[h++]="padding:0;";f[h++]=m+" 0;";f[h++]="width:100%;";f[h++]="z-index:5000;";f[h++]="}";f[h++]="#"+this.gb+" {";f[h++]=k(n,"repeat-x");f[h++]="left:0;";
f[h++]="height:"+this.b+"px;";"top"!=this.n()&&this.absoluteBottom&&(f[h++]="margin-right: 20px;");f[h++]="padding:0;";f[h++]=m+(fcX?"35px;":"36px;");f[h++]="width:100%;";f[h++]="z-index:4998;";f[h++]="}";f[h++]="."+this.Pa()+" {";f[h++]="display: block;";f[h++]="padding:0;";f[h++]=m+(fcX?"34px;":"35px;");f[h++]="z-index:4999;";f[h++]="}";f[h++]="."+this.Ua()+" {";f[h++]="background: white;";f[h++]="height: 100%;";f[h++]="margin-right: "+this.b+"px;";f[h++]="}";f[h++]="."+this.Ta()+" {";f[h++]="border: "+
this.Da+"px solid #ccc;";f[h++]="height: 100%;";f[h++]="left: 0;";f[h++]="background-image: url("+fcf.friendconnect_imageUrl+"/loading.gif);";f[h++]="background-position: center;";f[h++]="background-repeat: no-repeat;";f[h++]="}";f[h++]="."+this.d("cr")+" {";f[h++]=k(a,"repeat-y");f[h++]="height: 100%;";f[h++]="position:absolute;";f[h++]="right: 0;";f[h++]="top: 0;";f[h++]="width:"+this.b+"px;";f[h++]="}";f[h++]="."+this.d("bl")+" {";f[h++]=k(d,"no-repeat");f[h++]="height: "+this.b+"px;";f[h++]="position:absolute;";
f[h++]="width:"+this.b+"px;";f[h++]="}";f[h++]="."+this.d("tl")+" {";f[h++]=k(e,"no-repeat");f[h++]="height: "+this.b+"px;";f[h++]="position:absolute;";f[h++]="left:0px;";f[h++]="width:"+this.b+"px;";f[h++]="}";f[h++]="."+this.d("bc")+" {";f[h++]=k(c,"repeat-x");f[h++]="height: "+this.b+"px;";f[h++]="left: "+this.b+"px;";f[h++]="position:absolute;";f[h++]="right: "+this.b+"px;";f[h++]="}";f[h++]="."+this.d("tc")+" {";f[h++]=k(b,"repeat-x");f[h++]="height: "+this.b+"px;";f[h++]="left: "+this.b+"px;";
f[h++]="margin-left: "+this.b+"px;";f[h++]="margin-right: "+this.b+"px;";f[h++]="right: "+this.b+"px;";f[h++]="}";f[h++]="."+this.d("br")+" {";f[h++]=k(l,"no-repeat");f[h++]="height: "+this.b+"px;";f[h++]="position:absolute;";f[h++]="right: 0;";f[h++]="width: "+this.b+"px;";f[h++]="}";f[h++]="."+this.d("tr")+" {";f[h++]=k(g,"no-repeat");f[h++]="height: "+this.b+"px;";f[h++]="position:absolute;";f[h++]="right: 0;";f[h++]="top: 0;";f[h++]="width: "+this.b+"px;";f[h++]="}";f[h++]="</style>";return f[fcO]("")};
fc2[fc].P=function(){var a=['<div id="'+this.t+'"></div>','<div id="'+this.gb+'"></div>','<div id="'+this.ka(this.h.Q())+'"></div>'];return a[fcO]("")};fc2[fc].ub=function(a,b,c,d){this.h.N(a)||(b=new fc3(this,a,b,c,d),c=this.h.Q(),d=fcEb(this.ka(c)),fck(d,b.P()+'<div id="'+this.ka(c+1)+'"></div>'),this.h.set(a,b))};fc2[fc].oa=function(a){(a=this.h.get(a))&&a.drawer&&fc0b(a.drawer,!1)};fc2[fc].ic=function(a){if(a=this.h.get(a))a.rendered=!1};
fc2[fc].refresh=function(){for(var a=this.h.z(),b=0;b<a[fco];b++){var c=a[b];this.oa(c);this.ic(c)}};fc2[fc].cc=function(a){for(var b=this.h.F(),c=0;c<b[fco];c++){var d=b[c];if(d.id==a){d.Fc();break}}};fc2[fc].bc=function(a){for(var b=this.h.F(),c=0;c<b[fco];c++){var d=b[c];if(d.id==a){d.Zb();break}}};fc2[fc].sc=function(a){(a=this.h.get(a))&&(a.drawer&&a.qa())&&(a.fa(),a.La(),a.Ca())};
fc2[fc].Ec=function(a,b){var c=this.h.get(a);if(c){c.drawer||(c.drawer=fcEb(this.ha(c[fcL])),c.target=fcEb(this.S(c[fcL])),c.sha_bc=fcGb(fcg,"div","top"==this.n()?this.d("bc"):this.d("tc"),c.drawer)[0],c.sha_cr=fcGb(fcg,"div",this.d("cr"),c.drawer)[0]);for(var d=this.h.z(),e=0;e<d[fco];e++){var g=d[e];a!==g&&this.oa(g)}c.fa(b);fc0b(c.drawer,!0);fcf.setTimeout(function(){c.Ca();c.La();c.render()},0)}};
var fc3=function(a,b,c,d,e){this.id=-1;this.bar=a;this.name=b;this.constraints=d;this.skin=e||{};fcl(this,this.skin.HEIGHT||"0");this.url=fcf.friendconnect_serverBase+c;this.sha_bc=this.target=this.drawer=null;this.loaded=this.rendered=!1;this.fa()};
fc3[fc].fa=function(a){fcyb(this.constraints,a||{});fcyb(this.skin,this.constraints);if(this.bar.fixedIeSizes&&this.constraints[fcma]&&this.constraints[fcP]){a=this.bar.Bb();var b=this.constraints[fcma],c=this.constraints[fcP];a-=b+c;a%2&&(a-=1,this.skin.right=this.skin[fcP]+1);fcj(this.skin,a);delete this.skin[fcma]}};
fc3[fc].Ca=function(){if(this.drawer){if(this.skin[fcp]){var a=this.bar.Da,b=this.bar.b,c=fcX?2:0;fcXb(this.target,this.skin[fcp],"");fcXb(this.sha_bc,this.skin[fcp]-b+2*a-c,"");this.skin.rightShadow?fcXb(this.drawer,this.skin[fcp]+b+2*a-c,""):fcXb(this.drawer,this.skin[fcp]+2*a-c,"")}this.skin[fcP]&&(this.drawer[fcA].right=this.skin[fcP]+0+"px")}};
fc3[fc].La=function(){if(fcX&&this.drawer){var a=fc_b(this.target),b=a[fcp]-this.bar.b,a=a[fcM];0>b&&(b=0);this.sha_bc&&this.sha_bc[fcA]&&fcXb(this.sha_bc,b,"");this.sha_cr&&this.sha_cr[fcA]&&fcXb(this.sha_cr,"",a)}};
fc3[fc].P=function(){var a="display:none;",b="position: relative; ",c="",d="",e="",g="",l=!!this.skin.rightShadow;l||(c+="display: none; ",e+="display: none; ",d+="right: 0px; ",g+="margin-right: 0px; ");for(var k in this.skin){var m=Number(this.skin[k]);l&&0==fcLa(k,"width")&&(m+=this.bar.b);0==fcLa(k,"height")&&(b+=k+": "+m+"px; ");"rightShadow"!=k&&(0==fcLa(k,"height")&&(m+=this.bar.b),0==fcLa(k,"width")&&(m+=2),a+=k+": "+m+"px; ");fcX&&0==fcLa(k,"width")&&(m=l?m-2*this.bar.b:m-this.bar.b,d+=k+
": "+m+"px; ")}fcX&&0<(this[fcM]|0)&&(l=(this[fcM]|0)+2,c+="height: "+l+"px; ");l=0;k=[];k[l++]='<div id="'+this.bar.ha(this[fcL])+'"class="'+this.bar.Pa()+'"style="'+a+'"> ';"bottom"==this.bar.n()&&(k[l++]='<div class="'+this.bar.d("tl")+'"></div> <div class="'+this.bar.d("tc")+'"style="'+d+'"></div> <div class="'+this.bar.d("tr")+'"style="'+e+'"></div> ');k[l++]='<div style="'+b+'"> <div class="'+this.bar.Ua()+'"style="'+g+'"><div id="'+this.bar.S(this[fcL])+'"class="'+this.bar.Ta()+'"></div> <div class="'+
this.bar.d("cr")+'"style="'+c+'"></div> </div> </div> ';"top"==this.bar.n()&&(k[l++]='<div class="'+this.bar.d("bl")+'"></div> <div class="'+this.bar.d("bc")+'"style="'+d+'"></div> <div class="'+this.bar.d("br")+'"style="'+e+'"></div> ');k[l++]="</div> ";return k[fcO]("")};fc3[fc].Fc=function(){this.rendered=this.qa()};fc3[fc].Zb=function(){this.loaded=this.qa()};fc3[fc].qa=function(){return!!this.drawer&&"none"!=this.drawer[fcA][fcxa]};
fc3[fc].render=function(){if(!1==this.rendered){var a={};a.url=this.url;a.id=this.bar.S(this[fcL]);a.site=this.bar.site;a["view-params"]=fcS(this.bar.Ic);"profile"==this[fcL]&&(a["view-params"].profileId="VIEWER");this.skin&&fcyb(a["view-params"].skin,this.skin);a["view-params"].menuName=this[fcL];a["view-params"].opaque="true";a["view-params"].menuPosition=this.bar.gc;fcl(a,"1px");fcjc&&(fckc&&fc4)&&(this.id=fc4.render(a))}};fcU("google.friendconnect.FriendBar",fc2);var fcnc="0123456789abcdefghijklmnopqrstuv",fcpc=function(a){a=new fcoc(a);if(a.sa()%5)throw fcb();for(var b=[],c=0;0<a.sa();c++)b[c]=fcnc[fcw](a.ec(5));return b[fcO]("")},fcoc=function(a){this.G=this.o=0;this.ea=a};fcoc[fc].sa=function(){return 8*(this.ea[fco]-this.G)-this.o};
fcoc[fc].ec=function(a){var b=0;if(a>this.sa())throw fcb();if(0<this.o){var b=255>>this.o&this.ea[this.G],c=8-this.o,d=fci.min(a%8,c),c=c-d,b=b>>c;a-=d;this.o+=d;8==this.o&&(this.o=0,this.G++)}for(;8<=a;)b<<=8,b|=this.ea[this.G],this.G++,a-=8;0<a&&(b<<=a,b|=this.ea[this.G]>>8-a,this.o=a);return b};var fcqc=(new Date).getTime(),fc5=function(){},fcrc=function(){},fcsc=function(){},fctc=function(){};fcV(fctc,fcsc);var fcuc=function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);if(this.viewParams)for(var c in this.viewParams)/^FC_RELOAD_.*$/[fcia](c)&&(this.viewParams[c]=null)};fcuc[fc].render=function(a){var b=this;a&&(b.Gc(),this.Db(function(c){fcRb(a,"visibility","hidden");fck(a,c);b.refresh(a,c);c=function(a){fcRb(a,"visibility","visible")};c=fcHa(c,a);fcba(c,500);b.chrome=a}))};
fcuc[fc].Db=function(a){return this.Jb(a)};var fc6=function(a){fcuc[fcC](this,a);this.W="../../";this.rpcToken=fce(fci[fcq](2147483647*fci[fcna]()))};fcV(fc6,fcuc);fc6[fc].lb="gfc_iframe_";fc6[fc].mb="friendconnect";fc6[fc].Ma="";fc6[fc].tc="rpc_relay.html";fc6[fc].Z=function(a){this.W=a};fc6[fc].Gc=function(){return this.Ma=fce(fci[fcq](2147483647*fci[fcna]()))};fc6[fc].ia=function(){return this.lb+this.Ma+"_"+this.id};
fc6[fc].refresh=function(a,b){var c=fc4.Lc,d,e={},g=fc4.Na(this.communityId),l=g[fcu]("~"),k=fc4.vb;if(k&&1<l[fco]){d=l[2];var l=l[1],m=[this.specUrl,this.communityId,l,k][fcO](":");e.sig=fc4.hash(d,m);e.userId=l;e.dateStamp=k}e.container=this.mb;e.mid=this.id;e.nocache=fc4.fc;e.view=this.aa;e.parent=fc4.U;this.debug&&(e.debug="1");this.specUrl&&(e.url=this.specUrl);this.communityId&&(k=fca[fcJ][fcy]().profileId,e.communityId=this.communityId,(d=fca[fcJ][fcy]().psinvite)&&(e.psinvite=d),k&&(e.profileId=
k));e.caller=fcvc();e.rpctoken=this.rpcToken;k=!1;d="";l=/Version\/3\..*Safari/;if((l=fcY&&fcYa()[fcD](l))||!fc4.T[this.specUrl]&&this.viewParams)e["view-params"]=fca[fcG][fcha](this.viewParams),d="?viewParams="+fcd(e["view-params"]),k=!0;this.prefs&&(e.prefs=fca[fcG][fcha](this.prefs));this.viewParams&&this.sendViewParamsToServer&&(e["view-params"]=fca[fcG][fcha](this.viewParams));this.locale&&(e.locale=this.locale);this.secureToken&&(e.st=this.secureToken);l=fc4.Sa(this.specUrl);d=l+"ifr"+d+(this.hashData?
"&"+this.hashData:"");1!=fc4.Kc||k||g||this.secureToken?g&&!e.sig&&(e.fcauth=g):e.sig||(c="get");g=this.ia();fcwc(g,d,c,e,a,b,this.rpcToken)};var fc7=function(){this.j={};this.U="http://"+fcg[fcx].host;this.aa="default";this.fc=1;this.Pc=0;this.Mc="US";this.Nc="en";this.Oc=2147483647};fcV(fc7,fcrc);fc7[fc].v=fcuc;fc7[fc].B=new fctc;fc7[fc].fb=function(a){this.fc=a};fc7[fc].Ka=function(a){this.Kc=a};fc7[fc].Ra=function(a){return"gadget_"+a};fc7[fc].w=function(a){return this.j[this.Ra(a)]};
fc7[fc].O=function(a){return new this.v(a)};fc7[fc].ob=function(a){a.id=this.Kb();this.j[this.Ra(a.id)]=a};fc7[fc].dc=0;fc7[fc].Kb=function(){return this.dc++};var fcyc=function(){fc7[fcC](this);this.B=new fcxc};fcV(fcyc,fc7);fcyc[fc].v=fc6;fcyc[fc].Y=function(a){a[fcD](/^http[s]?:\/\//)||(a=fcg[fcx][fcoa][fcD](/^[^?#]+\//)[0]+a);this.U=a};fcyc[fc].I=function(a){var b=this.B.Qa(a);a.render(b)};var fcxc=function(){this.zb={}};fcV(fcxc,fcsc);
fcxc[fc].pb=function(a,b){this.zb[a]=b;var c=fcg[fcv](b).className;c||0!=c[fco]||fcea(fcg[fcv](b),"gadgets-gadget-container")};fcxc[fc].Qa=function(a){return(a=this.zb[a.id])?fcg[fcv](a):null};var fc8=function(a){fc6[fcC](this,a);a=a||{};this.aa=a.view||"profile"};fcV(fc8,fc6);fc8[fc].rb="canvas.html";fc8[fc].xb="/friendconnect/embed/";
var fcvc=function(){var a="1"==fca[fcJ][fcy]().canvas||"1"==fca[fcJ][fcy]().embed,b=null;a&&(b=fca[fcJ][fcy]().caller);b||(a=fcg[fcx],b=a.search[fcs](/([&?]?)psinvite=[^&]*(&?)/,function(a,b,e){return e?b:""}),b=a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")+a.pathname+b);return b};fc8[fc].Cc=function(a){this.aa=a};fc8[fc].na=function(){return this.aa};fc8[fc].getBodyId=function(){return this.ia()+"_body"};
fc8[fc].Jb=function(a){var b=this.specUrl;void 0===b&&(b="");var b=(fc4.Sa(b)||this.W)+this.tc,c=this.ia();fca.rpc.setRelayUrl(c,b);b='<div id="'+this.getBodyId()+'"><iframe id="'+c+'" name="'+c;b=0==this[fcM]?b+'" style="width:1px; height:1px;':b+'" style="width:100%;';this.viewParams.opaque&&(b+="background-color:white;");b+='"';b+=' frameborder="0" scrolling="no"';this.viewParams.opaque||(b+=' allowtransparency="true"');b+=this[fcM]?' height="'+this[fcM]+'"':"";b+=this[fcp]?' width="'+this[fcp]+
'"':"";b+="></iframe>";this.showEmbedThis&&(b+='<a href="javascript:void(0);" onclick="google.friendconnect.container.showEmbedDialog(\''+this.divId+"'); return false;\">Embed this</a>");b+="</div>";a(b)};
fc8[fc].Cb=function(){var a=fcvc(),a="canvas=1&caller="+fcd(a),b=fca[fcJ][fcy]().psinvite;b&&(a+="&psinvite="+fcd(b));a+="&site="+fcd(this.communityId);b=fcS(this.viewParams);if(null!=b.skin)for(var c="BG_IMAGE BG_COLOR FONT_COLOR BG_POSITION BG_REPEAT ANCHOR_COLOR FONT_FACE BORDER_COLOR CONTENT_BG_COLOR CONTENT_HEADLINE_COLOR CONTENT_LINK_COLOR CONTENT_SECONDARY_TEXT_COLOR CONTENT_SECONDARY_LINK_COLOR CONTENT_TEXT_COLOR ENDCAP_BG_COLOR ENDCAP_LINK_COLOR ENDCAP_TEXT_COLOR CONTENT_VISITED_LINK_COLOR ALTERNATE_BG_COLOR".split(" "),d=
0;d<c[fco];d++)delete b.skin[c[d]];b=fcd(fca[fcG][fcha](b));b=b[fcs]("\\","%5C");return fc4.U+this.rb+"?url="+fcd(this.specUrl)+(a?"&"+a:"")+"&view-params="+b};fc8[fc].D=function(a){a=a||fcc+this.xb+this.communityId;return this.Eb(a,"embed=1")};fc8[fc].C=function(a){return'<iframe src="'+this.D(a)+'" style="height:500px" scrolling="no" allowtransparency="true" border="0" frameborder="0" ></iframe>'};
fc8[fc].Eb=function(a,b){var c=fcd(fca[fcG][fcha](this.viewParams)),c=c[fcs]("\\","%5C");return a+"?url="+fcd(this.specUrl)+(b?"&"+b:"")+"&view-params="+c};fc8[fc].Nb=function(){var a="1"==fca[fcJ][fcy]().canvas||"1"==fca[fcJ][fcy]().embed,b=null;a&&((b=fca[fcJ][fcy]().caller)||(b="javascript:history.go(-1)"));return b};fc8[fc].Ob=function(a){var b=null;"canvas"==a?b=this.Cb():"profile"==a&&(b=this.Nb());return b};
var fc9=function(){fcyc[fcC](this);fca.rpc[fcN]("signin",fc5[fc].signin);fca.rpc[fcN]("signout",fc5[fc].signout);fca.rpc[fcN]("resize_iframe",fc5[fc].eb);fca.rpc[fcN]("set_title",fc5[fc].setTitle);fca.rpc[fcN]("requestNavigateTo",fc5[fc].cb);fca.rpc[fcN]("api_loaded",fc5[fc].Ba);fca.rpc[fcN]("createFriendBarMenu",fc5[fc].Ga);fca.rpc[fcN]("showFriendBarMenu",fc5[fc].hb);fca.rpc[fcN]("hideFriendBarMenu",fc5[fc].Va);fca.rpc[fcN]("putReloadViewParam",fc5[fc].Za);fca.rpc[fcN]("getViewParams",fc5[fc].Ja);
fca.rpc[fcN]("getContainerBaseTime",fc5[fc].Ia);fca.rpc[fcN]("openLightboxIframe",fc5[fc].Ya);fca.rpc[fcN]("showMemberProfile",fc5[fc].jb);fca.rpc[fcN]("closeLightboxIframe",fcT(this.u,this));fca.rpc[fcN]("setLightboxIframeTitle",fcT(this.yc,this));fca.rpc[fcN]("refreshAndCloseIframeLightbox",fcT(this.hc,this));var a=fczc;a[fcN]();a.kb(this,"load",this.Qb);a.kb(this,"start",this.Rb);this.W="../../";this.Y("");this.fb(0);this.Ka(1);this.ra=null;this.apiVersion="0.8";this.openSocialSecurityToken=null;
this.X="";this.Ha={};this.Yb=null;this.Xb=!1;this.vb=this.ac=this.lastIframeLightboxOpenArguments=this.lastLightboxCallback=this.lastLightboxDialog=null;this.Lc="post"};fcV(fc9,fcyc);fc9[fc].wc=function(a){this.vb=a};fc9[fc].v=fc8;fc9[fc].T={};fc9[fc].Ac=function(a){this.ra=a};fc9[fc].Sa=function(a){var b=fc9[fc].T[a];b||(0!==this.ra[fcz]("http://")?(a=this.tb(a),b=["http://",a,this.ra][fcO]("")):b=this.ra);return b};
fc9[fc].tb=function(a){var b=new SHA1;a=fckb(a);b.update(a);b=b.digest();return b=fcpc(b)};
var fcAc=function(a,b){var c=b?b:fcf.top,d=c.frames;try{if(c.frameElement.id==a)return c}catch(e){}for(c=0;c<d[fco];++c){var g=fcAc(a,d[c]);if(g)return g}return null},fcwc=function(a,b,c,d,e,g,l){var k="gfc_load_"+a;b='<html><head><style type="text/css">body {background:transparent;}</style>'+(fcX?'<script type="text/javascript">window.goback=function(){history.go(-1);};setTimeout("goback();", 0);\x3c/script>':"")+"</head><body><form onsubmit='window.goback=function(){};return false;' style='margin:0;padding:0;' id='"+
k+"' method='"+c+"' ' action='"+fca[fcJ].escapeString(b)+"'>";for(var m in d)b+="<input type='hidden' name='"+m+"' value='' >";b+="</form></body></html>";c=fcAc(a);var n;try{n=c[fct]||c.contentWindow[fct]}catch(h){e&&g&&(fck(e,""),fck(e,g),c=fcAc(a),n=c[fct]||c.contentWindow[fct])}l&&fca.rpc.setAuthToken(a,l);n.open();n.write(b);n.close();a=n[fcv](k);for(m in d)a[m].value=d[m];if(fcX)a.onsubmit();a.submit()};
fc9[fc].yb=function(){var a=fca[fcJ][fcy]().fcsite,b=fca[fcJ][fcy]().fcprofile;a&&b&&fc4.Aa(b,a)};fc9[fc].xc=function(a,b){this.T[a]=b};fc9[fc].V=function(){var a=/Version\/3\..*Safari/;if(a=fcY&&fcYa()[fcD](a))fcg[fcx].reload();else{null!=fc4.g&&fc4.g.refresh();for(var b in fc4.j)a=fc4.j[b],this.I(a);null!=this.lastIframeLightboxOpenArguments&&(b=this.lastIframeLightboxOpenArguments,this.u(),this.ta[fcK](this,b))}};
fc9[fc].Y=function(a){a[fcD](/^http[s]?:\/\//)||(a=a&&0<a[fco]&&"/"==a[fcpa](0,1)?fcg[fcx][fcoa][fcD](/^http[s]?:\/\/[^\/]+\//)[0]+a[fcpa](1):fcg[fcx][fcoa][fcD](/^[^?#]+\//)[0]+a);this.U=a};fc9[fc].ga=function(a){return"fcauth"+a};fc9[fc].ma=function(a){return"fcauth"+a+"-s"};fc9[fc].hash=function(a,b){var c=new SHA1,d=fcrb(a,!0),c=new G_HMAC(c,d,64),d=fckb(b),c=c.Ib(d);(new Date).getTime();return fcqb(c,!0)};
fc9[fc].Na=function(a){return a=fctb.get(this.ga(a))||fctb.get(this.ma(a))||this.Ha[a]||""};fc9[fc].Z=function(a){this.W=a};fc9[fc].Bc=function(a){this.X=a};fc9[fc].O=function(a){a=new this.v(a);a.Z(this.W);return a};fc9[fc].na=function(){return this.aa};fc9[fc].zc=function(a){this.ac=a};var fc$=function(a){return(a=a[fcD](/_([0-9]+)$/))?fcaa(a[1],10):null};
fc9[fc].$=function(a,b,c,d,e,g){this.Jc||(this.ba(fcf.friendconnect_serverBase+"/friendconnect/styles/container.css?d="+this.X),this.Jc=!0);var l=fcBc(d);this.Yb!=(l?"rtl":"ltr")&&(this.ba(fcf.friendconnect_serverBase+"/friendconnect/styles/lightbox"+(l?"-rtl":"")+".css?d="+this.X),this.Yb=l?"rtl":"ltr");this.Xb||(this.qb(fcf.friendconnect_serverBase+"/friendconnect/script/lightbox.js?d="+this.X),this.Xb=!0);b=b||0;if(goog.ui&&goog.ui[fcla]){this.u();b=new goog.ui[fcla]("lightbox-dialog",!0);var k=
this;goog.events.listen(b,goog.ui[fcla].EventType.AFTER_HIDE,function(){k.lastLightboxCallback&&k.lastLightboxCallback();k.Fa()});b.setDraggable(!0);b.setDisposeOnHide(!0);b.setBackgroundElementOpacity(0.5);b.setButtonSet(new goog.ui[fcla].ButtonSet);this.lastLightboxDialog=b;this.lastLightboxCallback=c||null;c=b.getDialogElement();e=e||702;fcRb(c,"width",fce(e)+"px");g&&fcRb(c,"height",fce(g)+"px");a(b);b.getDialogElement()[fcA].direction=l?"rtl":"ltr"}else if(5>b)b++,a=fcT(this.$,this,a,b,c,d,e,
g),fcba(a,1E3);else throw this.Fa(),fcb("lightbox.js failed to load");};fc9[fc].u=function(a){var b=this.lastLightboxDialog,c=this.lastLightboxCallback;this.lastLightboxCallback=null;null!=b&&(this.lastLightboxDialog.dispatchEvent(goog.ui[fcla].EventType.AFTER_HIDE),b.dispose(),null!=c&&c(a))};fc9[fc].Fa=function(){this.lastIframeLightboxOpenArguments=this.lastLightboxCallback=this.lastLightboxDialog=null};fc9[fc].yc=function(a){this.lastLightboxDialog&&this.lastLightboxDialog.setTitle(a)};
fc9[fc].hc=function(){this.u();this.V()};fc5[fc].cb=function(a,b){var c=fc$(this.f),c=fc4.w(c),d=fcS(c.originalParams);b&&(d["view-params"]=d["view-params"]||{},d["view-params"]=b);d.locale=c.locale;if(c.useLightBoxForCanvas)d.presentation=a,null!=fc4.lastLightboxDialog?fc4.u():fc4.ib(d);else if((c=c.Ob(a))&&fcg[fcx][fcoa]!=c)if("1"==fca[fcJ][fcy]().embed)try{fcf.parent.location=c}catch(e){fcf.top.location=c}else fcg[fcx].href=c};
fc9[fc].ib=function(a,b){a=a||{};var c=a.locale,d=fcBc(c),e=this;this.u();this.$(function(b){var c=fc0("div",{},fc0("div",{id:"gadget-signin",style:"background-color:#ffffff;height:32px;"}),fc0("div",{id:"gadget-lb-canvas",style:"background-color:#ffffff;"}));b.getTitleTextElement()[fcm](fc0("div",{id:"gfc-canvas-title",style:"color:#000000;"}));b[fcqa]()[fcm](c);b.setVisible(!0);var c=fcS(a),k=fcJb(fcf),m=fci[fcq](0.7*k[fcM]),k={BORDER_COLOR:"#cccccc",ENDCAP_BG_COLOR:"#e0ecff",ENDCAP_TEXT_COLOR:"#333333",
ENDCAP_LINK_COLOR:"#0000cc",ALTERNATE_BG_COLOR:"#ffffff",CONTENT_BG_COLOR:"#ffffff",CONTENT_LINK_COLOR:"#0000cc",CONTENT_TEXT_COLOR:"#333333",CONTENT_SECONDARY_LINK_COLOR:"#7777cc",CONTENT_SECONDARY_TEXT_COLOR:"#666666",CONTENT_HEADLINE_COLOR:"#333333"};c.id="gadget-lb-canvas";fcl(c,fci.min(498,m)+"px");c.maxHeight=m;c.keepMax&&(fcl(c,m),fcRb(b[fcqa](),"height",m+35+"px"));c["view-params"]=c["view-params"]||{};c["view-params"].opaque=!0;c["view-params"].skin=c["view-params"].skin||{};fcIa(c["view-params"].skin,
k);e.render(c);m={id:"gadget-signin",presentation:"canvas"};m.site=c.site;m.titleDivId="gfc-canvas-title";m["view-params"]={};m["view-params"].opaque=!0;m.keepMax=c.keepMax;c.securityToken&&(m.securityToken=c.securityToken);c=fcS(k);c.ALIGNMENT=d?"left":"right";e.ab(m,c);b.reposition()},void 0,b,c)};fc5[fc].hb=function(a,b){null!=fc4.g&&fc4.g.Ec(a,b)};fc5[fc].Va=function(a){null!=fc4.g&&fc4.g.oa(a)};
fc5[fc].Ya=function(a,b,c,d,e,g,l,k,m,n){var h=this.f;a=a+(0<=a[fcz]("?")?"&":"?")+"iframeId="+h;fc4.ta(a,b,c,d,e,g,l,k,m,n,this.callback)};
fc9[fc].ta=function(a,b,c,d,e,g,l,k,m,n,h){var f=fcJb(fcf);null==d&&(d=fci[fcq](0.7*f[fcM]));null==c&&(c=fci[fcq](0.7*f[fcp]));for(var p=[],f=0;f<arguments[fco]&&10>f;f++)p[fcn](arguments[f]);if("/"==!a[0])throw fcb("lightbox iframes must be relative to fc server");var r=this,q=g?fcS(g):{},t=fce(fci[fcq](2147483647*fci[fcna]())),s="gfc_lbox_iframe_"+t;fca.rpc.setAuthToken(s,t);b||(b=fc4.openSocialSecurityToken);var u=fc4.openSocialSiteId;fc4.$(function(c){r.lastIframeLightboxOpenArguments=p;var g=
"st="+fcd(b)+"&parent="+fcd(fc4.U)+"&rpctoken="+fcd(t);k||(q.iframeId=s,q.iurl=a,a=fcc+"/friendconnect/lightbox");var f=d-54;fcl(q,f);var h='<iframe id="'+s,h=h+('" width="100%" height="'+f+'" frameborder="0" scrolling="auto"></iframe>');c.setContent(h);e&&(c.setTitle(e),n&&(f=c.getTitleTextElement(),fcDb(f,"lightbox-dialog-title-small-text")));c.setVisible(!0);m||(q.fcauth=fc4.Na(u));a+=(0<=a[fcz]("?")?"&":"?")+g+"&communityId="+u;fcwc(s,a,"POST",q,null,null,null)},void 0,h,void 0,c,d)};
fc5[fc].Ja=function(){var a=fc$(this.f),a=fc4.w(a);return a.viewParams};fc5[fc].Ia=function(){return fcqc};fc5[fc].Za=function(a,b){var c=fc$(this.f),c=fc4.w(c);c.viewParams[a]=b};fc9[fc].Qb=function(a,b){null!=fc4.g&&fc4.g.bc(b)};fc9[fc].Rb=function(a,b){null!=fc4.g&&fc4.g.cc(b)};fc5[fc].Ga=function(a,b,c,d){null!=fc4.g&&fc4.g.ub(a,b,c,d)};fc9[fc].I=function(a){var b=this.B.Qa(a);a.render(b);this.B.postProcessGadget&&this.B.postProcessGadget(a)};
fc5[fc].signout=function(a){fc4.$a(fc4.ga(a));fc4.$a(fc4.ma(a));fc4.Ha={};fc4.V();return!1};fc9[fc].$a=function(a){for(var b=fcg[fcx].pathname,b=b[fcu]("/"),c=0;c<b[fco];c++){for(var d=fch(c+1),e=0;e<c+1;e++)d[e]=b[e];fctb.remove(a,d[fcO]("/")+"/")}};
fc5[fc].eb=function(a){var b=fcg[fcv](this.f);b&&0<a&&fcl(b[fcA],a+"px");(b=fcg[fcv](this.f+"_body"))&&0<a&&fcl(b[fcA],a+"px");if(b=fc$(this.f)){var c=fc4.w(b);c&&((b=fcg[fcv](c.divId))&&0<a&&(c&&(c[fcra]&&c[fcra]<a)&&(a=c[fcra],b[fcA].overflowY="auto"),fcl(b[fcA],a+"px")),!c.keepMax&&("canvas"==c.na()&&fc4.lastLightboxDialog)&&fc4.lastLightboxDialog.reposition(),fcRb(c.chrome,"visibility","visible"))}};fc5[fc].setTitle=function(a){var b=fc$(this.f),b=fc4.w(b);(b=b.titleDivId)&&fck(fcg[fcv](b),fca[fcJ].escapeString(a))};
fc5[fc].signin=function(a,b,c){fctb.set(fc4.ga(a),b,31104E3,c);fctb.set(fc4.ma(a),b,-1,c);fc4.Ha[a]=b;fc4.V()};var fcDc=function(a){fcfc(a,fcCc)};fc9[fc].nc=function(a,b){b&&this.m(b,a);var c={};c.url=fcc+"/friendconnect/gadgets/members.xml";this.render(this.s(a,c))};fc9[fc].pc=function(a,b){b&&this.m(b,a);var c={};c.url=fcc+"/friendconnect/gadgets/review.xml";c["view-params"]={startMaximized:"true",disableMinMax:"true",features:"review"};this.render(this.s(a,c))};
fc9[fc].va=function(a,b){b&&this.m(b,a);var c={};c.url=fcc+"/friendconnect/gadgets/wall.xml";c["view-params"]={startMaximized:"true",disableMinMax:"true",features:"comment"};this.render(this.s(a,c))};fc9[fc].ab=function(a,b){b&&this.m(b,a);var c={};c.url=fcc+"/friendconnect/gadgets/signin.xml";fcl(c,32);this.render(this.s(a,c))};
fc9[fc].kc=function(a,b){b&&this.m(b,a);a.prefs=a.prefs||{};a.sendViewParamsToServer=!0;a.prefs.hints=fcf.google_hints;var c={};c.url=fcc+"/friendconnect/gadgets/ads.xml";fcl(c,90);this.render(this.s(a,c))};fc9[fc].ya=function(a,b){if(a.id){b&&this.m(b,a);a["view-params"]=a["view-params"]||{};a["view-params"].opaque="true";this.g=new fc2(a);this.g.render();var c={};c.url=fcc+"/friendconnect/gadgets/friendbar.xml";a.id=this.g.t;fcl(a,"1");this.render(this.s(a,c))}};fc9[fc].mc=fc9[fc].ya;
fc9[fc].xa=function(a,b){a=a||{};a.url=fcc+"/friendconnect/gadgets/signin.xml";a.site=a.site||fca[fcJ][fcy]().site;fcl(a,32);this.wa(a,b)};fc9[fc].lc=fc9[fc].xa;fc9[fc].rc=fc9[fc].va;fc9[fc].m=function(a,b){var c=b["view-params"];c||(c={},b["view-params"]=c);c.skin=a};fc9[fc].s=function(a,b){var c=this.Xa(b,a);if(b["view-params"]){var d=b["view-params"];a["view-params"]&&(d=this.Xa(d,a["view-params"]));c["view-params"]=d}return c};fc9[fc].oc=function(a,b){b&&this.m(b,a);this.render(a)};
fc9[fc].Xa=function(a,b){var c={},d;for(d in b)c[d]=b[d];for(d in a)"undefined"==typeof c[d]&&(c[d]=a[d]);return c};
fc9[fc].render=function(a){this.openSocialSiteId=a.site;a["view-params"]=a["view-params"]||{};var b=this.O({divId:a.id,specUrl:a.url,communityId:a.site,height:a[fcM],locale:a.locale||this.ac,secureToken:a.securityToken,titleDivId:a.titleDivId,showEmbedThis:a.showEmbedThis,useLightBoxForCanvas:a.useLightBoxForCanvas||"undefined"==typeof a.useLightBoxForCanvas&&fcf.friendconnect_lightbox,viewParams:a["view-params"],prefs:a.prefs,originalParams:a,debug:a.debug,maxHeight:a[fcra],sendViewParamsToServer:a.sendViewParamsToServer,
keepMax:a.keepMax});a.presentation&&b.Cc(a.presentation);this.ob(b);this.B.pb(b.id,a.id);fcba(function(){fc4.I(b)},0);return b.id};fc9[fc].qc=function(a,b){a=a||{};a.presentation="canvas";this.bb(a,b)};
fc9[fc].bb=function(a,b,c){a=a||{};a.url=fca[fcJ][fcy]().url;a.site=fca[fcJ][fcy]().site||a.site;var d=fca[fcJ][fcy]()["view-params"];d&&(a["view-params"]=fca[fcG].parse(decodeURIComponent(d)));c&&(a["view-params"]=a["view-params"]||{},a["view-params"].useFixedHeight=!0,fcl(a["view-params"],c),b=b||{},b.HEIGHT=fce(c));this.wa(a,b)};fc9[fc].wa=function(a,b){a=a||{};b&&this.m(b,a);"1"==fca[fcJ][fcy]().canvas?a.presentation="canvas":"1"==fca[fcJ][fcy]().embed&&(a.presentation="embed");fc4.render(a)};
fc9[fc].Pb=function(){var a=fca[fcJ][fcy]().caller;a&&fcg[fcx][fcoa]!=a&&8<a[fco]&&("http://"==a.substr(0,7)[fcza]()||"https://"==a.substr(0,8)[fcza]())?fcg[fcx].href=a:(a=fca[fcJ][fcy]().site)?fcg[fcx].href=fcc+"/friendconnect/directory/site?id="+a:fcf.history.go(-1)};fc9[fc].H="";fc9[fc].Lb=function(){return this.H};fc9[fc].uc=function(a){this.apiVersion=a};fc9[fc].ba=function(a){var b=fcg[fcF]("link");b[fcI]("rel","stylesheet");b[fcI]("type","text/css");b[fcI]("href",a);fcg.getElementsByTagName("head")[0][fcm](b)};
fc9[fc].qb=function(a){var b=fcg[fcF]("script");b[fcI]("src",a);b[fcI]("type","text/javascript");fcg.getElementsByTagName("head")[0][fcm](b)};fc9[fc].Ea=function(a){fcg[fcB]?a():fcf[fcH]?fcf[fcH]("load",a,!1):fcf.attachEvent("onload",a)};fc9[fc].pa=function(a){if(!a.site)throw"API not loaded, please pass in a 'site'";this.ba(fcf.friendconnect_serverBase+"/friendconnect/styles/container.css?d="+this.X);this.openSocialSiteId=a.site;this.apiLoadedCallback=a.onload;this.Ea(fcT(this.Wa,this,a,"fc-opensocial-api"))};
fc9[fc].$b=fc9[fc].pa;fc9[fc].Sb=function(a){var b={};b.site=this.openSocialSiteId;b["view-params"]={txnId:a};this.Wa(b,"gfc-"+a)};fc9[fc].jc=function(a){var b={},c;for(c in this.j){var d=this.j[c];if(d.viewParams&&d.viewParams.txnId==a)break;else b[c]=d}this.j=b;(a=fcg[fcv]("gfc-"+a))&&(a.parentNode&&a.parentNode.removeChild)&&a.parentNode.removeChild(a)};fc9[fc].Fb=function(){return"<Templates xmlns:fc='http://www.google.com/friendconnect/makeThisReal'>  <Namespace prefix='fc' url='http://www.google.com/friendconnect/makeThisReal'/>  <Template tag='fc:signIn'>    <div onAttach='google.friendconnect.renderSignInButton({element: this})'></div>  </Template></Templates>"};
fc9[fc].Mb=function(){return"<Templates xmlns:os='http://ns.opensocial.org/2008/markup'><Namespace prefix='os' url='http://ns.opensocial.org/2008/markup'/><Template tag='os:Name'>  <span if='${!My.person.profileUrl}'>${My.person.displayName}</span>  <a if='${My.person.profileUrl}' href='${My.person.profileUrl}'>      ${My.person.displayName}</a></Template><Template tag='os:Badge'>  <div><img if='${My.person.thumbnailUrl}' src='${My.person.thumbnailUrl}'/>   <os:Name person='${My.person}'/></div></Template><Template tag='os:PeopleSelector'>  <select onchange='google.friendconnect.PeopleSelectorOnChange(this)' name='${My.inputName}'          multiple='${My.multiple}' x-var='${My.var}' x-max='${My.max}'          x-onselect='${My.onselect}'>    <option repeat='${My.group}' value='${Cur.id}' selected='${Cur.id == My.selected}'>        ${Cur.displayName}    </option>  </select></Template></Templates>"};
var fcEc=function(a){var b;if(a.multiple){b=[];for(var c=0;c<a[fcE][fco];c++)a[fcE][c].selected&&b[fcn](a[fcE][c].value);c=a.getAttribute("x-max");try{c*=1}catch(d){c=0}if(c&&b[fco]>c&&a["x-selected"])for(b=a["x-selected"],c=0;c<a[fcE][fco];c++){a[fcE][c].selected=!1;for(var e=0;e<b[fco];e++)if(a[fcE][c].value==b[e]){a[fcE][c].selected=!0;break}}}else b=a[fcE][a.selectedIndex].value;a["x-selected"]=b;(c=a.getAttribute("x-var"))&&fcf.opensocial[fcka]&&fcf.opensocial[fcka].getDataContext().putDataSet(c,
b);if(c=a.getAttribute("x-onselect"))if(fcf[c]&&"function"==typeof fcf[c])fcf[c](b);else a["x-onselect-fn"]?a["x-onselect-fn"][fcK](a):a["x-onselect-fn"]=new Function(c)};
fc9[fc].Wa=function(a,b){fcf.opensocial.template.Loader.loadContent(this.Mb());fcf.opensocial.template.Loader.loadContent(this.Fb());fcf.opensocial[fcka].processDocumentMarkup();var c=fcg[fcF]("div");c.id=b;fcl(c[fcA],"0px");fcj(c[fcA],"0px");c[fcA].position="absolute";c[fcA].visibility="hidden";fcg[fcB][fcm](c);var d={};d.url=fcc+"/friendconnect/gadgets/osapi-"+this.apiVersion+".xml";fcl(d,0);d.id=c.id;d.site=a.site;d["view-params"]=a["view-params"];this.render(d)};
fc5[fc].Ba=function(){fc4.H=this.f;fc4.openSocialSecurityToken=this.a[0];var a=fc4.openSocialSecurityToken;fcf.opensocial[fcka].executeRequests();fcf.opensocial.template.process();fc4.apiLoadedCallback&&(a=fcHa(fc4.apiLoadedCallback,a),fcba(a,0))};fc9[fc].R=function(a){var b=null,c;for(c in this.j)if(this.j[c].divId==a){b=this.j[c];break}return b};fc9[fc].D=function(a,b){var c=this.R(a),d=null;c&&(d=c.D(b));return d};fc9[fc].C=function(a,b){var c=this.R(a),d=null;c&&(d=c.C(b));return d};
fc9[fc].Dc=function(a,b){this.$(function(c){var d=fcg.createTextNode("Copy & paste this code into your site.");c[fcqa]()[fcm](d);c[fcqa]()[fcm](fcg[fcF]("br"));var d=fc4.C(a,b),e=fcg[fcF]("textarea");fck(e,d);e[fcI]("style","width:500px;");c[fcqa]()[fcm](e);c.setVisible(!0)})};var fcFc="ar dv fa iw he ku pa sd tk ug ur yi".split(" "),fcBc=function(a){var b=!1;a?(a=a[fcu]("_")[0],b=fchb(fcFc,a)):b=(a=fcTb(fcg[fcB],"direction"))&&"rtl"==a;return b};
fc5[fc].jb=function(a,b){var c=0,d=null;try{var e=fc$(this.f),g=fc4.w(e),d=g.secureToken,c=g.communityId}catch(l){}b&&(c=b);fc4.Aa(a,c,this.callback,d)};fc9[fc].Aa=function(a,b,c,d){b=b||this.openSocialSiteId;a={keepMax:!0,presentation:"canvas",url:fcc+"/friendconnect/gadgets/members.xml",site:b,"view-params":{profileId:a}};d&&(a.securityToken=d);this.ib(a,c)};fc9[fc].Hb=function(a){var b=null;(a=this.R(a))&&a.secureToken&&(b=a.secureToken);return b};
fc9[fc].Gb=function(a){var b=null;(a=this.R(a))&&a.communityId&&(b=a.communityId);return b};var fcCc=function(a){fc4.H&&fc$b(fc4.H,a)},fcGc=function(){fc5[fc].signout(fc4.openSocialSiteId)},fcHc=function(){fccc(fc4.H)},fcIc=function(a,b){fc7b(a,b)},fclc=function(){this.p={}};fclc[fc].register=function(){fca.rpc[fcN]("subscribeEventType",fc5[fc].subscribe);fca.rpc[fcN]("publishEvent",fc5[fc].publish)};fc5[fc].subscribe=function(a){var b=fczc;b.p[a]=b.p[a]||[];a=b.p[a];a[a[fco]]={frameId:this}};
fclc[fc].kb=function(a,b,c){var d=this;d.p[b]=d.p[b]||[];b=d.p[b];b[b[fco]]={container:a,callback:c}};fc5[fc].publish=function(a){var b=fczc,c=0;this.f&&(c=fc$(this.f));b.p[a]=b.p[a]||[];for(var b=b.p[a],d=0;d<b[fco];d++)b[d].container?b[d].callback[fcC](b[d].container,a,c):fca.rpc[fcC](b[d].frameId,a,null,a,c)};var fcmc=fcT(fc5[fc].publish,new fc5),fczc=new fclc,fc4=new fc9;fc4.Ea(fc4.yb);fcU("google.friendconnect.container",fc4);fcU("google.friendconnect.container.refreshGadgets",fc4.V);
fcU("google.friendconnect.container.setParentUrl",fc4.Y);fcU("google.friendconnect.container.setServerBase",fc4.Z);fcU("google.friendconnect.container.setServerVersion",fc4.Bc);fcU("google.friendconnect.container.createGadget",fc4.O);fcU("google.friendconnect.container.openLightboxIframe",fc4.ta);fcU("google.friendconnect.container.renderGadget",fc4.I);fcU("google.friendconnect.container.render",fc4.render);fcU("google.friendconnect.container.goBackToSite",fc4.Pb);
fcU("google.friendconnect.container.renderMembersGadget",fc4.nc);fcU("google.friendconnect.container.renderReviewGadget",fc4.pc);fcU("google.friendconnect.container.renderCommentsGadget",fc4.va);fcU("google.friendconnect.container.renderSignInGadget",fc4.ab);fcU("google.friendconnect.container.renderFriendBar",fc4.mc);fcU("google.friendconnect.container.renderSocialBar",fc4.ya);fcU("google.friendconnect.container.renderCanvasSignInGadget",fc4.lc);
fcU("google.friendconnect.container.renderUrlCanvasGadget",fc4.qc);fcU("google.friendconnect.container.renderEmbedSignInGadget",fc4.xa);fcU("google.friendconnect.container.renderUrlEmbedGadget",fc4.bb);fcU("google.friendconnect.container.renderEmbedGadget",fc4.wa);fcU("google.friendconnect.container.renderWallGadget",fc4.rc);fcU("google.friendconnect.container.renderAdsGadget",fc4.kc);fcU("google.friendconnect.container.renderOpenSocialGadget",fc4.oc);
fcU("google.friendconnect.container.setNoCache",fc4.fb);fcU("google.friendconnect.container.enableProxy",fc4.Ka);fcU("google.friendconnect.container.setDomain",fc4.xc);fcU("google.friendconnect.container.setLockedDomainSuffix",fc4.Ac);fcU("google.friendconnect.container.setLocale",fc4.zc);fcU("google.friendconnect.container.loadOpenSocialApi",fc4.$b);fcU("google.friendconnect.container.initOpenSocialApi",fc4.pa);fcU("google.friendconnect.container.getOpenSocialApiIframeId",fc4.Lb);
fcU("google.friendconnect.container.setApiVersion",fc4.uc);fcU("google.friendconnect.container.getEmbedUrl",fc4.D);fcU("google.friendconnect.container.getEmbedHtml",fc4.C);fcU("google.friendconnect.container.getGadgetSecurityToken",fc4.Hb);fcU("google.friendconnect.container.getGadgetCommunityId",fc4.Gb);fcU("google.friendconnect.container.showEmbedDialog",fc4.Dc);fcU("google.friendconnect.container.showMemberProfile",fc4.Aa);fcU("google.friendconnect.requestSignIn",fcCc);
fcU("google.friendconnect.requestSignOut",fcGc);fcU("google.friendconnect.requestSettings",fcHc);fcU("google.friendconnect.requestInvite",fcIc);fcU("google.friendconnect.renderSignInButton",fcDc);fcU("google.friendconnect.container.invokeOpenSocialApiViaIframe",fc4.Sb);fcU("google.friendconnect.container.removeOpenSocialApiViaIframe",fc4.jc);fcU("google.friendconnect.userAgent.WEBKIT",fcY);fcU("google.friendconnect.userAgent.IE",fcX);fcU("google.friendconnect.PeopleSelectorOnChange",fcEc);
fcU("google.friendconnect.container.setDateStamp_",fc4.wc);
google.friendconnect.container.setServerBase('http://www-a-fc-opensocial.googleusercontent.com/ps/');google.friendconnect.container.setServerVersion('0.1-742aaa61_a7f8ae74_68a68baf_18f050c4_8a33537c.7');google.friendconnect.container.setApiVersion('0.8');
google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/activities.xml', 'http://q8j0igk2u2f6kf7jogh6s66md2d7r154-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/ads.xml', 'http://t767uouk8skpac15v8ue0n16regb3m2t-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/ask.xml', 'http://uofgf6lm45rimd9jp6hn983ul6n2en81-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/friendbar.xml', 'http://p7rjrrl49ose4gob99eonlvp0drmce3d-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/content_reveal.xml', 'http://n0mc7q283f00tpk3uifa7sjv4hmrults-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/chat.xml', 'http://4mmefl67as0q39gf1o4pnocubqmdgei0-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/donate.xml', 'http://7v4nflqvq38notsghmcr5a9t6o9g6kn4-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/lamegame.xml', 'http://ffbrstu9puk7qmt45got9mqe5k7ijrs4-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/map.xml', 'http://k0dfp8trn0hi5d2spmo7jmc88n6kr1cc-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/members.xml', 'http://r1rk9np7bpcsfoeekl0khkd2juj27q3o-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/newsletterSubscribe.xml', 'http://k830suiki828goudg9448o6bp0tpu5r3-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/poll.xml', 'http://1ivjd75aqp679vbgohjv74tlhn13rgdu-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/recommended_pages.xml', 'http://iqavu79a908u5vcecp0pq80hhbhkv33b-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/review.xml', 'http://r85jiaoot111joesr8bilfhfeslcc496-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/sample.xml', 'http://785aoao97uti9iqffknjp5e0kn2ljlm4-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/signin.xml', 'http://8fkcem1ves287v3g5lu9gep1j91p3kk1-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/wall.xml', 'http://o29lt44ell30t7ljcdfr8lq2mjakv2co-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setDomain('http://www.google.com/friendconnect/gadgets/osapi-0.8.xml', 'http://mc8tdi0ripmbpds25eboaupdulritrp6-a-fc-opensocial.googleusercontent.com/ps/');

google.friendconnect.container.setLockedDomainSuffix('-a-fc-opensocial.googleusercontent.com/ps/');
window['__ps_loaded__'] = true; 
 }google.friendconnect_ = google.friendconnect;
google.friendconnect.container.setDateStamp_('13f9ad1fad5');

/* _script/search */



function submitGoogle(theForm) {
	theForm.ie.disabled=theForm.oe.disabled=theForm.hl.disabled=theForm.q.disabled=theForm.meta.disabled=theForm.num.disabled=theForm.lr.disabled=false; 
	theForm.mslul.disabled=theForm.erk.disabled=true; 
	theForm.q.value=theForm.erk.value+" site:www.tora.us.fm"; 
	theForm.action="http://www.google.co.il/search"; 
	theForm.submit(); 
	theForm.mslul.disabled=theForm.erk.disabled=false;
	theForm.ie.disabled=theForm.oe.disabled=theForm.hl.disabled=theForm.q.disabled=theForm.meta.disabled=theForm.num.disabled=theForm.lr.disabled=true;
}

function submitFindPsuq(theForm) {
	theForm.action=path_from_site_to_cgi + "/../_script/findpsuq.php"; 
	//theForm.mslul.value = "tnk1/_magr/psuqim_gross.csv";
	theForm.mslul.disabled=true; 
	theForm.submit();
}


function submitFind(theForm) {
	theForm.action= '../tnk1/mftx.php'; 
	theForm.mslul.value = site.replace(/nxt/,"tnk1");
	theForm.submit();
}

function submitFindTaconite(theForm) {
	baseurl = '../tnk1/mftx.php?site=tnk1&erk=' + theForm.erk.value + '&format=';
	if (typeof new_window=='undefined' || !new_window) {
		url = baseurl + "taconite";
		$.get(url); //Create AjaxRequest object

		$("#searchresults_anchor").show();
		$(".dor2").hide();
		$("#searchresults_anchor").siblings().show();
	}
	else {
		url = baseurl + "html";
		window.open(url);
	}
}

function goSfrPrq(sfr, prq) {
	if (sfr.length>0)
		top.location.href = "http://tora.us.fm/tnk1/prqim/t"+sfr+prq+".htm";
}



var values = Array (1,2,3,4,5,6,7,8,9,10,20,20,30,40,40,50,50,60,70,80,80,90,90,100,200,300,400);
var letters1 = ''.split('');
var letters2 = ''.split('');
var letters3 = ''.split('');
function number2hebrew(num) {
	heb = "";
	while (num > 400) {
		heb += "";
		num -= 400;
	}
	if (num >= 100) {
		heb += letters3[ Math.floor(num / 100) - 1 ];
		num %= 100;
	}
	if (num >= 10) {
		if (num == 15) {
			heb += "";
			num = 0;
		}
		else if (num == 16) {
			heb += "";
			num = 0;
		}
		else {
			heb += letters2[ Math.floor(num / 10) - 1 ];
			num %= 10;
		}
	}
	if (num >= 1) {
		heb += letters1[ num - 1 ];
	}
	
	return heb;
}




function setPrq(sfrIndex, prqElement) {
	prqElement.options.length=0;
	if (sfrIndex<=0) return;

	var kmuyot_prqim = new Array(50,40,27,36,34,24,21,31,24,22,25,66,52,48,14,4,9,1,4,7,3,3,3,2,14,3,29,36,150,42,31,4,8,12,5,10,12,10,13);
	var kmut_prqim = kmuyot_prqim[sfrIndex-1];

	prqElement.options[0] = new Option("-", "");
	for (var i=1; i<=kmut_prqim; ++i) {
		var kotrt = number2hebrew(i);
		var ktovt = (
			i<10? "0"+i:
			i<100? i:
			i<110? "a"+(i-100): 
			i<120? "b"+(i-110): 
			i<130? "c"+(i-120): 
			i<140? "d"+(i-130): 
			i<150? "e"+(i-140): 
			i<160? "f"+(i-150): "");
		prqElement.options[i] = new Option(kotrt, ktovt);
	}
}



/* _script/etc_prqim */


var SUBSEQUENT_CLICKS_TO_EDIT = 5;



  
var theTokn, theTguvot, theAddForm, theEditForm;  // initialized in "tguva"

var theTitle = 0;

formTextStyle = ' style="font-size:15pt" ';



function text2HTML(theText) {
	return theText.
		replace(/(http:\/\/[^ \r\n\t()<>{}]+)/gi, "<a href='$1'>$1</a>").
		replace(/\cM/g, "").
		replace(/\n\n/g, "<p>").
		replace(/\n/g, "<br />").
		replace(/&lt;/gi, "<").
		replace(/&gt;/gi, ">").
		replace(/&quot;/gi, "\"");
}

origsubjectInput = '<input type=hidden name="origsubject" value="' + title_without_quotes + '">';
titleInput = '<input type=hidden name=title value="'+title_without_quotes+'">' + 
             '<input type=hidden name=titlechanged value="">';
orignameInput = '<input type=hidden name="origname" value="' + theAuthor + '">';
origemailInput = '<input type=hidden name="origemail" value="' + theReceiver + '">';
subjectInput = '<input'+formTextStyle+' type=text name="title" size=50 value="">';
bodyclassInput = '<select'+formTextStyle+' size=1 name="bodyclass"> \
  <option value="" selected="selected">*   * \
  <option value=tguva>\
  <option value=mamr>\
  <option value=la_gmwr> \
  <option value=hpwk>  \
  <option value=jyr> \
  </select>';




function OtIvritLOtLtinit(ot) {
	var otiot_ivriot = "";  // putting this line outside the routine works in firefox but not in IE.
	var otiot_ltinyot = "ABGDHWZXFIKKLMMNNSEPPCCQRJT";
        var ii = otiot_ivriot.indexOf(ot);
        if (ii>=0)
		return otiot_ltinyot.charAt(ii);
	else
		return ot;
}

function MxroztivritLMxroztLtinit(mxrozt) {
	var result = "";
	for (var jj=mxrozt.length-1; jj>=0; --jj) {
		result = OtIvritLOtLtinit(mxrozt.charAt(jj)) + result;
        }
        return result;
}



var kl_hsugim = MxroztivritLMxroztLtinit('::::::::::::::::::::');
var trgwmim = MxroztivritLMxroztLtinit(':::');
var qijurim = MxroztivritLMxroztLtinit(':');
var kotrot = MxroztivritLMxroztLtinit('::');
var af_sug = 'AFSUG';

var sugimString;

function getSugimString() {
	// sugim-string may be set by the search string (i.e. ...htm?MJXQ:MCGT:...)
	if (location.search.length>1) {
		sugimString = location.search.replace(/^\?+/,"");
	}
	else {
		sugimString = getCookie('sugim');
		//if (sugimString.length<=1 || /[^A-Z:]/.test(sugimString)) {
			sugimString = ""+kl_hsugim+kotrot+qijurim;  // default
		//}
	}
	setCookie('sugim', sugimString, 30, '/tnk1/prqim');
}

function setSugimString(theNewString) {
	setCookie('sugim', theNewString, 30, '/tnk1/prqim');
	sugimString = getCookie('sugim');
	if (theNewString != sugimString) {     // cookies are probably not enabled; use the search-string method
		newHref = location.href.replace(/[?].*$/, "") + "?" + theNewString;
		location.replace(newHref);
	}
	else {
		newHref = location.href.replace(/[?].*$/, "");
		location.replace(newHref);
		location.reload();
	}
}

if (/prqim/.test(path_from_root_to_document)) {
	getSugimString();
}



function mxrozt_bxirt_sugim() {
   return '<span style="font-size:13pt">: ' +
      '<button style="font-size:13pt; margin:0; padding:0; width:20%; font-weight:bold; background:#6666cc" onclick="setSugimString(\'' + af_sug + '\')"><br /></button>&nbsp;' + 
      '<button style="font-size:13pt; margin:0; padding:0; width:20%; font-weight:bold; background:#6688cc" onclick="setSugimString(\'' + trgwmim + kotrot + '\')"><br /></button>&nbsp;' + 
      '<button style="font-size:13pt; margin:0; padding:0; width:25%; font-weight:bold; background:#66aacc" onclick="setSugimString(\'' + kl_hsugim+kotrot + '\')"><br /> </button>&nbsp;' + 
      '<button style="font-size:13pt; margin:0; padding:0; width:25%; font-weight:bold; background:#66cccc" onclick="setSugimString(\'' + kl_hsugim+kotrot+qijurim + '\')"><br /> </button>' + 
      '</span>';
}

function ktov_bxirt_sugim() {
      document.write("<p>"+mxrozt_bxirt_sugim());
      document.write("<p style='font-size:14pt'><a href='help.html'>     -    </a>");
}

function lktov_sug(kotrt, sug) {
   var regexp = new RegExp(sug);      // 0-1 millis
   var t1 = regexp.test(kotrt);       // 0-1 millis
   var t2 = regexp.test(sugimString); // 0-1 millis
   return (t1 && t2);
}


function ktov_bnim(pattern) {
	//start = new Date();
	
	thePatternBnimArray = theBnimHash[pattern];    // 0 millis

	if (!thePatternBnimArray) return;
	writeAll = (/QIJWRIM/.test(sugimString));
	var mxrozt_bnim = "";
	var mxrozt_trgumim = "";
	var mspr_bnim_lhcga = 0;

	for (var i=thePatternBnimArray.length-1; i>=0; --i) {
		var bn = theBnimArray[thePatternBnimArray[i]];
		var bn_ltinit = MxroztivritLMxroztLtinit(bn);
		
		if (lktov_sug(bn_ltinit,'TRGWM:') || lktov_sug(bn_ltinit,'TRGWMIM:')  || lktov_sug(bn_ltinit,'PTIXH:') ) {    // 8-13 millis
			bn = bn.                                              // 0 millis 
				replace(/<\/A>.*/ig,"<\/a>").
				replace(/>:/, "   style='background-color:white; font-weight: bold; font-style:normal'>=").
				replace(/>: /, " style='background-color:white; font-weight: bold; font-style:normal'>").
				replace(/>: /, " style='background-color:white; font-weight: bold; font-style:normal'>");
			if (/href/.test(bn))
				mxrozt_trgumim += ("&nbsp;" + bn + "&nbsp;");
			theWrittenBnim[thePatternBnimArray[i]] = 1;
		} // end if

		if (
		lktov_sug(bn_ltinit,'AWSP:') ||
		lktov_sug(bn_ltinit,'ATR:') ||
		lktov_sug(bn_ltinit,'HBDLIM:') ||
		lktov_sug(bn_ltinit,'HGDRH:') ||
		lktov_sug(bn_ltinit,'DMIWNI:') ||
		lktov_sug(bn_ltinit,'KLL:') ||
		lktov_sug(bn_ltinit,'GMWR:') ||
		lktov_sug(bn_ltinit,'PWRSM:') ||
		lktov_sug(bn_ltinit,'MCWH:') ||
		lktov_sug(bn_ltinit,'MAMR:') ||
		lktov_sug(bn_ltinit,'MBNH:') ||
		lktov_sug(bn_ltinit,'MCGT:') ||
		lktov_sug(bn_ltinit,'SIPWR:') ||
		lktov_sug(bn_ltinit,'MJXQ:') ||
		lktov_sug(bn_ltinit,'QWBC:') ||
		lktov_sug(bn_ltinit,'CIWR') ||
		lktov_sug(bn_ltinit,'JIR:') ||
		( (/ :/.test(bn) || /small/i.test(bn) || /-&gt;/i.test(bn)) && /TWSPT/.test(sugimString)) || 
		0) {
			bn = bn.
				replace(/<\/A>.*/ig,"<\/A>").replace(/<\/a>.*/ig,"<\/A>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/tw.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/mvne.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/hvdlim.gif>").
				replace(/ :/, "<img style='margin-bottom:-0.5ex' src=../_themes/cyur.gif> :").
				replace(/ :/, "<img style='margin-bottom:-0.5ex' title='' src=../_themes/ein_knisa.gif> :").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/mamr1.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/srt.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/storybook.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/games.gif>").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/kll.gif>").
				replace(/  :/, "<img style='margin-bottom:-0.5ex' src=../_themes/jtil.gif>  :").
				replace(/:/, "<img style='margin-bottom:-0.5ex' src=../_themes/mcwa.gif>");
			mxrozt_bnim += ("&nbsp;" + bn + "&nbsp;");
			++mspr_bnim_lhcga;
			theWrittenBnim[thePatternBnimArray[i]] = 1;
		} // end if
	} // end for

	document.write(mxrozt_trgumim);
	if (writeAll) {
		document.write(mxrozt_bnim);
	} 
	else {
		if (mspr_bnim_lhcga>0) {
			id = "qijurim" + pattern.replace(/[^0-9a-zA-Z]/,"");
			var href = "javascript:" + 
				"showorhide('" + id + "');";
			document.write("<a style='background:white' target=_self href='javascript:" + 
				"showorhide(\"" + id + "\");'>" + 
			mspr_bnim_lhcga + 
			"<img src=../_themes/mamr.gif />" + 
			"</a>");
			document.write("<SPAN style='display:none' id='"+id+"'>" + mxrozt_bnim + "</span>");
		}
	}
	
	//finish = new Date(); alert(finish-start);     //  1841 - 60 millis
}



function ktov_kotrot(pattern) {
	if ( /KWTRT[:]/.test(sugimString) || /PTIXH[:]/.test(sugimString) ) {
		thePatternBnimArray = theBnimHash[pattern];
		if (!thePatternBnimArray) return;
		var mxrozt_bnim = "";
		var mspr_bnim_lhcga = 0;
		for (i=thePatternBnimArray.length-1; i>=0; --i) {
			var bn = theBnimArray[thePatternBnimArray[i]];
			var bn_ltinit = MxroztivritLMxroztLtinit(bn);
			if (lktov_sug(bn_ltinit,'KWTRT:') || lktov_sug(bn_ltinit,'PTIXH:'))   {
				bn = bn.
					replace(/>: /," style='color:#aaaaaa; display:inline; padding-left:4ex; padding-right:4ex'>").
					replace(/>: /," style='font-weight:bold; font-family: Aharoni; font-size: 14pt; font-style: normal; display:block; padding:1ex 0 1ex 0; margin: 1ex -4ex 1ex 0; border-top:solid #444444; background-color:#eeeeee'>").
					replace(/<\/a>/i,":</a>").         // remove links, and add colon
					replace(/href=[^ ]*/i,"")
					;
				mxrozt_bnim += bn;
				theWrittenBnim[thePatternBnimArray[i]] = 1;
				++mspr_bnim_lhcga;
			} //if
		} //for
		document.write(mxrozt_bnim);
	}//if
}//ktov_kotrot



function ktov_bnim_axrim() {
   theText = "";
   for (i=theBnimArray.length-1; i>=0; --i) {
      if (!theWrittenBnim[i]) {
         bn = theBnimArray[i];
         theText = ("&nbsp;" + bn.replace(/<\/A>.*$/ig,"<\/A>") + "&nbsp;") + theText;
      }
   }
   document.write(theText);
} 





var otiot_ltiniot = "abcdefgh";

function MsprLOtIvrit(mspr) {
	var otiot_txiliot = "";  // putting this line outside the routine works in firefox but not in IE.
	if (mspr==0) return "";
	else if (mspr<=10) return otiot_txiliot.charAt(mspr-1);
	else if (mspr<=100) return otiot_txiliot.charAt(mspr / 10 + 8); 
	else if (mspr<=400) return  otiot_txiliot.charAt(mspr / 100 + 17); 
	else alert('  !')
}

function MsprLMxroztIvrit(mspr) {
    tocaa = 
        MsprLOtIvrit(mspr - mspr%100) +
        MsprLOtIvrit(mspr%100 - mspr%10) +
        MsprLOtIvrit(mspr%10);
    tocaa = tocaa.replace("" + "", "");
    tocaa = tocaa.replace("" + "", "");
    return tocaa;
}

function MsprLPsuq(mspr) {
    if (mspr<10) return ("0" + mspr.toString());
    else if (mspr<100) return mspr;
    else return otiot_ltiniot.charAt((mspr-100)/10) + (mspr%10);
}



function ktov_prqim(sfr,kmut_prqim) {
var theString = "", href = "";
for (ii=1; ii<=kmut_prqim; ++ii) {
	if (/prqim/.test(path_from_root_to_document))  href = "t" + sfr + MsprLPsuq(ii) + ".htm";
	if (/jdl/.test(path_from_root_to_document))  href = "MefarsheyTanach" + sfr + "-" + MsprLPsuq(ii) + ".htm";

	if (href == path_from_document_to_document) theString += ("<A>" + MsprLMxroztIvrit(ii) + "</A> ");
	else {
		// if (cookies_are_enabled) {
			theString += ("<A target=_top href='" + href + "'>" + MsprLMxroztIvrit(ii) + "</A> ");
		//}
		//else {
		//	theString += ("<A target=_top href='" + href + "?" + sugimString + "'>" + MsprLMxroztIvrit(ii) + "</A> ");
		//}
	}

	theString += (" ");
}
document.write(theString);
}


function ktov_psuqim(prq,tvla) {
	theString = "  ";
	thePsuqim = tvla.split(/ /);
	for (var ii=0; ii<thePsuqim.length; ++ii) {
		href = prq + "-" + MsprLPsuq(thePsuqim[ii]) + "-mlbim.htm";
		if (href == path_from_document_to_document) theString += ("<A>" + thePsuqim[ii] + "</A> ");
		else theString += ("<A target=_top href='" + href + "'>" + thePsuqim[ii] + "</A> ");
	}
	document.write(theString);
}


function kotrt_mfrj() {
        theText="";

	if (!document.getElementById("h1")) {
	 	theText += ("<H1 id='h1'>" + document.title + "</H1>");
	}
    
	theText += ("<div style='text-align:center;font-style:italic'>");
	if (/mlbim/.test(path_from_root_to_document))   {
		theText += ('<p>');
		if (/jm-.*-\d\d\d/.test(path_from_root_to_document))  theText += (': <br />');
		if (/wy-.*-\d\d\d/.test(path_from_root_to_document))  theText += (': <br />');
		if (/bm-.*-\d\d\d/.test(path_from_root_to_document))  theText += (': <br />');
		if (/dm-.*-\d\d\d/.test(path_from_root_to_document))  theText += (': <br />');
		theText += (': "');
	}
	if (/jdl.*Mefar/.test(path_from_root_to_document))   theText += ('<p>     "     "  .  (, " - , "),      " .    .');
	theText += ('<p>: ' + theAuthor  + '<br />: ' + theReceiver);
	theText += ("</div>");

	document.write(theText);
}



function currentVersionIsFormal() {
	return !(/\d\d\d\d\d\d\d\d\d\d\d\d/.test(document.URL) || /-open/.test(document.URL));
}


function linkToFormalVersion() {
	return  " " + 
		"<a href='" + path_from_document_to_document + siomt + "'>" + 
		(lang=='en'? "Click here to view the formal version of this document": "        ") + 
		"</a> ";
}

function linksToOtherVersions() {
	var theText = ("<div class='formerversions'>");

	if (/http:/.test(document.URL) && currentVersionIsFormal() && !/compact|csv_ezor[.]p/.test(document.URL)) {
		theText += (
			'<iframe width="100%" height="42" src="' +
			path_from_document_to_root +
			'_script/versionlist.php?versionlist=short&lang='+
			lang +
			'&followup='+path_from_root_to_document+
			'"></iframe>');
	}
	else if (!/compact|csv_ezor[.]p/.test(document.URL)) {
		if (currentVersionIsFormal()) {
			theText += (lang=='en'? 'This is the <b>formal version</b> of the document, last updated at ': ' <b> </b>  ,   -');
			theText += document.lastModified + '. ';
		}
		else {
			theText += 
			(lang=='en'? 'This is a non-formal version of the document, created ': '     ,  ' );
			theText += document.lastModified + '. ';
			theText += linkToFormalVersion();
		}
	} // end of "if http..."
	theText += ("</div>");
        document.write(theText);
}


function txtit() {
linksToOtherVersions();

var theText = "";
theText += ("<div class=txtit>");
	theText += ("<br />  ,  ,   <a class='qijur_lgrsa' href='http://shamash.org/tanach/tanach/text/transliterated.tanach/'>   </a>");
	theText += (" <br />     : <A dir='ltr' href='" + absolute_document_url  + "'>" + absolute_document_url   + "</A>")
	theText += ("  <br />   : <SPAN dir='ltr'>" + document.lastModified + "</SPAN>")
	theText += ("  <br />" + site_name + ": <A dir='ltr' href='" + absolute_site_url + "'>" + absolute_site_url + "</A>")
theText += ("</div>")

document.write(theText);
}





function markOnly(theButton) {
	unmark('button1');
	unmark('button2');
	unmark('button3');
	unmark('button4');
	mark(theButton);
}



function standardizeHTMLTokn(theHTML) {
	theText = theHTML.
	/* add newline before a start-tag (except an underline) */
		replace(/(<[^uU\/!])/ig,"\r\n$1").
	/* add space before an end-tag (except an underline) */
		replace(/(<\/[^uU])/ig," $1").
	/* remove unneeded tags */
		replace(/<\/LI>/ig,"").
		replace(/<\/P>/ig,"").
		replace(/<\/TD>/ig,"").
		replace(/<\/TR>/ig,"").
		replace(/<TBODY>/ig,"").
		replace(/<\/TBODY>/ig,"").
		replace(/<o:p>\s*<\/o:p>/ig,"").
	/* remove unneeded properties (added by "Word") */
		replace(/ class=MsoNormal[a-z]*/ig,"").
		replace(/mso-[^ ">]*:\s*[^ ">]*/ig,"").
		replace(/margin[^ ">]*:\s*[^ ">]*/ig,"").
		replace(/style=[\"\'][\"\']/ig,"").
	/* remove unneeded spans */
		replace(/<SPAN[^>]*>\s*<\/SPAN>/ig,"").
		replace(/<SPAN>([^<]*)<\/SPAN>/ig,"$1").
		replace(/<SPAN[^>]*>\s*<\/SPAN>/ig,"").
		replace(/<SPAN>([^<]*)<\/SPAN>/ig,"$1").
	/* remove unneeded parts of a link */
		replace(/(\.htm)\?[^\"\'<>]*/ig,"$1").
	/* fix span direction (for bidi text) */
		replace(/(<p[^>]*>\s*)(<SPAN[^>]*>)*(\s*<SPAN[^>]*)dir=...([^>]*>)/ig,"$1$2$3$4").
	/* remove unneeded newlines */
		replace(/\r\n(\r\n)+/ig, "\r\n").
		replace(/^\r\n/ig, "").
		replace(/\r\n$/ig, "");
	return theText;
}





function standardizeHTML() {
	if (theTokn && theTguvot) {
		return "<div id='tokn'>\r\n" + 
			standardizeHTMLTokn(theTokn.innerHTML) + "\r\n" +
			"</" + "div !--tokn-->\r\n" + 
			"<h2 id='tguvot'>" + document.getElementById('tguvot').innerHTML + "</h2>\r\n\r\n" + 
			"<ul id='ultguvot' !--begin-->\r\n" + 
			standardizeHTMLTokn(theTguvot.innerHTML) + "\r\n" +
			"</" + "ul !--end-->\r\n\r\n";
	}
	else if (theBnim) {
		return "<ul id='ulbnim' style='display:none'>\r\n" + 
			standardizeHTMLTokn(theBnim.innerHTML) + "\r\n" +
			"</" + "ul !--end-->\r\n\r\n";
	}
	else {
		alert('   .    !');
	}
}



function showEdit(theForm) {
	theAddForm.qijur.disabled = true;
	theAddForm.jm_qovc_al_hlqox.disabled = true;
	hide(theAddForm);
	show(theEditForm);
	
	if (theForm=='editinplace') {
		makeDocumentEditable(true);
		show('editinplace');
	}
	else {
		makeDocumentEditable(false);
		hide('editinplace');
	}
}

function showAdd(theForm) {
	show(theAddForm);
	hideEdit(theEditForm);
	hide('addtext');
	hide('addlink');
	hide('addfile');
	show(theForm);
}


function hideEdit() {
	if (document.all) {
		hide('editform');
	}
	else {
		theEditForm.style.visibility = 'hidden';
	}
	makeDocumentEditable(false);
}



/*
function showEdit(theForm) {
	theAddForm.qijur.value='http://';
	if (ContentEditableSupported()) theAddForm.jm_qovc_al_hlqox.value=''; // TODO TEMPVER
	hide(theAddForm);
	show(theEditForm);
	makeDocumentEditable(theForm=='editinplace');
	hide('editinplace');
	show(theForm);
}



function hideEdit() {
	hide(theEditForm);
	makeDocumentEditable(false);
}


function makeDocumentEditable(isEditable) {
	if (theBnim) {
		makeEditable (theTosft, isEditable);
		makeEditable (theBnim, isEditable);
		// theBnim.style.display = (isEditable? '': 'none');
	}
	else {
		makeEditable (theTokn, isEditable);
		makeEditable (theTguvot, isEditable);
	}
	makeEditable (theTitle, isEditable);
}



*/



var lastClickTime = new Date();
var clickCount = 0;

function countSubsequentClicks() {
    var now = new Date();
    var difference = now.getTime() - lastClickTime.getTime();
    if (difference <= 300)
       ++clickCount;
    else
       clickCount=1;
    lastClickTime = now;
    return clickCount;
}

function toggleEdit(eventObject) {
    count = countSubsequentClicks();
    if (count==SUBSEQUENT_CLICKS_TO_EDIT) {
       clickType=(navigator.appName=="Netscape")? eventObject.which: event.button;
       if (theEditForm.style.display=='none')
          showEdit('editinplace'); 
       else
          hideEdit();
    }
}





function makeDocumentEditable(isEditable) {
	if (theBnim) {
		makeEditable (theBnim, isEditable);
	}
	else {
		makeEditable (theTokn, isEditable);
		makeEditable (theTguvot, isEditable);
	}
	makeEditable (theTitle, isEditable);
}




function onSubmitAdd(theForm) {
	theForm.body.value = text2HTML(theForm.body.value);
}


function tguva () {

	if (!theBnim) theBnim = document.getElementById('ulbnim');
	theTokn = document.getElementById('tokn');
	theTguvot = document.getElementById('ultguvot');

	kftor1 = "  ";
	teur1 = "    "+document.title+",     ;      "+document.title+",     ";

	if ((theBnim||theTokn||theTguvot) && ContentEditableSupported()) {
		kftor4 = ' ';
		teur4 = '';
		teur4a = '<h3> </h3>'+
			'<p'+formTextStyle+'>   ,      " "';
		kftor4a = '<input type="submit" name="rewrite" value=" " onclick="if (this.form.name.value && this.form.title.value && (!passwordIsRequired || this.form.password.value))  this.form.content.value=standardizeHTML()">';
	}
	else {
		kftor4 = ''; //'  ';
		teur4 = '';
		teur4a = '<h3>  </h3>';
		kftor4a = '';
	}



document.write(buttonGroup(
	"markOnly(\'button1\');showAdd(\'addtext\');theAddForm.qijur.value=\'http://\';theAddForm.jm_qovc_al_hlqox.disabled=true",
	kftor1,
	teur1,

	"markOnly(\'button2\');showAdd(\'addlink\');theAddForm.jm_qovc_al_hlqox.disabled=true",
	" ",
	'       '+document.title+',     ',
	
	"markOnly(\'button3\');showAdd(\'addfile\');theAddForm.jm_qovc_al_hlqox.disabled=false;theAddForm.qijur.value=\'http://\'",
	" ",
	'     '+document.title+' (, , ...)     ',

	"markOnly(\'button4\');showEdit(\'editinplace\');theAddForm.qijur.value=\'http://\';theAddForm.jm_qovc_al_hlqox.value=\'\'",
	kftor4,
	teur4
) + 

formHeader('addform')+idFields(path_from_root_to_document,usernameHint,passwordHint,emailHint)+
	origsubjectInput+
	orignameInput+
	origemailInput+
	'<p'+formTextStyle+'>'+
	bodyclassInput + 
	subjectInput);

document.write(
	"<div id='addtext'>\n" + 
		(lang=='en'? '': '<p><B> </B>:     .      .    ""    .') + 
		(lang=='en'? '<h3>Content (text and hyperlinks)</h3>': '<h3> ( ):</h3>') + 
		"<p><textarea name='body' cols='50' rows='10'></textarea></p>\n" + 
	"</div>\n");


document.write(
	"<div id='addfile'>\n"+
		(lang=='en'? "<h3>A file from your computer</h3>": "<h3>  </h3>")+
		"<p><input type='file' name='jm_qovc_al_hlqox' size='40' onmouseout='if(jm_qovc_al_hlqox.value) theAddForm.title.value=fileparse(jm_qovc_al_hlqox.value)[2];'>"+
		"<p><input type='checkbox' name='hxlf_qovc'>" + 
		(lang=='en'? 'replace file if it exists': '    ')+
	"</div>\n"+

	"<div id='addlink'>\n"+
		(lang=='en'? "<h3>A hyperlink</h3>\n": "<h3>    </h3>\n")+
		"<p><input type='text' name='qijur' dir='ltr' value='http://' size='45' /></p>\n"+
	"</div>\n"+

	(theTvnit=='0'?
		"<input name='add' type='submit' value='"+submitLabel+"'  onclick=''>":
		"<input name='add' type='submit' value='"+submitLabel+"' onclick='onSubmitAdd(this.form)'>") +
	(lang=='en'? "Please be patient, your reply will be posted in a few minutes": 
	"     .   !     -     ")+

"</form>\n");


document.write(
formHeader('editform')+idFields(path_from_root_to_document,usernameHint,passwordHint,emailHint)+
	titleInput+
	'<textarea style="display:none" name="content"></textarea>'+
 	'<div id="editinplace" style="display:none">'+
		teur4a +
		kftor4a+
	'</div>'+
	'<input type="submit" name="versionlist" value="  ">'+
'</form>');

theAddForm = document.getElementById('addform');
theEditForm = document.getElementById('editform');
hide(theAddForm );
hide(theEditForm);

document.onclick = toggleEdit;
document.onmousedown = toggleEdit;

}  // end of function "tguva"


/* _script/jquery.taconite */

/*
 * jQuery Taconite plugin - A port of the Taconite framework by Ryan Asleson and
 *     Nathaniel T. Schutta: http://taconite.sourceforge.net/
 *
 * Examples and documentation at: http://malsup.com/jquery/taconite/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Thanks to Kenton Simpson for contributing many good ideas!
 *
 * $Id$
 * @version: 3.03  10/22/2008
 * @requires jQuery v1.2.3 or later
 */

(function($) {

$.taconite = function(xml) { processDoc(xml); };

$.taconite.debug = 0;  // set to true to enable debug logging to Firebug
$.taconite.version = '3.03';
$.taconite.defaults = {
    cdataWrap: 'div'
};

if (typeof $.fn.replace == 'undefined')
    $.fn.replace = function(a) { return this.after(a).remove(); };
if (typeof $.fn.replaceContent == 'undefined')
    $.fn.replaceContent = function(a) { return this.empty().append(a); };

$.expr[':'].taconiteTag = 'a.taconiteTag';

$.taconite._httpData = $.httpData; // original jQuery httpData function

$.httpData = $.taconite.detect = function(xhr, type) {
    var ct = xhr.getResponseHeader('content-type');
    if ($.taconite.debug) {
        log('[AJAX response] content-type: ', ct, ';  status: ', xhr.status, ' ', xhr.statusText, ';  has responseXML: ', xhr.responseXML != null);
        log('type: ' + type);
        log('responseXML: ' + xhr.responseXML);
    }
    var data = $.taconite._httpData(xhr, type); // call original method
    if (data && data.documentElement) {
        var root = data.documentElement.tagName;
        log('XML document root: ', root);
        if (root == 'taconite') {
            log('taconite command document detected');
            $.taconite(data);
        }
    }
    else { 
        log('jQuery core httpData returned: ' + data);
        log('httpData: response is not XML (or not "valid" XML)');
    }
    return data;
};

$.taconite.enableAutoDetection = function(b) {
    $.httpData = b ? $.taconite.detect : $.taconite._httpData;
};

var logCount = 0;
function log() {
    if (!$.taconite.debug || !window.console || !window.console.log) return;
    if (!logCount++)
        log('Plugin Version: ' + $.taconite.version);
    window.console.log('[taconite] ' + [].join.call(arguments,''));
};

function processDoc(xml) { 
    var status = true, ex;
    try {
        $.event.trigger('taconite-begin-notify', [xml])
        status = go(xml); 
    } catch(e) {
        status = ex = e;
    }
    $.event.trigger('taconite-complete-notify', [xml, !!status, status === true ? null : status]);
    if (ex) throw ex;
};

function go(xml) {
    var trimHash = { wrap: 1 };

    if (typeof xml == 'string')
        xml = convert(xml);
    if (!xml || !xml.documentElement) {
        log('$.taconite invoked without valid document; nothing to process');
        return false;
    }
    try {
        var t = new Date().getTime();
        // process the document
        process(xml.documentElement.childNodes);
        $.taconite.lastTime = (new Date().getTime()) - t;
        log('time to process response: ' + $.taconite.lastTime + 'ms');
    } catch(e) {
        if (window.console && window.console.error)
            window.console.error('[taconite] ERROR processing document: ' + e);
        throw e;
    }
    return true;
    
    function convert(s) {
        var doc;
        log('attempting string to document conversion');
        try {
            if($.browser.msie) {
                doc = $("<xml>")[0];
                doc.async = 'false';
                doc.loadXML(s);
            }
            else {
                var parser = new DOMParser();
                doc = parser.parseFromString(s, 'text/xml');
            }
        }
        catch(e) {
            if (window.console && window.console.error)
                window.console.error('[taconite] ERROR parsing XML string for conversion: ' + e);
            throw e;
        }
        var ok = doc && doc.documentElement && doc.documentElement.tagName != 'parsererror';
        log('conversion ', ok ? 'successful!' : 'FAILED');
        return doc;
    };

    function process(commands) {
        var doPostProcess = 0;
        for(var i=0; i < commands.length; i++) {
            if (commands[i].nodeType != 1)
                continue; // commands are elements
            var cmdNode = commands[i], cmd = cmdNode.tagName;
            if (cmd == 'eval') {
                var js = (cmdNode.firstChild ? cmdNode.firstChild.nodeValue : null);
                log('invoking "eval" command: ', js);
                if (js) $.globalEval(js);
                continue;
            }
            var q = cmdNode.getAttribute('select');
            var jq = $(q);
            if (!jq[0]) {
                log('No matching targets for selector: ', q);
                continue;
            }
            var cdataWrap = cmdNode.getAttribute('cdataWrap') || $.taconite.defaults.cdataWrap;

            var a = [];
            if (cmdNode.childNodes.length > 0) {
                doPostProcess = 1;
                for (var j=0,els=[]; j < cmdNode.childNodes.length; j++)
                    els[j] = createNode(cmdNode.childNodes[j]);
                a.push(trimHash[cmd] ? cleanse(els) : els);
            }

            // remain backward compat with pre 2.0.9 versions
            var n = cmdNode.getAttribute('name');
            var v = cmdNode.getAttribute('value');
            if (n !== null) a.push(n);
            if (v !== null) a.push(v);

            // @since: 2.0.9: support arg1, arg2, arg3...
            for (var j=1; true; j++) {
                v = cmdNode.getAttribute('arg'+j);
                if (v === null)
                    break;
                a.push(v);
            }

            if ($.taconite.debug) {
                var arg = els ? '...' : a.join(',');
                log("invoking command: $('", q, "').", cmd, '('+ arg +')');
            }
            jq[cmd].apply(jq,a);
        }
        // apply dynamic fixes
        if (doPostProcess) 
            postProcess();
    
        function postProcess() {
            if ($.browser.mozilla) return; 
            // post processing fixes go here; currently there is only one:
            // fix1: opera, IE6, Safari/Win don't maintain selected options in all cases (thanks to Karel Fuck for this!)
            $('select:taconiteTag').each(function() {
                var sel = this;
                $('option:taconiteTag', this).each(function() {
                    this.setAttribute('selected','selected');
                    this.taconiteTag = null;
                    if (sel.type == 'select-one') {
                        var idx = $('option',sel).index(this);
                        sel.selectedIndex = idx;
                    }
                });
                this.taconiteTag = null;
            });
        };
        
        function cleanse(els) {
            for (var i=0, a=[]; i < els.length; i++)
                if (els[i].nodeType == 1) a.push(els[i]);
            return a;
        };
        
        function createNode(node) {
            var type = node.nodeType;
            if (type == 1) return createElement(node);
            if (type == 3) return fixTextNode(node.nodeValue);
            if (type == 4) return handleCDATA(node.nodeValue);
            return null;
        };
        
        function handleCDATA(s) {
            var el = document.createElement(cdataWrap);
            el.innerHTML = s;
            return el;
        };
        
        function fixTextNode(s) {
            if ($.browser.msie) s = s.replace(/\n/g, '\r').replace(/\s+/g, ' ');
            return document.createTextNode(s);
        };
        
        function createElement(node) {
            var e, tag = node.tagName.toLowerCase();
            // some elements in IE need to be created with attrs inline
            if ($.browser.msie) {
                var type = node.getAttribute('type');
                if (tag == 'table' || type == 'radio' || type == 'checkbox' || tag == 'button' || 
                    (tag == 'select' && node.getAttribute('multiple'))) {
                    e = document.createElement('<' + tag + ' ' + copyAttrs(null, node, true) + '>');
                }
            }
            if (!e) {
                e = document.createElement(tag);
                copyAttrs(e, node, tag == 'option' && $.browser.safari);
            }
            
            // IE fix; colspan must be explicitly set
            if ($.browser.msie && tag == 'td') {
                var colspan = node.getAttribute('colspan');
                if (colspan) e.colSpan = parseInt(colspan);
            }

            // IE fix; script tag not allowed to have children
            if($.browser.msie && !e.canHaveChildren) {
                if(node.childNodes.length > 0)
                    e.text = node.text;
            }
            else {
                for(var i=0, max=node.childNodes.length; i < max; i++) {
                    var child = createNode (node.childNodes[i]);
                    if(child) e.appendChild(child);
                }
            }
            if (! $.browser.mozilla) {
                if (tag == 'select' || (tag == 'option' && node.getAttribute('selected')))
                    e.taconiteTag = 1;
            }
            return e;
        };
        
        function copyAttrs(dest, src, inline) {
            for (var i=0, attr=''; i < src.attributes.length; i++) {
                var a = src.attributes[i], n = $.trim(a.name), v = $.trim(a.value);
                if (inline) attr += (n + '="' + v + '" ');
                else if (n == 'style') { // IE workaround
                    dest.style.cssText = v;
                    dest.setAttribute(n, v);
                }
                else $.attr(dest, n, v);
            }
            return attr;
        };
    };
};

})(jQuery);
